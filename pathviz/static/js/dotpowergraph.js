(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";const cola=require("../index");const graphlibDot=require("graphlib-dot");var dotpowergraph;(function(dotpowergraph){function makeSVG(addGridLines,mywidth,myheight){var svg=d3.select("body").append("svg").attr("width",mywidth).attr("height",myheight);return svg;}function isIE(){return((navigator.appName=='Microsoft Internet Explorer')||((navigator.appName=='Netscape')&&(new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})").exec(navigator.userAgent)!=null)));}function gridify(svg,pgLayout,margin,groupMargin){var routes=cola.gridify(pgLayout,5,margin,groupMargin);svg.selectAll('path').remove();routes.forEach(route=>{var cornerradius=5;var arrowwidth=3;var arrowheight=7;var p=cola.GridRouter.getRoutePath(route,cornerradius,arrowwidth,arrowheight);if(arrowheight>0){svg.append('path').attr('class','linkarrowoutline').attr('d',p.arrowpath);svg.append('path').attr('class','linkarrow').attr('d',p.arrowpath);}svg.append('path').attr('class','linkoutline').attr('d',p.routepath).attr('fill','none');svg.append('path').attr('class','link').attr('d',p.routepath).attr('fill','none');});svg.selectAll(".label").transition().attr("x",d=>d.routerNode.bounds.cx()).attr("y",function(d){var h=this.getBBox().height;return d.bounds.cy()+h/3.5;});svg.selectAll(".node").transition().attr("x",d=>d.routerNode.bounds.x).attr("y",d=>d.routerNode.bounds.y).attr("width",d=>d.routerNode.bounds.width()).attr("height",d=>d.routerNode.bounds.height());let groupPadding=margin-groupMargin;svg.selectAll(".group").transition().attr('x',d=>d.routerNode.bounds.x-groupPadding).attr('y',d=>d.routerNode.bounds.y+2*groupPadding).attr('width',d=>d.routerNode.bounds.width()-groupPadding).attr('height',d=>d.routerNode.bounds.height()-groupPadding);}function createPowerGraph(inputjson){var size=[700,700];var svg=makeSVG(false,size[0],size[1]);var grouppadding=0.01;inputjson.nodes.forEach(v=>{v.width=70;v.height=70;});var margin=20;var groupMargin=15;var pgLayout=cola.powerGraphGridLayout(inputjson,size,grouppadding);var group=svg.selectAll(".group").data(pgLayout.powerGraph.groups).enter().append("rect").attr("class","group");var node=svg.selectAll(".node").data(inputjson.nodes).enter().append("rect").attr("class","node");node.append("title").text(d=>d.name);var label=svg.selectAll(".label").data(inputjson.nodes).enter().append("text").attr("class","label").text(d=>d.name.replace(/^u/,''));gridify(svg,pgLayout,margin,groupMargin);let eventStart={},ghosts=null;function getEventPos(){let ev=d3.event;let e=typeof TouchEvent!=='undefined'&&ev.sourceEvent instanceof TouchEvent?(ev.sourceEvent).changedTouches[0]:ev.sourceEvent;return{x:e.clientX,y:e.clientY};}function dragStart(d){ghosts=[1,2].map(i=>svg.append('rect').attr({class:'ghost',x:d.routerNode.bounds.x,y:d.routerNode.bounds.y,width:d.routerNode.bounds.width(),height:d.routerNode.bounds.height()}));eventStart[d.routerNode.id]=getEventPos();}function getDragPos(d){let p=getEventPos(),startPos=eventStart[d.routerNode.id];return{x:d.routerNode.bounds.x+p.x-startPos.x,y:d.routerNode.bounds.y+p.y-startPos.y};}function drag(d){var p=getDragPos(d);ghosts[1].attr(p);}function dragEnd(d){let dropPos=getDragPos(d);delete eventStart[d.routerNode.id];d.x=dropPos.x;d.y=dropPos.y;ghosts.forEach(g=>g.remove());if(Object.keys(eventStart).length===0){gridify(svg,pgLayout,margin,groupMargin);}}let dragListener=d3.behavior.drag().on("dragstart",dragStart).on("drag",drag).on("dragend",dragEnd);node.call(dragListener);label.call(dragListener);}d3.text("graphdata/n26e35.dot",function(f){var digraph=graphlibDot.read(f);var nodeNames=digraph.nodes();var nodes=new Array(nodeNames.length);nodeNames.forEach(function(name,i){var v=nodes[i]=digraph._nodes[nodeNames[i]];v.id=i;v.name=name;});const dedges=(digraph.edges());let edges=[];for(let edge of dedges){edges.push({source:digraph._nodes[edge.v].id,target:digraph._nodes[edge.w].id});}createPowerGraph({nodes:nodes,links:edges});});})(dotpowergraph||(dotpowergraph={}));},{"../index":2,"graphlib-dot":21}],2:[function(require,module,exports){"use strict";function __export(m){for(var p in m)if(!exports.hasOwnProperty(p))exports[p]=m[p];}__export(require("./src/adaptor"));__export(require("./src/d3adaptor"));__export(require("./src/descent"));__export(require("./src/geom"));__export(require("./src/gridrouter"));__export(require("./src/handledisconnected"));__export(require("./src/layout"));__export(require("./src/layout3d"));__export(require("./src/linklengths"));__export(require("./src/powergraph"));__export(require("./src/pqueue"));__export(require("./src/rbtree"));__export(require("./src/rectangle"));__export(require("./src/shortestpaths"));__export(require("./src/vpsc"));__export(require("./src/batch"));},{"./src/adaptor":3,"./src/batch":4,"./src/d3adaptor":5,"./src/descent":8,"./src/geom":9,"./src/gridrouter":10,"./src/handledisconnected":11,"./src/layout":12,"./src/layout3d":13,"./src/linklengths":14,"./src/powergraph":15,"./src/pqueue":16,"./src/rbtree":17,"./src/rectangle":18,"./src/shortestpaths":19,"./src/vpsc":20}],3:[function(require,module,exports){"use strict";const layout_1=require("./layout");class LayoutAdaptor extends layout_1.Layout{trigger(e){};kick(){};drag(){};on(eventType,listener){return this;};constructor(options){super();var self=this;var o=options;if(o.trigger){this.trigger=o.trigger;}if(o.kick){this.kick=o.kick;}if(o.drag){this.drag=o.drag;}if(o.on){this.on=o.on;}this.dragstart=this.dragStart=layout_1.Layout.dragStart;this.dragend=this.dragEnd=layout_1.Layout.dragEnd;}}exports.LayoutAdaptor=LayoutAdaptor;function adaptor(options){return new LayoutAdaptor(options);}exports.adaptor=adaptor;},{"./layout":12}],4:[function(require,module,exports){"use strict";const layout_1=require("./layout");const gridrouter_1=require("./gridrouter");function gridify(pgLayout,nudgeGap,margin,groupMargin){pgLayout.cola.start(0,0,0,10,false);let gridrouter=route(pgLayout.cola.nodes(),pgLayout.cola.groups(),margin,groupMargin);return gridrouter.routeEdges(pgLayout.powerGraph.powerEdges,nudgeGap,e=>e.source.routerNode.id,e=>e.target.routerNode.id);}exports.gridify=gridify;function route(nodes,groups,margin,groupMargin){nodes.forEach(d=>{d.routerNode={name:d.name,bounds:d.bounds.inflate(-margin)};});groups.forEach(d=>{d.routerNode={bounds:d.bounds.inflate(-groupMargin),children:(typeof d.groups!=='undefined'?d.groups.map(c=>nodes.length+c.id):[]).concat(typeof d.leaves!=='undefined'?d.leaves.map(c=>c.index):[])};});let gridRouterNodes=nodes.concat(groups).map((d,i)=>{d.routerNode.id=i;return d.routerNode;});return new gridrouter_1.GridRouter(gridRouterNodes,{getChildren:(v)=>v.children,getBounds:v=>v.bounds},margin-groupMargin);}function powerGraphGridLayout(graph,size,grouppadding){var powerGraph;graph.nodes.forEach((v,i)=>v.index=i);new layout_1.Layout().avoidOverlaps(false).nodes(graph.nodes).links(graph.links).powerGraphGroups(function(d){powerGraph=d;powerGraph.groups.forEach(v=>v.padding=grouppadding);});var n=graph.nodes.length;var edges=[];var vs=graph.nodes.slice(0);vs.forEach((v,i)=>v.index=i);powerGraph.groups.forEach(g=>{var sourceInd=g.index=g.id+n;vs.push(g);if(typeof g.leaves!=='undefined')g.leaves.forEach(v=>edges.push({source:sourceInd,target:v.index}));if(typeof g.groups!=='undefined')g.groups.forEach(gg=>edges.push({source:sourceInd,target:gg.id+n}));});powerGraph.powerEdges.forEach(e=>{edges.push({source:e.source.index,target:e.target.index});});new layout_1.Layout().size(size).nodes(vs).links(edges).avoidOverlaps(false).linkDistance(30).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(100,0,0,0,false);return{cola:new layout_1.Layout().convergenceThreshold(1e-3).size(size).avoidOverlaps(true).nodes(graph.nodes).links(graph.links).groupCompactness(1e-4).linkDistance(30).symmetricDiffLinkLengths(5).powerGraphGroups(function(d){powerGraph=d;powerGraph.groups.forEach(function(v){v.padding=grouppadding;});}).start(50,0,100,0,false),powerGraph:powerGraph};}exports.powerGraphGridLayout=powerGraphGridLayout;},{"./gridrouter":10,"./layout":12}],5:[function(require,module,exports){"use strict";const d3v3=require("./d3v3adaptor");const d3v4=require("./d3v4adaptor");;function d3adaptor(d3Context){if(!d3Context||isD3V3(d3Context)){return new d3v3.D3StyleLayoutAdaptor();}return new d3v4.D3StyleLayoutAdaptor(d3Context);}exports.d3adaptor=d3adaptor;function isD3V3(d3Context){const v3exp=/^3\./;return d3Context.version&&d3Context.version.match(v3exp)!==null;}},{"./d3v3adaptor":6,"./d3v4adaptor":7}],6:[function(require,module,exports){"use strict";const layout_1=require("./layout");class D3StyleLayoutAdaptor extends layout_1.Layout{constructor(){super();this.event=d3.dispatch(layout_1.EventType[layout_1.EventType.start],layout_1.EventType[layout_1.EventType.tick],layout_1.EventType[layout_1.EventType.end]);var d3layout=this;var drag;this.drag=function(){if(!drag){var drag=d3.behavior.drag().origin(layout_1.Layout.dragOrigin).on("dragstart.d3adaptor",layout_1.Layout.dragStart).on("drag.d3adaptor",d=>{layout_1.Layout.drag(d,d3.event);d3layout.resume();}).on("dragend.d3adaptor",layout_1.Layout.dragEnd);}if(!arguments.length)return drag;this.call(drag);};}trigger(e){var d3event={type:layout_1.EventType[e.type],alpha:e.alpha,stress:e.stress};this.event[d3event.type](d3event);}kick(){d3.timer(()=>super.tick());}on(eventType,listener){if(typeof eventType==='string'){this.event.on(eventType,listener);}else{this.event.on(layout_1.EventType[eventType],listener);}return this;}}exports.D3StyleLayoutAdaptor=D3StyleLayoutAdaptor;function d3adaptor(){return new D3StyleLayoutAdaptor();}exports.d3adaptor=d3adaptor;},{"./layout":12}],7:[function(require,module,exports){"use strict";const layout_1=require("./layout");class D3StyleLayoutAdaptor extends layout_1.Layout{constructor(d3Context){super();this.d3Context=d3Context;this.event=d3Context.dispatch(layout_1.EventType[layout_1.EventType.start],layout_1.EventType[layout_1.EventType.tick],layout_1.EventType[layout_1.EventType.end]);var d3layout=this;var drag;this.drag=function(){if(!drag){var drag=d3Context.drag().subject(layout_1.Layout.dragOrigin).on("start.d3adaptor",layout_1.Layout.dragStart).on("drag.d3adaptor",d=>{layout_1.Layout.drag(d,d3Context.event);d3layout.resume();}).on("end.d3adaptor",layout_1.Layout.dragEnd);}if(!arguments.length)return drag;arguments[0].call(drag);};}trigger(e){var d3event={type:layout_1.EventType[e.type],alpha:e.alpha,stress:e.stress};this.event.call(d3event.type,d3event);}kick(){var t=this.d3Context.timer(()=>super.tick()&&t.stop());}on(eventType,listener){if(typeof eventType==='string'){this.event.on(eventType,listener);}else{this.event.on(layout_1.EventType[eventType],listener);}return this;}}exports.D3StyleLayoutAdaptor=D3StyleLayoutAdaptor;},{"./layout":12}],8:[function(require,module,exports){"use strict";class Locks{constructor(){this.locks={};}add(id,x){this.locks[id]=x;}clear(){this.locks={};}isEmpty(){for(var l in this.locks)return false;return true;}apply(f){for(var l in this.locks){f(Number(l),this.locks[l]);}}}exports.Locks=Locks;class Descent{constructor(x,D,G=null){this.D=D;this.G=G;this.threshold=0.0001;this.numGridSnapNodes=0;this.snapGridSize=100;this.snapStrength=1000;this.scaleSnapByMaxH=false;this.random=new PseudoRandom();this.project=null;this.x=x;this.k=x.length;var n=this.n=x[0].length;this.H=new Array(this.k);this.g=new Array(this.k);this.Hd=new Array(this.k);this.a=new Array(this.k);this.b=new Array(this.k);this.c=new Array(this.k);this.d=new Array(this.k);this.e=new Array(this.k);this.ia=new Array(this.k);this.ib=new Array(this.k);this.xtmp=new Array(this.k);this.locks=new Locks();this.minD=Number.MAX_VALUE;var i=n,j;while(i--){j=n;while(--j>i){var d=D[i][j];if(d>0&&d<this.minD){this.minD=d;}}}if(this.minD===Number.MAX_VALUE)this.minD=1;i=this.k;while(i--){this.g[i]=new Array(n);this.H[i]=new Array(n);j=n;while(j--){this.H[i][j]=new Array(n);}this.Hd[i]=new Array(n);this.a[i]=new Array(n);this.b[i]=new Array(n);this.c[i]=new Array(n);this.d[i]=new Array(n);this.e[i]=new Array(n);this.ia[i]=new Array(n);this.ib[i]=new Array(n);this.xtmp[i]=new Array(n);}}static createSquareMatrix(n,f){var M=new Array(n);for(var i=0;i<n;++i){M[i]=new Array(n);for(var j=0;j<n;++j){M[i][j]=f(i,j);}}return M;}offsetDir(){var u=new Array(this.k);var l=0;for(var i=0;i<this.k;++i){var x=u[i]=this.random.getNextBetween(0.01,1)-0.5;l+=x*x;}l=Math.sqrt(l);return u.map(x=>x*=this.minD/l);}computeDerivatives(x){var n=this.n;if(n<1)return;var i;var d=new Array(this.k);var d2=new Array(this.k);var Huu=new Array(this.k);var maxH=0;for(var u=0;u<n;++u){for(i=0;i<this.k;++i)Huu[i]=this.g[i][u]=0;for(var v=0;v<n;++v){if(u===v)continue;var maxDisplaces=n;while(maxDisplaces--){var sd2=0;for(i=0;i<this.k;++i){var dx=d[i]=x[i][u]-x[i][v];sd2+=d2[i]=dx*dx;}if(sd2>1e-9)break;var rd=this.offsetDir();for(i=0;i<this.k;++i)x[i][v]+=rd[i];}var l=Math.sqrt(sd2);var D=this.D[u][v];var weight=this.G!=null?this.G[u][v]:1;if(weight>1&&l>D||!isFinite(D)){for(i=0;i<this.k;++i)this.H[i][u][v]=0;continue;}if(weight>1){weight=1;}var D2=D*D;var gs=2*weight*(l-D)/(D2*l);var l3=l*l*l;var hs=2*-weight/(D2*l3);if(!isFinite(gs))console.log(gs);for(i=0;i<this.k;++i){this.g[i][u]+=d[i]*gs;Huu[i]-=this.H[i][u][v]=hs*(l3+D*(d2[i]-sd2)+l*sd2);}}for(i=0;i<this.k;++i)maxH=Math.max(maxH,this.H[i][u][u]=Huu[i]);}var r=this.snapGridSize/2;var g=this.snapGridSize;var w=this.snapStrength;var k=w/(r*r);var numNodes=this.numGridSnapNodes;for(var u=0;u<numNodes;++u){for(i=0;i<this.k;++i){var xiu=this.x[i][u];var m=xiu/g;var f=m%1;var q=m-f;var a=Math.abs(f);var dx=(a<=0.5)?xiu-q*g:(xiu>0)?xiu-(q+1)*g:xiu-(q-1)*g;if(-r<dx&&dx<=r){if(this.scaleSnapByMaxH){this.g[i][u]+=maxH*k*dx;this.H[i][u][u]+=maxH*k;}else{this.g[i][u]+=k*dx;this.H[i][u][u]+=k;}}}}if(!this.locks.isEmpty()){this.locks.apply((u,p)=>{for(i=0;i<this.k;++i){this.H[i][u][u]+=maxH;this.g[i][u]-=maxH*(p[i]-x[i][u]);}});}}static dotProd(a,b){var x=0,i=a.length;while(i--)x+=a[i]*b[i];return x;}static rightMultiply(m,v,r){var i=m.length;while(i--)r[i]=Descent.dotProd(m[i],v);}computeStepSize(d){var numerator=0,denominator=0;for(var i=0;i<this.k;++i){numerator+=Descent.dotProd(this.g[i],d[i]);Descent.rightMultiply(this.H[i],d[i],this.Hd[i]);denominator+=Descent.dotProd(d[i],this.Hd[i]);}if(denominator===0||!isFinite(denominator))return 0;return 1*numerator/denominator;}reduceStress(){this.computeDerivatives(this.x);var alpha=this.computeStepSize(this.g);for(var i=0;i<this.k;++i){this.takeDescentStep(this.x[i],this.g[i],alpha);}return this.computeStress();}static copy(a,b){var m=a.length,n=b[0].length;for(var i=0;i<m;++i){for(var j=0;j<n;++j){b[i][j]=a[i][j];}}}stepAndProject(x0,r,d,stepSize){Descent.copy(x0,r);this.takeDescentStep(r[0],d[0],stepSize);if(this.project)this.project[0](x0[0],x0[1],r[0]);this.takeDescentStep(r[1],d[1],stepSize);if(this.project)this.project[1](r[0],x0[1],r[1]);for(var i=2;i<this.k;i++)this.takeDescentStep(r[i],d[i],stepSize);}static mApply(m,n,f){var i=m;while(i-->0){var j=n;while(j-->0)f(i,j);}}matrixApply(f){Descent.mApply(this.k,this.n,f);}computeNextPosition(x0,r){this.computeDerivatives(x0);var alpha=this.computeStepSize(this.g);this.stepAndProject(x0,r,this.g,alpha);if(this.project){this.matrixApply((i,j)=>this.e[i][j]=x0[i][j]-r[i][j]);var beta=this.computeStepSize(this.e);beta=Math.max(0.2,Math.min(beta,1));this.stepAndProject(x0,r,this.e,beta);}}run(iterations){var stress=Number.MAX_VALUE,converged=false;while(!converged&&iterations-->0){var s=this.rungeKutta();converged=Math.abs(stress/s-1)<this.threshold;stress=s;}return stress;}rungeKutta(){this.computeNextPosition(this.x,this.a);Descent.mid(this.x,this.a,this.ia);this.computeNextPosition(this.ia,this.b);Descent.mid(this.x,this.b,this.ib);this.computeNextPosition(this.ib,this.c);this.computeNextPosition(this.c,this.d);var disp=0;this.matrixApply((i,j)=>{var x=(this.a[i][j]+2.0*this.b[i][j]+2.0*this.c[i][j]+this.d[i][j])/6.0,d=this.x[i][j]-x;disp+=d*d;this.x[i][j]=x;});return disp;}static mid(a,b,m){Descent.mApply(a.length,a[0].length,(i,j)=>m[i][j]=a[i][j]+(b[i][j]-a[i][j])/2.0);}takeDescentStep(x,d,stepSize){for(var i=0;i<this.n;++i){x[i]=x[i]-stepSize*d[i];}}computeStress(){var stress=0;for(var u=0,nMinus1=this.n-1;u<nMinus1;++u){for(var v=u+1,n=this.n;v<n;++v){var l=0;for(var i=0;i<this.k;++i){var dx=this.x[i][u]-this.x[i][v];l+=dx*dx;}l=Math.sqrt(l);var d=this.D[u][v];if(!isFinite(d))continue;var rl=d-l;var d2=d*d;stress+=rl*rl/d2;}}return stress;}}Descent.zeroDistance=1e-10;exports.Descent=Descent;class PseudoRandom{constructor(seed=1){this.seed=seed;this.a=214013;this.c=2531011;this.m=2147483648;this.range=32767;}getNext(){this.seed=(this.seed*this.a+this.c)%this.m;return(this.seed>>16)/this.range;}getNextBetween(min,max){return min+this.getNext()*(max-min);}}exports.PseudoRandom=PseudoRandom;},{}],9:[function(require,module,exports){"use strict";const rectangle_1=require("./rectangle");class Point{}exports.Point=Point;class LineSegment{constructor(x1,y1,x2,y2){this.x1=x1;this.y1=y1;this.x2=x2;this.y2=y2;}}exports.LineSegment=LineSegment;class PolyPoint extends Point{}exports.PolyPoint=PolyPoint;function isLeft(P0,P1,P2){return(P1.x-P0.x)*(P2.y-P0.y)-(P2.x-P0.x)*(P1.y-P0.y);}exports.isLeft=isLeft;function above(p,vi,vj){return isLeft(p,vi,vj)>0;}function below(p,vi,vj){return isLeft(p,vi,vj)<0;}function ConvexHull(S){var P=S.slice(0).sort((a,b)=>a.x!==b.x?b.x-a.x:b.y-a.y);var n=S.length,i;var minmin=0;var xmin=P[0].x;for(i=1;i<n;++i){if(P[i].x!==xmin)break;}var minmax=i-1;var H=[];H.push(P[minmin]);if(minmax===n-1){if(P[minmax].y!==P[minmin].y)H.push(P[minmax]);}else{var maxmin,maxmax=n-1;var xmax=P[n-1].x;for(i=n-2;i>=0;i--)if(P[i].x!==xmax)break;maxmin=i+1;i=minmax;while(++i<=maxmin){if(isLeft(P[minmin],P[maxmin],P[i])>=0&&i<maxmin)continue;while(H.length>1){if(isLeft(H[H.length-2],H[H.length-1],P[i])>0)break;else
H.length-=1;}if(i!=minmin)H.push(P[i]);}if(maxmax!=maxmin)H.push(P[maxmax]);var bot=H.length;i=maxmin;while(--i>=minmax){if(isLeft(P[maxmax],P[minmax],P[i])>=0&&i>minmax)continue;while(H.length>bot){if(isLeft(H[H.length-2],H[H.length-1],P[i])>0)break;else
H.length-=1;}if(i!=minmin)H.push(P[i]);}}return H;}exports.ConvexHull=ConvexHull;function clockwiseRadialSweep(p,P,f){P.slice(0).sort((a,b)=>Math.atan2(a.y-p.y,a.x-p.x)-Math.atan2(b.y-p.y,b.x-p.x)).forEach(f);}exports.clockwiseRadialSweep=clockwiseRadialSweep;function nextPolyPoint(p,ps){if(p.polyIndex===ps.length-1)return ps[0];return ps[p.polyIndex+1];}function prevPolyPoint(p,ps){if(p.polyIndex===0)return ps[ps.length-1];return ps[p.polyIndex-1];}function tangent_PointPolyC(P,V){return{rtan:Rtangent_PointPolyC(P,V),ltan:Ltangent_PointPolyC(P,V)};}function Rtangent_PointPolyC(P,V){var n=V.length-1;var a,b,c;var upA,dnC;if(below(P,V[1],V[0])&&!above(P,V[n-1],V[0]))return 0;for(a=0,b=n;;){if(b-a===1)if(above(P,V[a],V[b]))return a;else
return b;c=Math.floor((a+b)/2);dnC=below(P,V[c+1],V[c]);if(dnC&&!above(P,V[c-1],V[c]))return c;upA=above(P,V[a+1],V[a]);if(upA){if(dnC)b=c;else{if(above(P,V[a],V[c]))b=c;else
a=c;}}else{if(!dnC)a=c;else{if(below(P,V[a],V[c]))b=c;else
a=c;}}}}function Ltangent_PointPolyC(P,V){var n=V.length-1;var a,b,c;var dnA,dnC;if(above(P,V[n-1],V[0])&&!below(P,V[1],V[0]))return 0;for(a=0,b=n;;){if(b-a===1)if(below(P,V[a],V[b]))return a;else
return b;c=Math.floor((a+b)/2);dnC=below(P,V[c+1],V[c]);if(above(P,V[c-1],V[c])&&!dnC)return c;dnA=below(P,V[a+1],V[a]);if(dnA){if(!dnC)b=c;else{if(below(P,V[a],V[c]))b=c;else
a=c;}}else{if(dnC)a=c;else{if(above(P,V[a],V[c]))b=c;else
a=c;}}}}function tangent_PolyPolyC(V,W,t1,t2,cmp1,cmp2){var ix1,ix2;ix1=t1(W[0],V);ix2=t2(V[ix1],W);var done=false;while(!done){done=true;while(true){if(ix1===V.length-1)ix1=0;if(cmp1(W[ix2],V[ix1],V[ix1+1]))break;++ix1;}while(true){if(ix2===0)ix2=W.length-1;if(cmp2(V[ix1],W[ix2],W[ix2-1]))break;--ix2;done=false;}}return{t1:ix1,t2:ix2};}exports.tangent_PolyPolyC=tangent_PolyPolyC;function LRtangent_PolyPolyC(V,W){var rl=RLtangent_PolyPolyC(W,V);return{t1:rl.t2,t2:rl.t1};}exports.LRtangent_PolyPolyC=LRtangent_PolyPolyC;function RLtangent_PolyPolyC(V,W){return tangent_PolyPolyC(V,W,Rtangent_PointPolyC,Ltangent_PointPolyC,above,below);}exports.RLtangent_PolyPolyC=RLtangent_PolyPolyC;function LLtangent_PolyPolyC(V,W){return tangent_PolyPolyC(V,W,Ltangent_PointPolyC,Ltangent_PointPolyC,below,below);}exports.LLtangent_PolyPolyC=LLtangent_PolyPolyC;function RRtangent_PolyPolyC(V,W){return tangent_PolyPolyC(V,W,Rtangent_PointPolyC,Rtangent_PointPolyC,above,above);}exports.RRtangent_PolyPolyC=RRtangent_PolyPolyC;class BiTangent{constructor(t1,t2){this.t1=t1;this.t2=t2;}}exports.BiTangent=BiTangent;class BiTangents{}exports.BiTangents=BiTangents;class TVGPoint extends Point{}exports.TVGPoint=TVGPoint;class VisibilityVertex{constructor(id,polyid,polyvertid,p){this.id=id;this.polyid=polyid;this.polyvertid=polyvertid;this.p=p;p.vv=this;}}exports.VisibilityVertex=VisibilityVertex;class VisibilityEdge{constructor(source,target){this.source=source;this.target=target;}length(){var dx=this.source.p.x-this.target.p.x;var dy=this.source.p.y-this.target.p.y;return Math.sqrt(dx*dx+dy*dy);}}exports.VisibilityEdge=VisibilityEdge;class TangentVisibilityGraph{constructor(P,g0){this.P=P;this.V=[];this.E=[];if(!g0){var n=P.length;for(var i=0;i<n;i++){var p=P[i];for(var j=0;j<p.length;++j){var pj=p[j],vv=new VisibilityVertex(this.V.length,i,j,pj);this.V.push(vv);if(j>0)this.E.push(new VisibilityEdge(p[j-1].vv,vv));}}for(var i=0;i<n-1;i++){var Pi=P[i];for(var j=i+1;j<n;j++){var Pj=P[j],t=tangents(Pi,Pj);for(var q in t){var c=t[q],source=Pi[c.t1],target=Pj[c.t2];this.addEdgeIfVisible(source,target,i,j);}}}}else{this.V=g0.V.slice(0);this.E=g0.E.slice(0);}}addEdgeIfVisible(u,v,i1,i2){if(!this.intersectsPolys(new LineSegment(u.x,u.y,v.x,v.y),i1,i2)){this.E.push(new VisibilityEdge(u.vv,v.vv));}}addPoint(p,i1){var n=this.P.length;this.V.push(new VisibilityVertex(this.V.length,n,0,p));for(var i=0;i<n;++i){if(i===i1)continue;var poly=this.P[i],t=tangent_PointPolyC(p,poly);this.addEdgeIfVisible(p,poly[t.ltan],i1,i);this.addEdgeIfVisible(p,poly[t.rtan],i1,i);}return p.vv;}intersectsPolys(l,i1,i2){for(var i=0,n=this.P.length;i<n;++i){if(i!=i1&&i!=i2&&intersects(l,this.P[i]).length>0){return true;}}return false;}}exports.TangentVisibilityGraph=TangentVisibilityGraph;function intersects(l,P){var ints=[];for(var i=1,n=P.length;i<n;++i){var int=rectangle_1.Rectangle.lineIntersection(l.x1,l.y1,l.x2,l.y2,P[i-1].x,P[i-1].y,P[i].x,P[i].y);if(int)ints.push(int);}return ints;}function tangents(V,W){var m=V.length-1,n=W.length-1;var bt=new BiTangents();for(var i=0;i<m;++i){for(var j=0;j<n;++j){var v1=V[i==0?m-1:i-1];var v2=V[i];var v3=V[i+1];var w1=W[j==0?n-1:j-1];var w2=W[j];var w3=W[j+1];var v1v2w2=isLeft(v1,v2,w2);var v2w1w2=isLeft(v2,w1,w2);var v2w2w3=isLeft(v2,w2,w3);var w1w2v2=isLeft(w1,w2,v2);var w2v1v2=isLeft(w2,v1,v2);var w2v2v3=isLeft(w2,v2,v3);if(v1v2w2>=0&&v2w1w2>=0&&v2w2w3<0&&w1w2v2>=0&&w2v1v2>=0&&w2v2v3<0){bt.ll=new BiTangent(i,j);}else if(v1v2w2<=0&&v2w1w2<=0&&v2w2w3>0&&w1w2v2<=0&&w2v1v2<=0&&w2v2v3>0){bt.rr=new BiTangent(i,j);}else if(v1v2w2<=0&&v2w1w2>0&&v2w2w3<=0&&w1w2v2>=0&&w2v1v2<0&&w2v2v3>=0){bt.rl=new BiTangent(i,j);}else if(v1v2w2>=0&&v2w1w2<0&&v2w2w3>=0&&w1w2v2<=0&&w2v1v2>0&&w2v2v3<=0){bt.lr=new BiTangent(i,j);}}}return bt;}exports.tangents=tangents;function isPointInsidePoly(p,poly){for(var i=1,n=poly.length;i<n;++i)if(below(poly[i-1],poly[i],p))return false;return true;}function isAnyPInQ(p,q){return!p.every(v=>!isPointInsidePoly(v,q));}function polysOverlap(p,q){if(isAnyPInQ(p,q))return true;if(isAnyPInQ(q,p))return true;for(var i=1,n=p.length;i<n;++i){var v=p[i],u=p[i-1];if(intersects(new LineSegment(u.x,u.y,v.x,v.y),q).length>0)return true;}return false;}exports.polysOverlap=polysOverlap;},{"./rectangle":18}],10:[function(require,module,exports){"use strict";const rectangle_1=require("./rectangle");const vpsc_1=require("./vpsc");const shortestpaths_1=require("./shortestpaths");class NodeWrapper{constructor(id,rect,children){this.id=id;this.rect=rect;this.children=children;this.leaf=typeof children==='undefined'||children.length===0;}}exports.NodeWrapper=NodeWrapper;class Vert{constructor(id,x,y,node=null,line=null){this.id=id;this.x=x;this.y=y;this.node=node;this.line=line;}}exports.Vert=Vert;class LongestCommonSubsequence{constructor(s,t){this.s=s;this.t=t;var mf=LongestCommonSubsequence.findMatch(s,t);var tr=t.slice(0).reverse();var mr=LongestCommonSubsequence.findMatch(s,tr);if(mf.length>=mr.length){this.length=mf.length;this.si=mf.si;this.ti=mf.ti;this.reversed=false;}else{this.length=mr.length;this.si=mr.si;this.ti=t.length-mr.ti-mr.length;this.reversed=true;}}static findMatch(s,t){var m=s.length;var n=t.length;var match={length:0,si:-1,ti:-1};var l=new Array(m);for(var i=0;i<m;i++){l[i]=new Array(n);for(var j=0;j<n;j++)if(s[i]===t[j]){var v=l[i][j]=(i===0||j===0)?1:l[i-1][j-1]+1;if(v>match.length){match.length=v;match.si=i-v+1;match.ti=j-v+1;};}else
l[i][j]=0;}return match;}getSequence(){return this.length>=0?this.s.slice(this.si,this.si+this.length):[];}}exports.LongestCommonSubsequence=LongestCommonSubsequence;class GridRouter{constructor(originalnodes,accessor,groupPadding=12){this.originalnodes=originalnodes;this.groupPadding=groupPadding;this.leaves=null;this.nodes=originalnodes.map((v,i)=>new NodeWrapper(i,accessor.getBounds(v),accessor.getChildren(v)));this.leaves=this.nodes.filter(v=>v.leaf);this.groups=this.nodes.filter(g=>!g.leaf);this.cols=this.getGridLines('x');this.rows=this.getGridLines('y');this.groups.forEach(v=>v.children.forEach(c=>this.nodes[c].parent=v));this.root={children:[]};this.nodes.forEach(v=>{if(typeof v.parent==='undefined'){v.parent=this.root;this.root.children.push(v.id);}v.ports=[];});this.backToFront=this.nodes.slice(0);this.backToFront.sort((x,y)=>this.getDepth(x)-this.getDepth(y));var frontToBackGroups=this.backToFront.slice(0).reverse().filter(g=>!g.leaf);frontToBackGroups.forEach(v=>{var r=rectangle_1.Rectangle.empty();v.children.forEach(c=>r=r.union(this.nodes[c].rect));v.rect=r.inflate(this.groupPadding);});var colMids=this.midPoints(this.cols.map(r=>r.pos));var rowMids=this.midPoints(this.rows.map(r=>r.pos));var rowx=colMids[0],rowX=colMids[colMids.length-1];var coly=rowMids[0],colY=rowMids[rowMids.length-1];var hlines=this.rows.map(r=>({x1:rowx,x2:rowX,y1:r.pos,y2:r.pos})).concat(rowMids.map(m=>({x1:rowx,x2:rowX,y1:m,y2:m})));var vlines=this.cols.map(c=>({x1:c.pos,x2:c.pos,y1:coly,y2:colY})).concat(colMids.map(m=>({x1:m,x2:m,y1:coly,y2:colY})));var lines=hlines.concat(vlines);lines.forEach(l=>l.verts=[]);this.verts=[];this.edges=[];hlines.forEach(h=>vlines.forEach(v=>{var p=new Vert(this.verts.length,v.x1,h.y1);h.verts.push(p);v.verts.push(p);this.verts.push(p);var i=this.backToFront.length;while(i-->0){var node=this.backToFront[i],r=node.rect;var dx=Math.abs(p.x-r.cx()),dy=Math.abs(p.y-r.cy());if(dx<r.width()/2&&dy<r.height()/2){p.node=node;break;}}}));lines.forEach((l,li)=>{this.nodes.forEach((v,i)=>{v.rect.lineIntersections(l.x1,l.y1,l.x2,l.y2).forEach((intersect,j)=>{var p=new Vert(this.verts.length,intersect.x,intersect.y,v,l);this.verts.push(p);l.verts.push(p);v.ports.push(p);});});var isHoriz=Math.abs(l.y1-l.y2)<0.1;var delta=(a,b)=>isHoriz?b.x-a.x:b.y-a.y;l.verts.sort(delta);for(var i=1;i<l.verts.length;i++){var u=l.verts[i-1],v=l.verts[i];if(u.node&&u.node===v.node&&u.node.leaf)continue;this.edges.push({source:u.id,target:v.id,length:Math.abs(delta(u,v))});}});}avg(a){return a.reduce((x,y)=>x+y)/a.length;}getGridLines(axis){var columns=[];var ls=this.leaves.slice(0,this.leaves.length);while(ls.length>0){let overlapping=ls.filter(v=>v.rect['overlap'+axis.toUpperCase()](ls[0].rect));let col={nodes:overlapping,pos:this.avg(overlapping.map(v=>v.rect['c'+axis]()))};columns.push(col);col.nodes.forEach(v=>ls.splice(ls.indexOf(v),1));}columns.sort((a,b)=>a.pos-b.pos);return columns;}getDepth(v){var depth=0;while(v.parent!==this.root){depth++;v=v.parent;}return depth;}midPoints(a){var gap=a[1]-a[0];var mids=[a[0]-gap/2];for(var i=1;i<a.length;i++){mids.push((a[i]+a[i-1])/2);}mids.push(a[a.length-1]+gap/2);return mids;}findLineage(v){var lineage=[v];do{v=v.parent;lineage.push(v);}while(v!==this.root);return lineage.reverse();}findAncestorPathBetween(a,b){var aa=this.findLineage(a),ba=this.findLineage(b),i=0;while(aa[i]===ba[i])i++;return{commonAncestor:aa[i-1],lineages:aa.slice(i).concat(ba.slice(i))};}siblingObstacles(a,b){var path=this.findAncestorPathBetween(a,b);var lineageLookup={};path.lineages.forEach(v=>lineageLookup[v.id]={});var obstacles=path.commonAncestor.children.filter(v=>!(v in lineageLookup));path.lineages.filter(v=>v.parent!==path.commonAncestor).forEach(v=>obstacles=obstacles.concat(v.parent.children.filter(c=>c!==v.id)));return obstacles.map(v=>this.nodes[v]);}static getSegmentSets(routes,x,y){var vsegments=[];for(var ei=0;ei<routes.length;ei++){var route=routes[ei];for(var si=0;si<route.length;si++){var s=route[si];s.edgeid=ei;s.i=si;var sdx=s[1][x]-s[0][x];if(Math.abs(sdx)<0.1){vsegments.push(s);}}}vsegments.sort((a,b)=>a[0][x]-b[0][x]);var vsegmentsets=[];var segmentset=null;for(var i=0;i<vsegments.length;i++){var s=vsegments[i];if(!segmentset||Math.abs(s[0][x]-segmentset.pos)>0.1){segmentset={pos:s[0][x],segments:[]};vsegmentsets.push(segmentset);}segmentset.segments.push(s);}return vsegmentsets;}static nudgeSegs(x,y,routes,segments,leftOf,gap){var n=segments.length;if(n<=1)return;var vs=segments.map(s=>new vpsc_1.Variable(s[0][x]));var cs=[];for(var i=0;i<n;i++){for(var j=0;j<n;j++){if(i===j)continue;var s1=segments[i],s2=segments[j],e1=s1.edgeid,e2=s2.edgeid,lind=-1,rind=-1;if(x=='x'){if(leftOf(e1,e2)){if(s1[0][y]<s1[1][y]){lind=j,rind=i;}else{lind=i,rind=j;}}}else{if(leftOf(e1,e2)){if(s1[0][y]<s1[1][y]){lind=i,rind=j;}else{lind=j,rind=i;}}}if(lind>=0){cs.push(new vpsc_1.Constraint(vs[lind],vs[rind],gap));}}}var solver=new vpsc_1.Solver(vs,cs);solver.solve();vs.forEach((v,i)=>{var s=segments[i];var pos=v.position();s[0][x]=s[1][x]=pos;var route=routes[s.edgeid];if(s.i>0)route[s.i-1][1][x]=pos;if(s.i<route.length-1)route[s.i+1][0][x]=pos;});}static nudgeSegments(routes,x,y,leftOf,gap){var vsegmentsets=GridRouter.getSegmentSets(routes,x,y);for(var i=0;i<vsegmentsets.length;i++){var ss=vsegmentsets[i];var events=[];for(var j=0;j<ss.segments.length;j++){var s=ss.segments[j];events.push({type:0,s:s,pos:Math.min(s[0][y],s[1][y])});events.push({type:1,s:s,pos:Math.max(s[0][y],s[1][y])});}events.sort((a,b)=>a.pos-b.pos+a.type-b.type);var open=[];var openCount=0;events.forEach(e=>{if(e.type===0){open.push(e.s);openCount++;}else{openCount--;}if(openCount==0){GridRouter.nudgeSegs(x,y,routes,open,leftOf,gap);open=[];}});}}routeEdges(edges,nudgeGap,source,target){var routePaths=edges.map(e=>this.route(source(e),target(e)));var order=GridRouter.orderEdges(routePaths);var routes=routePaths.map(function(e){return GridRouter.makeSegments(e);});GridRouter.nudgeSegments(routes,'x','y',order,nudgeGap);GridRouter.nudgeSegments(routes,'y','x',order,nudgeGap);GridRouter.unreverseEdges(routes,routePaths);return routes;}static unreverseEdges(routes,routePaths){routes.forEach((segments,i)=>{var path=routePaths[i];if(path.reversed){segments.reverse();segments.forEach(function(segment){segment.reverse();});}});}static angleBetween2Lines(line1,line2){var angle1=Math.atan2(line1[0].y-line1[1].y,line1[0].x-line1[1].x);var angle2=Math.atan2(line2[0].y-line2[1].y,line2[0].x-line2[1].x);var diff=angle1-angle2;if(diff>Math.PI||diff<-Math.PI){diff=angle2-angle1;}return diff;}static isLeft(a,b,c){return((b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x))<=0;}static getOrder(pairs){var outgoing={};for(var i=0;i<pairs.length;i++){var p=pairs[i];if(typeof outgoing[p.l]==='undefined')outgoing[p.l]={};outgoing[p.l][p.r]=true;}return(l,r)=>typeof outgoing[l]!=='undefined'&&outgoing[l][r];}static orderEdges(edges){var edgeOrder=[];for(var i=0;i<edges.length-1;i++){for(var j=i+1;j<edges.length;j++){var e=edges[i],f=edges[j],lcs=new LongestCommonSubsequence(e,f);var u,vi,vj;if(lcs.length===0)continue;if(lcs.reversed){f.reverse();f.reversed=true;lcs=new LongestCommonSubsequence(e,f);}if((lcs.si<=0||lcs.ti<=0)&&(lcs.si+lcs.length>=e.length||lcs.ti+lcs.length>=f.length)){edgeOrder.push({l:i,r:j});continue;}if(lcs.si+lcs.length>=e.length||lcs.ti+lcs.length>=f.length){u=e[lcs.si+1];vj=e[lcs.si-1];vi=f[lcs.ti-1];}else{u=e[lcs.si+lcs.length-2];vi=e[lcs.si+lcs.length];vj=f[lcs.ti+lcs.length];}if(GridRouter.isLeft(u,vi,vj)){edgeOrder.push({l:j,r:i});}else{edgeOrder.push({l:i,r:j});}}}return GridRouter.getOrder(edgeOrder);}static makeSegments(path){function copyPoint(p){return{x:p.x,y:p.y};}var isStraight=(a,b,c)=>Math.abs((b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x))<0.001;var segments=[];var a=copyPoint(path[0]);for(var i=1;i<path.length;i++){var b=copyPoint(path[i]),c=i<path.length-1?path[i+1]:null;if(!c||!isStraight(a,b,c)){segments.push([a,b]);a=b;}}return segments;}route(s,t){var source=this.nodes[s],target=this.nodes[t];this.obstacles=this.siblingObstacles(source,target);var obstacleLookup={};this.obstacles.forEach(o=>obstacleLookup[o.id]=o);this.passableEdges=this.edges.filter(e=>{var u=this.verts[e.source],v=this.verts[e.target];return!(u.node&&u.node.id in obstacleLookup||v.node&&v.node.id in obstacleLookup);});for(var i=1;i<source.ports.length;i++){var u=source.ports[0].id;var v=source.ports[i].id;this.passableEdges.push({source:u,target:v,length:0});}for(var i=1;i<target.ports.length;i++){var u=target.ports[0].id;var v=target.ports[i].id;this.passableEdges.push({source:u,target:v,length:0});}var getSource=e=>e.source,getTarget=e=>e.target,getLength=e=>e.length;var shortestPathCalculator=new shortestpaths_1.Calculator(this.verts.length,this.passableEdges,getSource,getTarget,getLength);var bendPenalty=(u,v,w)=>{var a=this.verts[u],b=this.verts[v],c=this.verts[w];var dx=Math.abs(c.x-a.x),dy=Math.abs(c.y-a.y);if(a.node===source&&a.node===b.node||b.node===target&&b.node===c.node)return 0;return dx>1&&dy>1?1000:0;};var shortestPath=shortestPathCalculator.PathFromNodeToNodeWithPrevCost(source.ports[0].id,target.ports[0].id,bendPenalty);var pathPoints=shortestPath.reverse().map(vi=>this.verts[vi]);pathPoints.push(this.nodes[target.id].ports[0]);return pathPoints.filter((v,i)=>!(i<pathPoints.length-1&&pathPoints[i+1].node===source&&v.node===source||i>0&&v.node===target&&pathPoints[i-1].node===target));}static getRoutePath(route,cornerradius,arrowwidth,arrowheight){var result={routepath:'M '+route[0][0].x+' '+route[0][0].y+' ',arrowpath:''};if(route.length>1){for(var i=0;i<route.length;i++){var li=route[i];var x=li[1].x,y=li[1].y;var dx=x-li[0].x;var dy=y-li[0].y;if(i<route.length-1){if(Math.abs(dx)>0){x-=dx/Math.abs(dx)*cornerradius;}else{y-=dy/Math.abs(dy)*cornerradius;}result.routepath+='L '+x+' '+y+' ';var l=route[i+1];var x0=l[0].x,y0=l[0].y;var x1=l[1].x;var y1=l[1].y;dx=x1-x0;dy=y1-y0;var angle=GridRouter.angleBetween2Lines(li,l)<0?1:0;var x2,y2;if(Math.abs(dx)>0){x2=x0+dx/Math.abs(dx)*cornerradius;y2=y0;}else{x2=x0;y2=y0+dy/Math.abs(dy)*cornerradius;}var cx=Math.abs(x2-x);var cy=Math.abs(y2-y);result.routepath+='A '+cx+' '+cy+' 0 0 '+angle+' '+x2+' '+y2+' ';}else{var arrowtip=[x,y];var arrowcorner1,arrowcorner2;if(Math.abs(dx)>0){x-=dx/Math.abs(dx)*arrowheight;arrowcorner1=[x,y+arrowwidth];arrowcorner2=[x,y-arrowwidth];}else{y-=dy/Math.abs(dy)*arrowheight;arrowcorner1=[x+arrowwidth,y];arrowcorner2=[x-arrowwidth,y];}result.routepath+='L '+x+' '+y+' ';if(arrowheight>0){result.arrowpath='M '+arrowtip[0]+' '+arrowtip[1]+' L '+arrowcorner1[0]+' '+arrowcorner1[1]+' L '+arrowcorner2[0]+' '+arrowcorner2[1];}}}}else{var li=route[0];var x=li[1].x,y=li[1].y;var dx=x-li[0].x;var dy=y-li[0].y;var arrowtip=[x,y];var arrowcorner1,arrowcorner2;if(Math.abs(dx)>0){x-=dx/Math.abs(dx)*arrowheight;arrowcorner1=[x,y+arrowwidth];arrowcorner2=[x,y-arrowwidth];}else{y-=dy/Math.abs(dy)*arrowheight;arrowcorner1=[x+arrowwidth,y];arrowcorner2=[x-arrowwidth,y];}result.routepath+='L '+x+' '+y+' ';if(arrowheight>0){result.arrowpath='M '+arrowtip[0]+' '+arrowtip[1]+' L '+arrowcorner1[0]+' '+arrowcorner1[1]+' L '+arrowcorner2[0]+' '+arrowcorner2[1];}}return result;}}exports.GridRouter=GridRouter;},{"./rectangle":18,"./shortestpaths":19,"./vpsc":20}],11:[function(require,module,exports){"use strict";var packingOptions={PADDING:10,GOLDEN_SECTION:(1+Math.sqrt(5))/2,FLOAT_EPSILON:0.0001,MAX_INERATIONS:100};function applyPacking(graphs,w,h,node_size,desired_ratio=1){var init_x=0,init_y=0,svg_width=w,svg_height=h,desired_ratio=typeof desired_ratio!=='undefined'?desired_ratio:1,node_size=typeof node_size!=='undefined'?node_size:0,real_width=0,real_height=0,min_width=0,global_bottom=0,line=[];if(graphs.length==0)return;calculate_bb(graphs);apply(graphs,desired_ratio);put_nodes_to_right_positions(graphs);function calculate_bb(graphs){graphs.forEach(function(g){calculate_single_bb(g);});function calculate_single_bb(graph){var min_x=Number.MAX_VALUE,min_y=Number.MAX_VALUE,max_x=0,max_y=0;graph.array.forEach(function(v){var w=typeof v.width!=='undefined'?v.width:node_size;var h=typeof v.height!=='undefined'?v.height:node_size;w/=2;h/=2;max_x=Math.max(v.x+w,max_x);min_x=Math.min(v.x-w,min_x);max_y=Math.max(v.y+h,max_y);min_y=Math.min(v.y-h,min_y);});graph.width=max_x-min_x;graph.height=max_y-min_y;}}function put_nodes_to_right_positions(graphs){graphs.forEach(function(g){var center={x:0,y:0};g.array.forEach(function(node){center.x+=node.x;center.y+=node.y;});center.x/=g.array.length;center.y/=g.array.length;var corner={x:center.x-g.width/2,y:center.y-g.height/2};var offset={x:g.x-corner.x+svg_width/2-real_width/2,y:g.y-corner.y+svg_height/2-real_height/2};g.array.forEach(function(node){node.x+=offset.x;node.y+=offset.y;});});}function apply(data,desired_ratio){var curr_best_f=Number.POSITIVE_INFINITY;var curr_best=0;data.sort(function(a,b){return b.height-a.height;});min_width=data.reduce(function(a,b){return a.width<b.width?a.width:b.width;});var left=x1=min_width;var right=x2=get_entire_width(data);var iterationCounter=0;var f_x1=Number.MAX_VALUE;var f_x2=Number.MAX_VALUE;var flag=-1;var dx=Number.MAX_VALUE;var df=Number.MAX_VALUE;while((dx>min_width)||df>packingOptions.FLOAT_EPSILON){if(flag!=1){var x1=right-(right-left)/packingOptions.GOLDEN_SECTION;var f_x1=step(data,x1);}if(flag!=0){var x2=left+(right-left)/packingOptions.GOLDEN_SECTION;var f_x2=step(data,x2);}dx=Math.abs(x1-x2);df=Math.abs(f_x1-f_x2);if(f_x1<curr_best_f){curr_best_f=f_x1;curr_best=x1;}if(f_x2<curr_best_f){curr_best_f=f_x2;curr_best=x2;}if(f_x1>f_x2){left=x1;x1=x2;f_x1=f_x2;flag=1;}else{right=x2;x2=x1;f_x2=f_x1;flag=0;}if(iterationCounter++>100){break;}}step(data,curr_best);}function step(data,max_width){line=[];real_width=0;real_height=0;global_bottom=init_y;for(var i=0;i<data.length;i++){var o=data[i];put_rect(o,max_width);}return Math.abs(get_real_ratio()-desired_ratio);}function put_rect(rect,max_width){var parent=undefined;for(var i=0;i<line.length;i++){if((line[i].space_left>=rect.height)&&(line[i].x+line[i].width+rect.width+packingOptions.PADDING-max_width)<=packingOptions.FLOAT_EPSILON){parent=line[i];break;}}line.push(rect);if(parent!==undefined){rect.x=parent.x+parent.width+packingOptions.PADDING;rect.y=parent.bottom;rect.space_left=rect.height;rect.bottom=rect.y;parent.space_left-=rect.height+packingOptions.PADDING;parent.bottom+=rect.height+packingOptions.PADDING;}else{rect.y=global_bottom;global_bottom+=rect.height+packingOptions.PADDING;rect.x=init_x;rect.bottom=rect.y;rect.space_left=rect.height;}if(rect.y+rect.height-real_height>-packingOptions.FLOAT_EPSILON)real_height=rect.y+rect.height-init_y;if(rect.x+rect.width-real_width>-packingOptions.FLOAT_EPSILON)real_width=rect.x+rect.width-init_x;};function get_entire_width(data){var width=0;data.forEach(function(d){return width+=d.width+packingOptions.PADDING;});return width;}function get_real_ratio(){return(real_width/real_height);}}exports.applyPacking=applyPacking;function separateGraphs(nodes,links){var marks={};var ways={};var graphs=[];var clusters=0;for(var i=0;i<links.length;i++){var link=links[i];var n1=link.source;var n2=link.target;if(ways[n1.index])ways[n1.index].push(n2);else
ways[n1.index]=[n2];if(ways[n2.index])ways[n2.index].push(n1);else
ways[n2.index]=[n1];}for(var i=0;i<nodes.length;i++){var node=nodes[i];if(marks[node.index])continue;explore_node(node,true);}function explore_node(n,is_new){if(marks[n.index]!==undefined)return;if(is_new){clusters++;graphs.push({array:[]});}marks[n.index]=clusters;graphs[clusters-1].array.push(n);var adjacent=ways[n.index];if(!adjacent)return;for(var j=0;j<adjacent.length;j++){explore_node(adjacent[j],false);}}return graphs;}exports.separateGraphs=separateGraphs;},{}],12:[function(require,module,exports){"use strict";const powergraph=require("./powergraph");const linklengths_1=require("./linklengths");const descent_1=require("./descent");const rectangle_1=require("./rectangle");const shortestpaths_1=require("./shortestpaths");const geom_1=require("./geom");const handledisconnected_1=require("./handledisconnected");var EventType;(function(EventType){EventType[EventType["start"]=0]="start";EventType[EventType["tick"]=1]="tick";EventType[EventType["end"]=2]="end";})(EventType=exports.EventType||(exports.EventType={}));;function isGroup(g){return typeof g.leaves!=='undefined'||typeof g.groups!=='undefined';}class Layout{constructor(){this._canvasSize=[1,1];this._linkDistance=20;this._defaultNodeSize=10;this._linkLengthCalculator=null;this._linkType=null;this._avoidOverlaps=false;this._handleDisconnected=true;this._running=false;this._nodes=[];this._groups=[];this._rootGroup=null;this._links=[];this._constraints=[];this._distanceMatrix=null;this._descent=null;this._directedLinkConstraints=null;this._threshold=0.01;this._visibilityGraph=null;this._groupCompactness=1e-6;this.event=null;this.linkAccessor={getSourceIndex:Layout.getSourceIndex,getTargetIndex:Layout.getTargetIndex,setLength:Layout.setLinkLength,getType:l=>typeof this._linkType==="function"?this._linkType(l):0};}on(e,listener){if(!this.event)this.event={};if(typeof e==='string'){this.event[EventType[e]]=listener;}else{this.event[e]=listener;}return this;}trigger(e){if(this.event&&typeof this.event[e.type]!=='undefined'){this.event[e.type](e);}}kick(){while(!this.tick());}tick(){if(this._alpha<this._threshold){this._running=false;this.trigger({type:EventType.end,alpha:this._alpha=0,stress:this._lastStress});return true;}const n=this._nodes.length,m=this._links.length;let o,i;this._descent.locks.clear();for(i=0;i<n;++i){o=this._nodes[i];if(o.fixed){if(typeof o.px==='undefined'||typeof o.py==='undefined'){o.px=o.x;o.py=o.y;}var p=[o.px,o.py];this._descent.locks.add(i,p);}}let s1=this._descent.rungeKutta();if(s1===0){this._alpha=0;}else if(typeof this._lastStress!=='undefined'){this._alpha=s1;}this._lastStress=s1;this.updateNodePositions();this.trigger({type:EventType.tick,alpha:this._alpha,stress:this._lastStress});return false;}updateNodePositions(){const x=this._descent.x[0],y=this._descent.x[1];let o,i=this._nodes.length;while(i--){o=this._nodes[i];o.x=x[i];o.y=y[i];}}nodes(v){if(!v){if(this._nodes.length===0&&this._links.length>0){var n=0;this._links.forEach(function(l){n=Math.max(n,l.source,l.target);});this._nodes=new Array(++n);for(var i=0;i<n;++i){this._nodes[i]={};}}return this._nodes;}this._nodes=v;return this;}groups(x){if(!x)return this._groups;this._groups=x;this._rootGroup={};this._groups.forEach(g=>{if(typeof g.padding==="undefined")g.padding=1;if(typeof g.leaves!=="undefined"){g.leaves.forEach((v,i)=>{if(typeof v==='number')(g.leaves[i]=this._nodes[v]).parent=g;});}if(typeof g.groups!=="undefined"){g.groups.forEach((gi,i)=>{if(typeof gi==='number')(g.groups[i]=this._groups[gi]).parent=g;});}});this._rootGroup.leaves=this._nodes.filter(v=>typeof v.parent==='undefined');this._rootGroup.groups=this._groups.filter(g=>typeof g.parent==='undefined');return this;}powerGraphGroups(f){var g=powergraph.getGroups(this._nodes,this._links,this.linkAccessor,this._rootGroup);this.groups(g.groups);f(g);return this;}avoidOverlaps(v){if(!arguments.length)return this._avoidOverlaps;this._avoidOverlaps=v;return this;}handleDisconnected(v){if(!arguments.length)return this._handleDisconnected;this._handleDisconnected=v;return this;}flowLayout(axis,minSeparation){if(!arguments.length)axis='y';this._directedLinkConstraints={axis:axis,getMinSeparation:typeof minSeparation==='number'?function(){return minSeparation;}:minSeparation};return this;}links(x){if(!arguments.length)return this._links;this._links=x;return this;}constraints(c){if(!arguments.length)return this._constraints;this._constraints=c;return this;}distanceMatrix(d){if(!arguments.length)return this._distanceMatrix;this._distanceMatrix=d;return this;}size(x){if(!x)return this._canvasSize;this._canvasSize=x;return this;}defaultNodeSize(x){if(!x)return this._defaultNodeSize;this._defaultNodeSize=x;return this;}groupCompactness(x){if(!x)return this._groupCompactness;this._groupCompactness=x;return this;}linkDistance(x){if(!x){return this._linkDistance;}this._linkDistance=typeof x==="function"?x:+x;this._linkLengthCalculator=null;return this;}linkType(f){this._linkType=f;return this;}convergenceThreshold(x){if(!x)return this._threshold;this._threshold=typeof x==="function"?x:+x;return this;}alpha(x){if(!arguments.length)return this._alpha;else{x=+x;if(this._alpha){if(x>0)this._alpha=x;else
this._alpha=0;}else if(x>0){if(!this._running){this._running=true;this.trigger({type:EventType.start,alpha:this._alpha=x});this.kick();}}return this;}}getLinkLength(link){return typeof this._linkDistance==="function"?+(this._linkDistance(link)):this._linkDistance;}static setLinkLength(link,length){link.length=length;}getLinkType(link){return typeof this._linkType==="function"?this._linkType(link):0;}symmetricDiffLinkLengths(idealLength,w=1){this.linkDistance(l=>idealLength*l.length);this._linkLengthCalculator=()=>linklengths_1.symmetricDiffLinkLengths(this._links,this.linkAccessor,w);return this;}jaccardLinkLengths(idealLength,w=1){this.linkDistance(l=>idealLength*l.length);this._linkLengthCalculator=()=>linklengths_1.jaccardLinkLengths(this._links,this.linkAccessor,w);return this;}start(initialUnconstrainedIterations=0,initialUserConstraintIterations=0,initialAllConstraintsIterations=0,gridSnapIterations=0,keepRunning=true){var i,j,n=this.nodes().length,N=n+2*this._groups.length,m=this._links.length,w=this._canvasSize[0],h=this._canvasSize[1];var x=new Array(N),y=new Array(N);var G=null;var ao=this._avoidOverlaps;this._nodes.forEach((v,i)=>{v.index=i;if(typeof v.x==='undefined'){v.x=w/2,v.y=h/2;}x[i]=v.x,y[i]=v.y;});if(this._linkLengthCalculator)this._linkLengthCalculator();var distances;if(this._distanceMatrix){distances=this._distanceMatrix;}else{distances=(new shortestpaths_1.Calculator(N,this._links,Layout.getSourceIndex,Layout.getTargetIndex,l=>this.getLinkLength(l))).DistanceMatrix();G=descent_1.Descent.createSquareMatrix(N,()=>2);this._links.forEach(l=>{if(typeof l.source=="number")l.source=this._nodes[l.source];if(typeof l.target=="number")l.target=this._nodes[l.target];});this._links.forEach(e=>{const u=Layout.getSourceIndex(e),v=Layout.getTargetIndex(e);G[u][v]=G[v][u]=e.weight||1;});}var D=descent_1.Descent.createSquareMatrix(N,function(i,j){return distances[i][j];});if(this._rootGroup&&typeof this._rootGroup.groups!=='undefined'){var i=n;var addAttraction=(i,j,strength,idealDistance)=>{G[i][j]=G[j][i]=strength;D[i][j]=D[j][i]=idealDistance;};this._groups.forEach(g=>{addAttraction(i,i+1,this._groupCompactness,0.1);x[i]=0,y[i++]=0;x[i]=0,y[i++]=0;});}else
this._rootGroup={leaves:this._nodes,groups:[]};var curConstraints=this._constraints||[];if(this._directedLinkConstraints){this.linkAccessor.getMinSeparation=this._directedLinkConstraints.getMinSeparation;curConstraints=curConstraints.concat(linklengths_1.generateDirectedEdgeConstraints(n,this._links,this._directedLinkConstraints.axis,(this.linkAccessor)));}this.avoidOverlaps(false);this._descent=new descent_1.Descent([x,y],D);this._descent.locks.clear();for(var i=0;i<n;++i){var o=this._nodes[i];if(o.fixed){o.px=o.x;o.py=o.y;var p=[o.x,o.y];this._descent.locks.add(i,p);}}this._descent.threshold=this._threshold;this.initialLayout(initialUnconstrainedIterations,x,y);if(curConstraints.length>0)this._descent.project=new rectangle_1.Projection(this._nodes,this._groups,this._rootGroup,curConstraints).projectFunctions();this._descent.run(initialUserConstraintIterations);this.separateOverlappingComponents(w,h);this.avoidOverlaps(ao);if(ao){this._nodes.forEach(function(v,i){v.x=x[i],v.y=y[i];});this._descent.project=new rectangle_1.Projection(this._nodes,this._groups,this._rootGroup,curConstraints,true).projectFunctions();this._nodes.forEach(function(v,i){x[i]=v.x,y[i]=v.y;});}this._descent.G=G;this._descent.run(initialAllConstraintsIterations);if(gridSnapIterations){this._descent.snapStrength=1000;this._descent.snapGridSize=this._nodes[0].width;this._descent.numGridSnapNodes=n;this._descent.scaleSnapByMaxH=n!=N;var G0=descent_1.Descent.createSquareMatrix(N,(i,j)=>{if(i>=n||j>=n)return G[i][j];return 0;});this._descent.G=G0;this._descent.run(gridSnapIterations);}this.updateNodePositions();this.separateOverlappingComponents(w,h);return keepRunning?this.resume():this;}initialLayout(iterations,x,y){if(this._groups.length>0&&iterations>0){var n=this._nodes.length;var edges=this._links.map(e=>({source:e.source.index,target:e.target.index}));var vs=this._nodes.map(v=>({index:v.index}));this._groups.forEach((g,i)=>{vs.push({index:g.index=n+i});});this._groups.forEach((g,i)=>{if(typeof g.leaves!=='undefined')g.leaves.forEach(v=>edges.push({source:g.index,target:v.index}));if(typeof g.groups!=='undefined')g.groups.forEach(gg=>edges.push({source:g.index,target:gg.index}));});new Layout().size(this.size()).nodes(vs).links(edges).avoidOverlaps(false).linkDistance(this.linkDistance()).symmetricDiffLinkLengths(5).convergenceThreshold(1e-4).start(iterations,0,0,0,false);this._nodes.forEach(v=>{x[v.index]=vs[v.index].x;y[v.index]=vs[v.index].y;});}else{this._descent.run(iterations);}}separateOverlappingComponents(width,height){if(!this._distanceMatrix&&this._handleDisconnected){let x=this._descent.x[0],y=this._descent.x[1];this._nodes.forEach(function(v,i){v.x=x[i],v.y=y[i];});var graphs=handledisconnected_1.separateGraphs(this._nodes,this._links);handledisconnected_1.applyPacking(graphs,width,height,this._defaultNodeSize);this._nodes.forEach((v,i)=>{this._descent.x[0][i]=v.x,this._descent.x[1][i]=v.y;if(v.bounds){v.bounds.setXCentre(v.x);v.bounds.setYCentre(v.y);}});}}resume(){return this.alpha(0.1);}stop(){return this.alpha(0);}prepareEdgeRouting(nodeMargin=0){this._visibilityGraph=new geom_1.TangentVisibilityGraph(this._nodes.map(function(v){return v.bounds.inflate(-nodeMargin).vertices();}));}routeEdge(edge,draw){var lineData=[];var vg2=new geom_1.TangentVisibilityGraph(this._visibilityGraph.P,{V:this._visibilityGraph.V,E:this._visibilityGraph.E}),port1={x:edge.source.x,y:edge.source.y},port2={x:edge.target.x,y:edge.target.y},start=vg2.addPoint(port1,edge.source.index),end=vg2.addPoint(port2,edge.target.index);vg2.addEdgeIfVisible(port1,port2,edge.source.index,edge.target.index);if(typeof draw!=='undefined'){draw(vg2);}var sourceInd=e=>e.source.id,targetInd=e=>e.target.id,length=e=>e.length(),spCalc=new shortestpaths_1.Calculator(vg2.V.length,vg2.E,sourceInd,targetInd,length),shortestPath=spCalc.PathFromNodeToNode(start.id,end.id);if(shortestPath.length===1||shortestPath.length===vg2.V.length){let route=rectangle_1.makeEdgeBetween(edge.source.innerBounds,edge.target.innerBounds,5);lineData=[route.sourceIntersection,route.arrowStart];}else{var n=shortestPath.length-2,p=vg2.V[shortestPath[n]].p,q=vg2.V[shortestPath[0]].p,lineData=[edge.source.innerBounds.rayIntersection(p.x,p.y)];for(var i=n;i>=0;--i)lineData.push(vg2.V[shortestPath[i]].p);lineData.push(rectangle_1.makeEdgeTo(q,edge.target.innerBounds,5));}return lineData;}static getSourceIndex(e){return typeof e.source==='number'?e.source:e.source.index;}static getTargetIndex(e){return typeof e.target==='number'?e.target:e.target.index;}static linkId(e){return Layout.getSourceIndex(e)+"-"+Layout.getTargetIndex(e);}static dragStart(d){if(isGroup(d)){Layout.storeOffset(d,Layout.dragOrigin(d));}else{Layout.stopNode(d);d.fixed|=2;}}static stopNode(v){v.px=v.x;v.py=v.y;}static storeOffset(d,origin){if(typeof d.leaves!=='undefined'){d.leaves.forEach(v=>{v.fixed|=2;Layout.stopNode(v);v._dragGroupOffsetX=v.x-origin.x;v._dragGroupOffsetY=v.y-origin.y;});}if(typeof d.groups!=='undefined'){d.groups.forEach(g=>Layout.storeOffset(g,origin));}}static dragOrigin(d){if(isGroup(d)){return{x:d.bounds.cx(),y:d.bounds.cy()};}else{return d;}}static drag(d,position){if(isGroup(d)){if(typeof d.leaves!=='undefined'){d.leaves.forEach(v=>{d.bounds.setXCentre(position.x);d.bounds.setYCentre(position.y);v.px=v._dragGroupOffsetX+position.x;v.py=v._dragGroupOffsetY+position.y;});}if(typeof d.groups!=='undefined'){d.groups.forEach(g=>Layout.drag(g,position));}}else{d.px=position.x;d.py=position.y;}}static dragEnd(d){if(isGroup(d)){if(typeof d.leaves!=='undefined'){d.leaves.forEach(v=>{Layout.dragEnd(v);delete v._dragGroupOffsetX;delete v._dragGroupOffsetY;});}if(typeof d.groups!=='undefined'){d.groups.forEach(Layout.dragEnd);}}else{d.fixed&=~6;}}static mouseOver(d){d.fixed|=4;d.px=d.x,d.py=d.y;}static mouseOut(d){d.fixed&=~4;}}exports.Layout=Layout;},{"./descent":8,"./geom":9,"./handledisconnected":11,"./linklengths":14,"./powergraph":15,"./rectangle":18,"./shortestpaths":19}],13:[function(require,module,exports){"use strict";const shortestpaths_1=require("./shortestpaths");const descent_1=require("./descent");const rectangle_1=require("./rectangle");const linklengths_1=require("./linklengths");class Link3D{constructor(source,target){this.source=source;this.target=target;}actualLength(x){return Math.sqrt(x.reduce((c,v)=>{const dx=v[this.target]-v[this.source];return c+dx*dx;},0));}}exports.Link3D=Link3D;class Node3D{constructor(x=0,y=0,z=0){this.x=x;this.y=y;this.z=z;}}exports.Node3D=Node3D;class Layout3D{constructor(nodes,links,idealLinkLength=1){this.nodes=nodes;this.links=links;this.idealLinkLength=idealLinkLength;this.constraints=null;this.useJaccardLinkLengths=true;this.result=new Array(Layout3D.k);for(var i=0;i<Layout3D.k;++i){this.result[i]=new Array(nodes.length);}nodes.forEach((v,i)=>{for(var dim of Layout3D.dims){if(typeof v[dim]=='undefined')v[dim]=Math.random();}this.result[0][i]=v.x;this.result[1][i]=v.y;this.result[2][i]=v.z;});};linkLength(l){return l.actualLength(this.result);}start(iterations=100){const n=this.nodes.length;var linkAccessor=new LinkAccessor();if(this.useJaccardLinkLengths)linklengths_1.jaccardLinkLengths(this.links,linkAccessor,1.5);this.links.forEach(e=>e.length*=this.idealLinkLength);const distanceMatrix=(new shortestpaths_1.Calculator(n,this.links,e=>e.source,e=>e.target,e=>e.length)).DistanceMatrix();const D=descent_1.Descent.createSquareMatrix(n,(i,j)=>distanceMatrix[i][j]);var G=descent_1.Descent.createSquareMatrix(n,function(){return 2;});this.links.forEach(({source,target})=>G[source][target]=G[target][source]=1);this.descent=new descent_1.Descent(this.result,D);this.descent.threshold=1e-3;this.descent.G=G;if(this.constraints)this.descent.project=new rectangle_1.Projection(this.nodes,null,null,this.constraints).projectFunctions();for(var i=0;i<this.nodes.length;i++){var v=this.nodes[i];if(v.fixed){this.descent.locks.add(i,[v.x,v.y,v.z]);}}this.descent.run(iterations);return this;}tick(){this.descent.locks.clear();for(var i=0;i<this.nodes.length;i++){var v=this.nodes[i];if(v.fixed){this.descent.locks.add(i,[v.x,v.y,v.z]);}}return this.descent.rungeKutta();}}Layout3D.dims=['x','y','z'];Layout3D.k=Layout3D.dims.length;exports.Layout3D=Layout3D;class LinkAccessor{getSourceIndex(e){return e.source;}getTargetIndex(e){return e.target;}getLength(e){return e.length;}setLength(e,l){e.length=l;}}},{"./descent":8,"./linklengths":14,"./rectangle":18,"./shortestpaths":19}],14:[function(require,module,exports){"use strict";function unionCount(a,b){var u={};for(var i in a)u[i]={};for(var i in b)u[i]={};return Object.keys(u).length;}function intersectionCount(a,b){var n=0;for(var i in a)if(typeof b[i]!=='undefined')++n;return n;}function getNeighbours(links,la){var neighbours={};var addNeighbours=(u,v)=>{if(typeof neighbours[u]==='undefined')neighbours[u]={};neighbours[u][v]={};};links.forEach(e=>{var u=la.getSourceIndex(e),v=la.getTargetIndex(e);addNeighbours(u,v);addNeighbours(v,u);});return neighbours;}function computeLinkLengths(links,w,f,la){var neighbours=getNeighbours(links,la);links.forEach(l=>{var a=neighbours[la.getSourceIndex(l)];var b=neighbours[la.getTargetIndex(l)];la.setLength(l,1+w*f(a,b));});}function symmetricDiffLinkLengths(links,la,w=1){computeLinkLengths(links,w,(a,b)=>Math.sqrt(unionCount(a,b)-intersectionCount(a,b)),la);}exports.symmetricDiffLinkLengths=symmetricDiffLinkLengths;function jaccardLinkLengths(links,la,w=1){computeLinkLengths(links,w,(a,b)=>Math.min(Object.keys(a).length,Object.keys(b).length)<1.1?0:intersectionCount(a,b)/unionCount(a,b),la);}exports.jaccardLinkLengths=jaccardLinkLengths;function generateDirectedEdgeConstraints(n,links,axis,la){var components=stronglyConnectedComponents(n,links,la);var nodes={};components.forEach((c,i)=>c.forEach(v=>nodes[v]=i));var constraints=[];links.forEach(l=>{var ui=la.getSourceIndex(l),vi=la.getTargetIndex(l),u=nodes[ui],v=nodes[vi];if(u!==v){constraints.push({axis:axis,left:ui,right:vi,gap:la.getMinSeparation(l)});}});return constraints;}exports.generateDirectedEdgeConstraints=generateDirectedEdgeConstraints;function stronglyConnectedComponents(numVertices,edges,la){var nodes=[];var index=0;var stack=[];var components=[];function strongConnect(v){v.index=v.lowlink=index++;stack.push(v);v.onStack=true;for(var w of v.out){if(typeof w.index==='undefined'){strongConnect(w);v.lowlink=Math.min(v.lowlink,w.lowlink);}else if(w.onStack){v.lowlink=Math.min(v.lowlink,w.index);}}if(v.lowlink===v.index){var component=[];while(stack.length){w=stack.pop();w.onStack=false;component.push(w);if(w===v)break;}components.push(component.map(v=>v.id));}}for(var i=0;i<numVertices;i++){nodes.push({id:i,out:[]});}for(var e of edges){let v=nodes[la.getSourceIndex(e)],w=nodes[la.getTargetIndex(e)];v.out.push(w);}for(var v of nodes)if(typeof v.index==='undefined')strongConnect(v);return components;}exports.stronglyConnectedComponents=stronglyConnectedComponents;},{}],15:[function(require,module,exports){"use strict";class PowerEdge{constructor(source,target,type){this.source=source;this.target=target;this.type=type;}}exports.PowerEdge=PowerEdge;class Configuration{constructor(n,edges,linkAccessor,rootGroup){this.linkAccessor=linkAccessor;this.modules=new Array(n);this.roots=[];if(rootGroup){this.initModulesFromGroup(rootGroup);}else{this.roots.push(new ModuleSet());for(var i=0;i<n;++i)this.roots[0].add(this.modules[i]=new Module(i));}this.R=edges.length;edges.forEach(e=>{var s=this.modules[linkAccessor.getSourceIndex(e)],t=this.modules[linkAccessor.getTargetIndex(e)],type=linkAccessor.getType(e);s.outgoing.add(type,t);t.incoming.add(type,s);});}initModulesFromGroup(group){var moduleSet=new ModuleSet();this.roots.push(moduleSet);for(var i=0;i<group.leaves.length;++i){var node=group.leaves[i];var module=new Module(node.id);this.modules[node.id]=module;moduleSet.add(module);}if(group.groups){for(var j=0;j<group.groups.length;++j){var child=group.groups[j];var definition={};for(var prop in child)if(prop!=="leaves"&&prop!=="groups"&&child.hasOwnProperty(prop))definition[prop]=child[prop];moduleSet.add(new Module(-1-j,new LinkSets(),new LinkSets(),this.initModulesFromGroup(child),definition));}}return moduleSet;}merge(a,b,k=0){var inInt=a.incoming.intersection(b.incoming),outInt=a.outgoing.intersection(b.outgoing);var children=new ModuleSet();children.add(a);children.add(b);var m=new Module(this.modules.length,outInt,inInt,children);this.modules.push(m);var update=(s,i,o)=>{s.forAll((ms,linktype)=>{ms.forAll(n=>{var nls=n[i];nls.add(linktype,m);nls.remove(linktype,a);nls.remove(linktype,b);a[o].remove(linktype,n);b[o].remove(linktype,n);});});};update(outInt,"incoming","outgoing");update(inInt,"outgoing","incoming");this.R-=inInt.count()+outInt.count();this.roots[k].remove(a);this.roots[k].remove(b);this.roots[k].add(m);return m;}rootMerges(k=0){var rs=this.roots[k].modules();var n=rs.length;var merges=new Array(n*(n-1));var ctr=0;for(var i=0,i_=n-1;i<i_;++i){for(var j=i+1;j<n;++j){var a=rs[i],b=rs[j];merges[ctr]={id:ctr,nEdges:this.nEdges(a,b),a:a,b:b};ctr++;}}return merges;}greedyMerge(){for(var i=0;i<this.roots.length;++i){if(this.roots[i].modules().length<2)continue;var ms=this.rootMerges(i).sort((a,b)=>a.nEdges==b.nEdges?a.id-b.id:a.nEdges-b.nEdges);var m=ms[0];if(m.nEdges>=this.R)continue;this.merge(m.a,m.b,i);return true;}}nEdges(a,b){var inInt=a.incoming.intersection(b.incoming),outInt=a.outgoing.intersection(b.outgoing);return this.R-inInt.count()-outInt.count();}getGroupHierarchy(retargetedEdges){var groups=[];var root={};toGroups(this.roots[0],root,groups);var es=this.allEdges();es.forEach(e=>{var a=this.modules[e.source];var b=this.modules[e.target];retargetedEdges.push(new PowerEdge(typeof a.gid==="undefined"?e.source:groups[a.gid],typeof b.gid==="undefined"?e.target:groups[b.gid],e.type));});return groups;}allEdges(){var es=[];Configuration.getEdges(this.roots[0],es);return es;}static getEdges(modules,es){modules.forAll(m=>{m.getEdges(es);Configuration.getEdges(m.children,es);});}}exports.Configuration=Configuration;function toGroups(modules,group,groups){modules.forAll(m=>{if(m.isLeaf()){if(!group.leaves)group.leaves=[];group.leaves.push(m.id);}else{var g=group;m.gid=groups.length;if(!m.isIsland()||m.isPredefined()){g={id:m.gid};if(m.isPredefined())for(var prop in m.definition)g[prop]=m.definition[prop];if(!group.groups)group.groups=[];group.groups.push(m.gid);groups.push(g);}toGroups(m.children,g,groups);}});}class Module{constructor(id,outgoing=new LinkSets(),incoming=new LinkSets(),children=new ModuleSet(),definition){this.id=id;this.outgoing=outgoing;this.incoming=incoming;this.children=children;this.definition=definition;}getEdges(es){this.outgoing.forAll((ms,edgetype)=>{ms.forAll(target=>{es.push(new PowerEdge(this.id,target.id,edgetype));});});}isLeaf(){return this.children.count()===0;}isIsland(){return this.outgoing.count()===0&&this.incoming.count()===0;}isPredefined(){return typeof this.definition!=="undefined";}}exports.Module=Module;function intersection(m,n){var i={};for(var v in m)if(v in n)i[v]=m[v];return i;}class ModuleSet{constructor(){this.table={};}count(){return Object.keys(this.table).length;}intersection(other){var result=new ModuleSet();result.table=intersection(this.table,other.table);return result;}intersectionCount(other){return this.intersection(other).count();}contains(id){return id in this.table;}add(m){this.table[m.id]=m;}remove(m){delete this.table[m.id];}forAll(f){for(var mid in this.table){f(this.table[mid]);}}modules(){var vs=[];this.forAll(m=>{if(!m.isPredefined())vs.push(m);});return vs;}}exports.ModuleSet=ModuleSet;class LinkSets{constructor(){this.sets={};this.n=0;}count(){return this.n;}contains(id){var result=false;this.forAllModules(m=>{if(!result&&m.id==id){result=true;}});return result;}add(linktype,m){var s=linktype in this.sets?this.sets[linktype]:this.sets[linktype]=new ModuleSet();s.add(m);++this.n;}remove(linktype,m){var ms=this.sets[linktype];ms.remove(m);if(ms.count()===0){delete this.sets[linktype];}--this.n;}forAll(f){for(var linktype in this.sets){f(this.sets[linktype],Number(linktype));}}forAllModules(f){this.forAll((ms,lt)=>ms.forAll(f));}intersection(other){var result=new LinkSets();this.forAll((ms,lt)=>{if(lt in other.sets){var i=ms.intersection(other.sets[lt]),n=i.count();if(n>0){result.sets[lt]=i;result.n+=n;}}});return result;}}exports.LinkSets=LinkSets;function intersectionCount(m,n){return Object.keys(intersection(m,n)).length;}function getGroups(nodes,links,la,rootGroup){var n=nodes.length,c=new Configuration(n,links,la,rootGroup);while(c.greedyMerge());var powerEdges=[];var g=c.getGroupHierarchy(powerEdges);powerEdges.forEach(function(e){var f=(end)=>{var g=e[end];if(typeof g=="number")e[end]=nodes[g];};f("source");f("target");});return{groups:g,powerEdges:powerEdges};}exports.getGroups=getGroups;},{}],16:[function(require,module,exports){"use strict";class PairingHeap{constructor(elem){this.elem=elem;this.subheaps=[];}toString(selector){var str="",needComma=false;for(var i=0;i<this.subheaps.length;++i){var subheap=this.subheaps[i];if(!subheap.elem){needComma=false;continue;}if(needComma){str=str+",";}str=str+subheap.toString(selector);needComma=true;}if(str!==""){str="("+str+")";}return(this.elem?selector(this.elem):"")+str;}forEach(f){if(!this.empty()){f(this.elem,this);this.subheaps.forEach(s=>s.forEach(f));}}count(){return this.empty()?0:1+this.subheaps.reduce((n,h)=>{return n+h.count();},0);}min(){return this.elem;}empty(){return this.elem==null;}contains(h){if(this===h)return true;for(var i=0;i<this.subheaps.length;i++){if(this.subheaps[i].contains(h))return true;}return false;}isHeap(lessThan){return this.subheaps.every(h=>lessThan(this.elem,h.elem)&&h.isHeap(lessThan));}insert(obj,lessThan){return this.merge(new PairingHeap(obj),lessThan);}merge(heap2,lessThan){if(this.empty())return heap2;else if(heap2.empty())return this;else if(lessThan(this.elem,heap2.elem)){this.subheaps.push(heap2);return this;}else{heap2.subheaps.push(this);return heap2;}}removeMin(lessThan){if(this.empty())return null;else
return this.mergePairs(lessThan);}mergePairs(lessThan){if(this.subheaps.length==0)return new PairingHeap(null);else if(this.subheaps.length==1){return this.subheaps[0];}else{var firstPair=this.subheaps.pop().merge(this.subheaps.pop(),lessThan);var remaining=this.mergePairs(lessThan);return firstPair.merge(remaining,lessThan);}}decreaseKey(subheap,newValue,setHeapNode,lessThan){var newHeap=subheap.removeMin(lessThan);subheap.elem=newHeap.elem;subheap.subheaps=newHeap.subheaps;if(setHeapNode!==null&&newHeap.elem!==null){setHeapNode(subheap.elem,subheap);}var pairingNode=new PairingHeap(newValue);if(setHeapNode!==null){setHeapNode(newValue,pairingNode);}return this.merge(pairingNode,lessThan);}}exports.PairingHeap=PairingHeap;class PriorityQueue{constructor(lessThan){this.lessThan=lessThan;}top(){if(this.empty()){return null;}return this.root.elem;}push(...args){var pairingNode;for(var i=0,arg;arg=args[i];++i){pairingNode=new PairingHeap(arg);this.root=this.empty()?pairingNode:this.root.merge(pairingNode,this.lessThan);}return pairingNode;}empty(){return!this.root||!this.root.elem;}isHeap(){return this.root.isHeap(this.lessThan);}forEach(f){this.root.forEach(f);}pop(){if(this.empty()){return null;}var obj=this.root.min();this.root=this.root.removeMin(this.lessThan);return obj;}reduceKey(heapNode,newKey,setHeapNode=null){this.root=this.root.decreaseKey(heapNode,newKey,setHeapNode,this.lessThan);}toString(selector){return this.root.toString(selector);}count(){return this.root.count();}}exports.PriorityQueue=PriorityQueue;},{}],17:[function(require,module,exports){"use strict";class TreeBase{constructor(){this.findIter=function(data){var res=this._root;var iter=this.iterator();while(res!==null){var c=this._comparator(data,res.data);if(c===0){iter._cursor=res;return iter;}else{iter._ancestors.push(res);res=res.get_child(c>0);}}return null;};}clear(){this._root=null;this.size=0;};find(data){var res=this._root;while(res!==null){var c=this._comparator(data,res.data);if(c===0){return res.data;}else{res=res.get_child(c>0);}}return null;};lowerBound(data){return this._bound(data,this._comparator);};upperBound(data){var cmp=this._comparator;function reverse_cmp(a,b){return cmp(b,a);}return this._bound(data,reverse_cmp);};min(){var res=this._root;if(res===null){return null;}while(res.left!==null){res=res.left;}return res.data;};max(){var res=this._root;if(res===null){return null;}while(res.right!==null){res=res.right;}return res.data;};iterator(){return new Iterator(this);};each(cb){var it=this.iterator(),data;while((data=it.next())!==null){cb(data);}};reach(cb){var it=this.iterator(),data;while((data=it.prev())!==null){cb(data);}};_bound(data,cmp){var cur=this._root;var iter=this.iterator();while(cur!==null){var c=this._comparator(data,cur.data);if(c===0){iter._cursor=cur;return iter;}iter._ancestors.push(cur);cur=cur.get_child(c>0);}for(var i=iter._ancestors.length-1;i>=0;--i){cur=iter._ancestors[i];if(cmp(data,cur.data)>0){iter._cursor=cur;iter._ancestors.length=i;return iter;}}iter._ancestors.length=0;return iter;};}exports.TreeBase=TreeBase;class Iterator{constructor(tree){this._tree=tree;this._ancestors=[];this._cursor=null;}data(){return this._cursor!==null?this._cursor.data:null;};next(){if(this._cursor===null){var root=this._tree._root;if(root!==null){this._minNode(root);}}else{if(this._cursor.right===null){var save;do{save=this._cursor;if(this._ancestors.length){this._cursor=this._ancestors.pop();}else{this._cursor=null;break;}}while(this._cursor.right===save);}else{this._ancestors.push(this._cursor);this._minNode(this._cursor.right);}}return this._cursor!==null?this._cursor.data:null;};prev(){if(this._cursor===null){var root=this._tree._root;if(root!==null){this._maxNode(root);}}else{if(this._cursor.left===null){var save;do{save=this._cursor;if(this._ancestors.length){this._cursor=this._ancestors.pop();}else{this._cursor=null;break;}}while(this._cursor.left===save);}else{this._ancestors.push(this._cursor);this._maxNode(this._cursor.left);}}return this._cursor!==null?this._cursor.data:null;};_minNode(start){while(start.left!==null){this._ancestors.push(start);start=start.left;}this._cursor=start;};_maxNode(start){while(start.right!==null){this._ancestors.push(start);start=start.right;}this._cursor=start;};}exports.Iterator=Iterator;class Node{constructor(data){this.data=data;this.left=null;this.right=null;this.red=true;}get_child(dir){return dir?this.right:this.left;};set_child(dir,val){if(dir){this.right=val;}else{this.left=val;}};}class RBTree extends TreeBase{constructor(comparator){super();this._root=null;this._comparator=comparator;this.size=0;}insert(data){var ret=false;if(this._root===null){this._root=new Node(data);ret=true;this.size++;}else{var head=new Node(undefined);var dir=false;var last=false;var gp=null;var ggp=head;var p=null;var node=this._root;ggp.right=this._root;while(true){if(node===null){node=new Node(data);p.set_child(dir,node);ret=true;this.size++;}else if(RBTree.is_red(node.left)&&RBTree.is_red(node.right)){node.red=true;node.left.red=false;node.right.red=false;}if(RBTree.is_red(node)&&RBTree.is_red(p)){var dir2=ggp.right===gp;if(node===p.get_child(last)){ggp.set_child(dir2,RBTree.single_rotate(gp,!last));}else{ggp.set_child(dir2,RBTree.double_rotate(gp,!last));}}var cmp=this._comparator(node.data,data);if(cmp===0){break;}last=dir;dir=cmp<0;if(gp!==null){ggp=gp;}gp=p;p=node;node=node.get_child(dir);}this._root=head.right;}this._root.red=false;return ret;};remove(data){if(this._root===null){return false;}var head=new Node(undefined);var node=head;node.right=this._root;var p=null;var gp=null;var found=null;var dir=true;while(node.get_child(dir)!==null){var last=dir;gp=p;p=node;node=node.get_child(dir);var cmp=this._comparator(data,node.data);dir=cmp>0;if(cmp===0){found=node;}if(!RBTree.is_red(node)&&!RBTree.is_red(node.get_child(dir))){if(RBTree.is_red(node.get_child(!dir))){var sr=RBTree.single_rotate(node,dir);p.set_child(last,sr);p=sr;}else if(!RBTree.is_red(node.get_child(!dir))){var sibling=p.get_child(!last);if(sibling!==null){if(!RBTree.is_red(sibling.get_child(!last))&&!RBTree.is_red(sibling.get_child(last))){p.red=false;sibling.red=true;node.red=true;}else{var dir2=gp.right===p;if(RBTree.is_red(sibling.get_child(last))){gp.set_child(dir2,RBTree.double_rotate(p,last));}else if(RBTree.is_red(sibling.get_child(!last))){gp.set_child(dir2,RBTree.single_rotate(p,last));}var gpc=gp.get_child(dir2);gpc.red=true;node.red=true;gpc.left.red=false;gpc.right.red=false;}}}}}if(found!==null){found.data=node.data;p.set_child(p.right===node,node.get_child(node.left===null));this.size--;}this._root=head.right;if(this._root!==null){this._root.red=false;}return found!==null;};static is_red(node){return node!==null&&node.red;}static single_rotate(root,dir){var save=root.get_child(!dir);root.set_child(!dir,save.get_child(dir));save.set_child(dir,root);root.red=true;save.red=false;return save;}static double_rotate(root,dir){root.set_child(!dir,RBTree.single_rotate(root.get_child(!dir),!dir));return RBTree.single_rotate(root,dir);}}exports.RBTree=RBTree;},{}],18:[function(require,module,exports){"use strict";const vpsc_1=require("./vpsc");const rbtree_1=require("./rbtree");function computeGroupBounds(g){g.bounds=typeof g.leaves!=="undefined"?g.leaves.reduce((r,c)=>c.bounds.union(r),Rectangle.empty()):Rectangle.empty();if(typeof g.groups!=="undefined")g.bounds=g.groups.reduce((r,c)=>computeGroupBounds(c).union(r),g.bounds);g.bounds=g.bounds.inflate(g.padding);return g.bounds;}exports.computeGroupBounds=computeGroupBounds;class Rectangle{constructor(x,X,y,Y){this.x=x;this.X=X;this.y=y;this.Y=Y;}static empty(){return new Rectangle(Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY);}cx(){return(this.x+this.X)/2;}cy(){return(this.y+this.Y)/2;}overlapX(r){var ux=this.cx(),vx=r.cx();if(ux<=vx&&r.x<this.X)return this.X-r.x;if(vx<=ux&&this.x<r.X)return r.X-this.x;return 0;}overlapY(r){var uy=this.cy(),vy=r.cy();if(uy<=vy&&r.y<this.Y)return this.Y-r.y;if(vy<=uy&&this.y<r.Y)return r.Y-this.y;return 0;}setXCentre(cx){var dx=cx-this.cx();this.x+=dx;this.X+=dx;}setYCentre(cy){var dy=cy-this.cy();this.y+=dy;this.Y+=dy;}width(){return this.X-this.x;}height(){return this.Y-this.y;}union(r){return new Rectangle(Math.min(this.x,r.x),Math.max(this.X,r.X),Math.min(this.y,r.y),Math.max(this.Y,r.Y));}lineIntersections(x1,y1,x2,y2){var sides=[[this.x,this.y,this.X,this.y],[this.X,this.y,this.X,this.Y],[this.X,this.Y,this.x,this.Y],[this.x,this.Y,this.x,this.y]];var intersections=[];for(var i=0;i<4;++i){var r=Rectangle.lineIntersection(x1,y1,x2,y2,sides[i][0],sides[i][1],sides[i][2],sides[i][3]);if(r!==null)intersections.push({x:r.x,y:r.y});}return intersections;}rayIntersection(x2,y2){var ints=this.lineIntersections(this.cx(),this.cy(),x2,y2);return ints.length>0?ints[0]:null;}vertices(){return[{x:this.x,y:this.y},{x:this.X,y:this.y},{x:this.X,y:this.Y},{x:this.x,y:this.Y},{x:this.x,y:this.y}];}static lineIntersection(x1,y1,x2,y2,x3,y3,x4,y4){var dx12=x2-x1,dx34=x4-x3,dy12=y2-y1,dy34=y4-y3,denominator=dy34*dx12-dx34*dy12;if(denominator==0)return null;var dx31=x1-x3,dy31=y1-y3,numa=dx34*dy31-dy34*dx31,a=numa/denominator,numb=dx12*dy31-dy12*dx31,b=numb/denominator;if(a>=0&&a<=1&&b>=0&&b<=1){return{x:x1+a*dx12,y:y1+a*dy12};}return null;}inflate(pad){return new Rectangle(this.x-pad,this.X+pad,this.y-pad,this.Y+pad);}}exports.Rectangle=Rectangle;function makeEdgeBetween(source,target,ah){const si=source.rayIntersection(target.cx(),target.cy())||{x:source.cx(),y:source.cy()},ti=target.rayIntersection(source.cx(),source.cy())||{x:target.cx(),y:target.cy()},dx=ti.x-si.x,dy=ti.y-si.y,l=Math.sqrt(dx*dx+dy*dy),al=l-ah;return{sourceIntersection:si,targetIntersection:ti,arrowStart:{x:si.x+al*dx/l,y:si.y+al*dy/l}};}exports.makeEdgeBetween=makeEdgeBetween;function makeEdgeTo(s,target,ah){var ti=target.rayIntersection(s.x,s.y);if(!ti)ti={x:target.cx(),y:target.cy()};var dx=ti.x-s.x,dy=ti.y-s.y,l=Math.sqrt(dx*dx+dy*dy);return{x:ti.x-ah*dx/l,y:ti.y-ah*dy/l};}exports.makeEdgeTo=makeEdgeTo;class Node{constructor(v,r,pos){this.v=v;this.r=r;this.pos=pos;this.prev=makeRBTree();this.next=makeRBTree();}}class Event{constructor(isOpen,v,pos){this.isOpen=isOpen;this.v=v;this.pos=pos;}}function compareEvents(a,b){if(a.pos>b.pos){return 1;}if(a.pos<b.pos){return-1;}if(a.isOpen){return-1;}if(b.isOpen){return 1;}return 0;}function makeRBTree(){return new rbtree_1.RBTree((a,b)=>a.pos-b.pos);}var xRect={getCentre:r=>r.cx(),getOpen:r=>r.y,getClose:r=>r.Y,getSize:r=>r.width(),makeRect:(open,close,center,size)=>new Rectangle(center-size/2,center+size/2,open,close),findNeighbours:findXNeighbours};var yRect={getCentre:r=>r.cy(),getOpen:r=>r.x,getClose:r=>r.X,getSize:r=>r.height(),makeRect:(open,close,center,size)=>new Rectangle(open,close,center-size/2,center+size/2),findNeighbours:findYNeighbours};function generateGroupConstraints(root,f,minSep,isContained=false){var padding=root.padding,gn=typeof root.groups!=='undefined'?root.groups.length:0,ln=typeof root.leaves!=='undefined'?root.leaves.length:0,childConstraints=!gn?[]:root.groups.reduce((ccs,g)=>ccs.concat(generateGroupConstraints(g,f,minSep,true)),[]),n=(isContained?2:0)+ln+gn,vs=new Array(n),rs=new Array(n),i=0,add=(r,v)=>{rs[i]=r;vs[i++]=v;};if(isContained){var b=root.bounds,c=f.getCentre(b),s=f.getSize(b)/2,open=f.getOpen(b),close=f.getClose(b),min=c-s+padding/2,max=c+s-padding/2;root.minVar.desiredPosition=min;add(f.makeRect(open,close,min,padding),root.minVar);root.maxVar.desiredPosition=max;add(f.makeRect(open,close,max,padding),root.maxVar);}if(ln)root.leaves.forEach(l=>add(l.bounds,l.variable));if(gn)root.groups.forEach(g=>{var b=g.bounds;add(f.makeRect(f.getOpen(b),f.getClose(b),f.getCentre(b),f.getSize(b)),g.minVar);});var cs=generateConstraints(rs,vs,f,minSep);if(gn){vs.forEach(v=>{v.cOut=[],v.cIn=[];});cs.forEach(c=>{c.left.cOut.push(c),c.right.cIn.push(c);});root.groups.forEach(g=>{var gapAdjustment=(g.padding-f.getSize(g.bounds))/2;g.minVar.cIn.forEach(c=>c.gap+=gapAdjustment);g.minVar.cOut.forEach(c=>{c.left=g.maxVar;c.gap+=gapAdjustment;});});}return childConstraints.concat(cs);}function generateConstraints(rs,vars,rect,minSep){var i,n=rs.length;var N=2*n;console.assert(vars.length>=n);var events=new Array(N);for(i=0;i<n;++i){var r=rs[i];var v=new Node(vars[i],r,rect.getCentre(r));events[i]=new Event(true,v,rect.getOpen(r));events[i+n]=new Event(false,v,rect.getClose(r));}events.sort(compareEvents);var cs=new Array();var scanline=makeRBTree();for(i=0;i<N;++i){var e=events[i];var v=e.v;if(e.isOpen){scanline.insert(v);rect.findNeighbours(v,scanline);}else{scanline.remove(v);var makeConstraint=(l,r)=>{var sep=(rect.getSize(l.r)+rect.getSize(r.r))/2+minSep;cs.push(new vpsc_1.Constraint(l.v,r.v,sep));};var visitNeighbours=(forward,reverse,mkcon)=>{var u,it=v[forward].iterator();while((u=it[forward]())!==null){mkcon(u,v);u[reverse].remove(v);}};visitNeighbours("prev","next",(u,v)=>makeConstraint(u,v));visitNeighbours("next","prev",(u,v)=>makeConstraint(v,u));}}console.assert(scanline.size===0);return cs;}function findXNeighbours(v,scanline){var f=(forward,reverse)=>{var it=scanline.findIter(v);var u;while((u=it[forward]())!==null){var uovervX=u.r.overlapX(v.r);if(uovervX<=0||uovervX<=u.r.overlapY(v.r)){v[forward].insert(u);u[reverse].insert(v);}if(uovervX<=0){break;}}};f("next","prev");f("prev","next");}function findYNeighbours(v,scanline){var f=(forward,reverse)=>{var u=scanline.findIter(v)[forward]();if(u!==null&&u.r.overlapX(v.r)>0){v[forward].insert(u);u[reverse].insert(v);}};f("next","prev");f("prev","next");}function generateXConstraints(rs,vars){return generateConstraints(rs,vars,xRect,1e-6);}exports.generateXConstraints=generateXConstraints;function generateYConstraints(rs,vars){return generateConstraints(rs,vars,yRect,1e-6);}exports.generateYConstraints=generateYConstraints;function generateXGroupConstraints(root){return generateGroupConstraints(root,xRect,1e-6);}exports.generateXGroupConstraints=generateXGroupConstraints;function generateYGroupConstraints(root){return generateGroupConstraints(root,yRect,1e-6);}exports.generateYGroupConstraints=generateYGroupConstraints;function removeOverlaps(rs){var vs=rs.map(r=>new vpsc_1.Variable(r.cx()));var cs=generateXConstraints(rs,vs);var solver=new vpsc_1.Solver(vs,cs);solver.solve();vs.forEach((v,i)=>rs[i].setXCentre(v.position()));vs=rs.map(r=>new vpsc_1.Variable(r.cy()));cs=generateYConstraints(rs,vs);solver=new vpsc_1.Solver(vs,cs);solver.solve();vs.forEach((v,i)=>rs[i].setYCentre(v.position()));}exports.removeOverlaps=removeOverlaps;class IndexedVariable extends vpsc_1.Variable{constructor(index,w){super(0,w);this.index=index;}}exports.IndexedVariable=IndexedVariable;class Projection{constructor(nodes,groups,rootGroup=null,constraints=null,avoidOverlaps=false){this.nodes=nodes;this.groups=groups;this.rootGroup=rootGroup;this.avoidOverlaps=avoidOverlaps;this.variables=nodes.map((v,i)=>{return v.variable=new IndexedVariable(i,1);});if(constraints)this.createConstraints(constraints);if(avoidOverlaps&&rootGroup&&typeof rootGroup.groups!=='undefined'){nodes.forEach(v=>{if(!v.width||!v.height){v.bounds=new Rectangle(v.x,v.x,v.y,v.y);return;}var w2=v.width/2,h2=v.height/2;v.bounds=new Rectangle(v.x-w2,v.x+w2,v.y-h2,v.y+h2);});computeGroupBounds(rootGroup);var i=nodes.length;groups.forEach(g=>{this.variables[i]=g.minVar=new IndexedVariable(i++,typeof g.stiffness!=="undefined"?g.stiffness:0.01);this.variables[i]=g.maxVar=new IndexedVariable(i++,typeof g.stiffness!=="undefined"?g.stiffness:0.01);});}}createSeparation(c){return new vpsc_1.Constraint(this.nodes[c.left].variable,this.nodes[c.right].variable,c.gap,typeof c.equality!=="undefined"?c.equality:false);}makeFeasible(c){if(!this.avoidOverlaps)return;var axis='x',dim='width';if(c.axis==='x')axis='y',dim='height';var vs=c.offsets.map(o=>this.nodes[o.node]).sort((a,b)=>a[axis]-b[axis]);var p=null;vs.forEach(v=>{if(p)v[axis]=p[axis]+p[dim]+1;p=v;});}createAlignment(c){var u=this.nodes[c.offsets[0].node].variable;this.makeFeasible(c);var cs=c.axis==='x'?this.xConstraints:this.yConstraints;c.offsets.slice(1).forEach(o=>{var v=this.nodes[o.node].variable;cs.push(new vpsc_1.Constraint(u,v,o.offset,true));});}createConstraints(constraints){var isSep=c=>typeof c.type==='undefined'||c.type==='separation';this.xConstraints=constraints.filter(c=>c.axis==="x"&&isSep(c)).map(c=>this.createSeparation(c));this.yConstraints=constraints.filter(c=>c.axis==="y"&&isSep(c)).map(c=>this.createSeparation(c));constraints.filter(c=>c.type==='alignment').forEach(c=>this.createAlignment(c));}setupVariablesAndBounds(x0,y0,desired,getDesired){this.nodes.forEach((v,i)=>{if(v.fixed){v.variable.weight=v.fixedWeight?v.fixedWeight:1000;desired[i]=getDesired(v);}else{v.variable.weight=1;}var w=(v.width||0)/2,h=(v.height||0)/2;var ix=x0[i],iy=y0[i];v.bounds=new Rectangle(ix-w,ix+w,iy-h,iy+h);});}xProject(x0,y0,x){if(!this.rootGroup&&!(this.avoidOverlaps||this.xConstraints))return;this.project(x0,y0,x0,x,v=>v.px,this.xConstraints,generateXGroupConstraints,v=>v.bounds.setXCentre(x[v.variable.index]=v.variable.position()),g=>{var xmin=x[g.minVar.index]=g.minVar.position();var xmax=x[g.maxVar.index]=g.maxVar.position();var p2=g.padding/2;g.bounds.x=xmin-p2;g.bounds.X=xmax+p2;});}yProject(x0,y0,y){if(!this.rootGroup&&!this.yConstraints)return;this.project(x0,y0,y0,y,v=>v.py,this.yConstraints,generateYGroupConstraints,v=>v.bounds.setYCentre(y[v.variable.index]=v.variable.position()),g=>{var ymin=y[g.minVar.index]=g.minVar.position();var ymax=y[g.maxVar.index]=g.maxVar.position();var p2=g.padding/2;g.bounds.y=ymin-p2;;g.bounds.Y=ymax+p2;});}projectFunctions(){return[(x0,y0,x)=>this.xProject(x0,y0,x),(x0,y0,y)=>this.yProject(x0,y0,y)];}project(x0,y0,start,desired,getDesired,cs,generateConstraints,updateNodeBounds,updateGroupBounds){this.setupVariablesAndBounds(x0,y0,desired,getDesired);if(this.rootGroup&&this.avoidOverlaps){computeGroupBounds(this.rootGroup);cs=cs.concat(generateConstraints(this.rootGroup));}this.solve(this.variables,cs,start,desired);this.nodes.forEach(updateNodeBounds);if(this.rootGroup&&this.avoidOverlaps){this.groups.forEach(updateGroupBounds);computeGroupBounds(this.rootGroup);}}solve(vs,cs,starting,desired){var solver=new vpsc_1.Solver(vs,cs);solver.setStartingPositions(starting);solver.setDesiredPositions(desired);solver.solve();}}exports.Projection=Projection;},{"./rbtree":17,"./vpsc":20}],19:[function(require,module,exports){"use strict";const pqueue_1=require("./pqueue");class Neighbour{constructor(id,distance){this.id=id;this.distance=distance;}}class Node{constructor(id){this.id=id;this.neighbours=[];}}class QueueEntry{constructor(node,prev,d){this.node=node;this.prev=prev;this.d=d;}}class Calculator{constructor(n,es,getSourceIndex,getTargetIndex,getLength){this.n=n;this.es=es;this.neighbours=new Array(this.n);var i=this.n;while(i--)this.neighbours[i]=new Node(i);i=this.es.length;while(i--){var e=this.es[i];var u=getSourceIndex(e),v=getTargetIndex(e);var d=getLength(e);this.neighbours[u].neighbours.push(new Neighbour(v,d));this.neighbours[v].neighbours.push(new Neighbour(u,d));}}DistanceMatrix(){var D=new Array(this.n);for(var i=0;i<this.n;++i){D[i]=this.dijkstraNeighbours(i);}return D;}DistancesFromNode(start){return this.dijkstraNeighbours(start);}PathFromNodeToNode(start,end){return this.dijkstraNeighbours(start,end);}PathFromNodeToNodeWithPrevCost(start,end,prevCost){var q=new pqueue_1.PriorityQueue((a,b)=>a.d<=b.d),u=this.neighbours[start],qu=new QueueEntry(u,null,0),visitedFrom={};q.push(qu);while(!q.empty()){qu=q.pop();u=qu.node;if(u.id===end){break;}var i=u.neighbours.length;while(i--){var neighbour=u.neighbours[i],v=this.neighbours[neighbour.id];if(qu.prev&&v.id===qu.prev.node.id)continue;var viduid=v.id+','+u.id;if(viduid in visitedFrom&&visitedFrom[viduid]<=qu.d)continue;var cc=qu.prev?prevCost(qu.prev.node.id,u.id,v.id):0,t=qu.d+neighbour.distance+cc;visitedFrom[viduid]=t;q.push(new QueueEntry(v,qu,t));}}var path=[];while(qu.prev){qu=qu.prev;path.push(qu.node.id);}return path;}dijkstraNeighbours(start,dest=-1){var q=new pqueue_1.PriorityQueue((a,b)=>a.d<=b.d),i=this.neighbours.length,d=new Array(i);while(i--){var node=this.neighbours[i];node.d=i===start?0:Number.POSITIVE_INFINITY;node.q=q.push(node);}while(!q.empty()){var u=q.pop();d[u.id]=u.d;if(u.id===dest){var path=[];var v=u;while(typeof v.prev!=='undefined'){path.push(v.prev.id);v=v.prev;}return path;}i=u.neighbours.length;while(i--){var neighbour=u.neighbours[i];var v=this.neighbours[neighbour.id];var t=u.d+neighbour.distance;if(u.d!==Number.MAX_VALUE&&v.d>t){v.d=t;v.prev=u;q.reduceKey(v.q,v,(e,q)=>e.q=q);}}}return d;}}exports.Calculator=Calculator;},{"./pqueue":16}],20:[function(require,module,exports){"use strict";class PositionStats{constructor(scale){this.scale=scale;this.AB=0;this.AD=0;this.A2=0;}addVariable(v){var ai=this.scale/v.scale;var bi=v.offset/v.scale;var wi=v.weight;this.AB+=wi*ai*bi;this.AD+=wi*ai*v.desiredPosition;this.A2+=wi*ai*ai;}getPosn(){return(this.AD-this.AB)/this.A2;}}exports.PositionStats=PositionStats;class Constraint{constructor(left,right,gap,equality=false){this.left=left;this.right=right;this.gap=gap;this.equality=equality;this.active=false;this.unsatisfiable=false;this.left=left;this.right=right;this.gap=gap;this.equality=equality;}slack(){return this.unsatisfiable?Number.MAX_VALUE:this.right.scale*this.right.position()-this.gap
-this.left.scale*this.left.position();}}exports.Constraint=Constraint;class Variable{constructor(desiredPosition,weight=1,scale=1){this.desiredPosition=desiredPosition;this.weight=weight;this.scale=scale;this.offset=0;}dfdv(){return 2.0*this.weight*(this.position()-this.desiredPosition);}position(){return(this.block.ps.scale*this.block.posn+this.offset)/this.scale;}visitNeighbours(prev,f){var ff=(c,next)=>c.active&&prev!==next&&f(c,next);this.cOut.forEach(c=>ff(c,c.right));this.cIn.forEach(c=>ff(c,c.left));}}exports.Variable=Variable;class Block{constructor(v){this.vars=[];v.offset=0;this.ps=new PositionStats(v.scale);this.addVariable(v);}addVariable(v){v.block=this;this.vars.push(v);this.ps.addVariable(v);this.posn=this.ps.getPosn();}updateWeightedPosition(){this.ps.AB=this.ps.AD=this.ps.A2=0;for(var i=0,n=this.vars.length;i<n;++i)this.ps.addVariable(this.vars[i]);this.posn=this.ps.getPosn();}compute_lm(v,u,postAction){var dfdv=v.dfdv();v.visitNeighbours(u,(c,next)=>{var _dfdv=this.compute_lm(next,v,postAction);if(next===c.right){dfdv+=_dfdv*c.left.scale;c.lm=_dfdv;}else{dfdv+=_dfdv*c.right.scale;c.lm=-_dfdv;}postAction(c);});return dfdv/v.scale;}populateSplitBlock(v,prev){v.visitNeighbours(prev,(c,next)=>{next.offset=v.offset+(next===c.right?c.gap:-c.gap);this.addVariable(next);this.populateSplitBlock(next,v);});}traverse(visit,acc,v=this.vars[0],prev=null){v.visitNeighbours(prev,(c,next)=>{acc.push(visit(c));this.traverse(visit,acc,next,v);});}findMinLM(){var m=null;this.compute_lm(this.vars[0],null,c=>{if(!c.equality&&(m===null||c.lm<m.lm))m=c;});return m;}findMinLMBetween(lv,rv){this.compute_lm(lv,null,()=>{});var m=null;this.findPath(lv,null,rv,(c,next)=>{if(!c.equality&&c.right===next&&(m===null||c.lm<m.lm))m=c;});return m;}findPath(v,prev,to,visit){var endFound=false;v.visitNeighbours(prev,(c,next)=>{if(!endFound&&(next===to||this.findPath(next,v,to,visit))){endFound=true;visit(c,next);}});return endFound;}isActiveDirectedPathBetween(u,v){if(u===v)return true;var i=u.cOut.length;while(i--){var c=u.cOut[i];if(c.active&&this.isActiveDirectedPathBetween(c.right,v))return true;}return false;}static split(c){c.active=false;return[Block.createSplitBlock(c.left),Block.createSplitBlock(c.right)];}static createSplitBlock(startVar){var b=new Block(startVar);b.populateSplitBlock(startVar,null);return b;}splitBetween(vl,vr){var c=this.findMinLMBetween(vl,vr);if(c!==null){var bs=Block.split(c);return{constraint:c,lb:bs[0],rb:bs[1]};}return null;}mergeAcross(b,c,dist){c.active=true;for(var i=0,n=b.vars.length;i<n;++i){var v=b.vars[i];v.offset+=dist;this.addVariable(v);}this.posn=this.ps.getPosn();}cost(){var sum=0,i=this.vars.length;while(i--){var v=this.vars[i],d=v.position()-v.desiredPosition;sum+=d*d*v.weight;}return sum;}}exports.Block=Block;class Blocks{constructor(vs){this.vs=vs;var n=vs.length;this.list=new Array(n);while(n--){var b=new Block(vs[n]);this.list[n]=b;b.blockInd=n;}}cost(){var sum=0,i=this.list.length;while(i--)sum+=this.list[i].cost();return sum;}insert(b){b.blockInd=this.list.length;this.list.push(b);}remove(b){var last=this.list.length-1;var swapBlock=this.list[last];this.list.length=last;if(b!==swapBlock){this.list[b.blockInd]=swapBlock;swapBlock.blockInd=b.blockInd;}}merge(c){var l=c.left.block,r=c.right.block;var dist=c.right.offset-c.left.offset-c.gap;if(l.vars.length<r.vars.length){r.mergeAcross(l,c,dist);this.remove(l);}else{l.mergeAcross(r,c,-dist);this.remove(r);}}forEach(f){this.list.forEach(f);}updateBlockPositions(){this.list.forEach(b=>b.updateWeightedPosition());}split(inactive){this.updateBlockPositions();this.list.forEach(b=>{var v=b.findMinLM();if(v!==null&&v.lm<Solver.LAGRANGIAN_TOLERANCE){b=v.left.block;Block.split(v).forEach(nb=>this.insert(nb));this.remove(b);inactive.push(v);}});}}exports.Blocks=Blocks;class Solver{constructor(vs,cs){this.vs=vs;this.cs=cs;this.vs=vs;vs.forEach(v=>{v.cIn=[],v.cOut=[];});this.cs=cs;cs.forEach(c=>{c.left.cOut.push(c);c.right.cIn.push(c);});this.inactive=cs.map(c=>{c.active=false;return c;});this.bs=null;}cost(){return this.bs.cost();}setStartingPositions(ps){this.inactive=this.cs.map(c=>{c.active=false;return c;});this.bs=new Blocks(this.vs);this.bs.forEach((b,i)=>b.posn=ps[i]);}setDesiredPositions(ps){this.vs.forEach((v,i)=>v.desiredPosition=ps[i]);}mostViolated(){var minSlack=Number.MAX_VALUE,v=null,l=this.inactive,n=l.length,deletePoint=n;for(var i=0;i<n;++i){var c=l[i];if(c.unsatisfiable)continue;var slack=c.slack();if(c.equality||slack<minSlack){minSlack=slack;v=c;deletePoint=i;if(c.equality)break;}}if(deletePoint!==n&&(minSlack<Solver.ZERO_UPPERBOUND&&!v.active||v.equality)){l[deletePoint]=l[n-1];l.length=n-1;}return v;}satisfy(){if(this.bs==null){this.bs=new Blocks(this.vs);}this.bs.split(this.inactive);var v=null;while((v=this.mostViolated())&&(v.equality||v.slack()<Solver.ZERO_UPPERBOUND&&!v.active)){var lb=v.left.block,rb=v.right.block;if(lb!==rb){this.bs.merge(v);}else{if(lb.isActiveDirectedPathBetween(v.right,v.left)){v.unsatisfiable=true;continue;}var split=lb.splitBetween(v.left,v.right);if(split!==null){this.bs.insert(split.lb);this.bs.insert(split.rb);this.bs.remove(lb);this.inactive.push(split.constraint);}else{v.unsatisfiable=true;continue;}if(v.slack()>=0){this.inactive.push(v);}else{this.bs.merge(v);}}}}solve(){this.satisfy();var lastcost=Number.MAX_VALUE,cost=this.bs.cost();while(Math.abs(lastcost-cost)>0.0001){this.satisfy();lastcost=cost;cost=this.bs.cost();}return cost;}}Solver.LAGRANGIAN_TOLERANCE=-1e-4;Solver.ZERO_UPPERBOUND=-1e-10;exports.Solver=Solver;function removeOverlapInOneDimension(spans,lowerBound,upperBound){const vs=spans.map(s=>new Variable(s.desiredCenter));const cs=[];const n=spans.length;for(var i=0;i<n-1;i++){const left=spans[i],right=spans[i+1];cs.push(new Constraint(vs[i],vs[i+1],(left.size+right.size)/2));}const leftMost=vs[0],rightMost=vs[n-1],leftMostSize=spans[0].size/2,rightMostSize=spans[n-1].size/2;let vLower=null,vUpper=null;if(lowerBound){vLower=new Variable(lowerBound,leftMost.weight*1000);vs.push(vLower);cs.push(new Constraint(vLower,leftMost,leftMostSize));}if(upperBound){vUpper=new Variable(upperBound,rightMost.weight*1000);vs.push(vUpper);cs.push(new Constraint(rightMost,vUpper,rightMostSize));}var solver=new Solver(vs,cs);solver.solve();return{newCenters:vs.slice(0,spans.length).map(v=>v.position()),lowerBound:vLower?vLower.position():leftMost.position()-leftMostSize,upperBound:vUpper?vUpper.position():rightMost.position()+rightMostSize};}exports.removeOverlapInOneDimension=removeOverlapInOneDimension;},{}],21:[function(require,module,exports){var read=require("./lib/read-one"),readMany=require("./lib/read-many"),write=require("./lib/write-one"),version=require("./lib/version");module.exports={graphlib:require("./lib/graphlib"),read:read,readMany:readMany,write:write,version:version,type:"dot",buffer:false};},{"./lib/graphlib":24,"./lib/read-many":26,"./lib/read-one":27,"./lib/version":28,"./lib/write-one":29}],22:[function(require,module,exports){"use strict";var _=require("./lodash"),Graph=require("./graphlib").Graph;module.exports=buildGraph;function buildGraph(parseTree){var isDirected=parseTree.type!=="graph",isMultigraph=!parseTree.strict,defaultStack=[{node:{},edge:{}}],id=parseTree.id,g=new Graph({directed:isDirected,multigraph:isMultigraph,compound:true});g.setGraph(id===null?{}:{id:id});_.each(parseTree.stmts,function(stmt){handleStmt(g,stmt,defaultStack);});return g;}function handleStmt(g,stmt,defaultStack,sg){switch(stmt.type){case"node":handleNodeStmt(g,stmt,defaultStack,sg);break;case"edge":handleEdgeStmt(g,stmt,defaultStack,sg);break;case"subgraph":handleSubgraphStmt(g,stmt,defaultStack,sg);break;case"attr":handleAttrStmt(g,stmt,defaultStack);break;case"inlineAttr":handleInlineAttrsStmt(g,stmt,defaultStack,sg);break;}}function handleNodeStmt(g,stmt,defaultStack,sg){var v=stmt.id,attrs=stmt.attrs;maybeCreateNode(g,v,defaultStack,sg);_.merge(g.node(v),attrs);}function handleEdgeStmt(g,stmt,defaultStack,sg){var attrs=stmt.attrs,prev,curr;_.each(stmt.elems,function(elem){handleStmt(g,elem,defaultStack,sg);switch(elem.type){case"node":curr=[elem.id];break;case"subgraph":curr=collectNodeIds(elem);break;}_.each(prev,function(v){_.each(curr,function(w){var name;if(g.hasEdge(v,w)&&g.isMultigraph()){name=_.uniqueId("edge");}if(!g.hasEdge(v,w,name)){g.setEdge(v,w,_.clone(_.last(defaultStack).edge),name);}_.merge(g.edge(v,w,name),attrs);});});prev=curr;});}function handleSubgraphStmt(g,stmt,defaultStack,sg){var id=stmt.id;if(id===undefined){id=generateSubgraphId(g);}defaultStack.push(_.clone(_.last(defaultStack)));maybeCreateNode(g,id,defaultStack,sg);_.each(stmt.stmts,function(s){handleStmt(g,s,defaultStack,id);});if(!g.children(id).length){g.removeNode(id);}defaultStack.pop();}function handleAttrStmt(g,stmt,defaultStack){_.merge(_.last(defaultStack)[stmt.attrType],stmt.attrs);}function handleInlineAttrsStmt(g,stmt,defaultStack,sg){_.merge(sg?g.node(sg):g.graph(),stmt.attrs);}function generateSubgraphId(g){var id;do{id=_.uniqueId("sg");}while(g.hasNode(id));return id;}function maybeCreateNode(g,v,defaultStack,sg){if(!g.hasNode(v)){g.setNode(v,_.clone(_.last(defaultStack).node));g.setParent(v,sg);}}function collectNodeIds(stmt){var ids={},stack=[],curr;var push=stack.push.bind(stack);push(stmt);while(stack.length){curr=stack.pop();switch(curr.type){case"node":ids[curr.id]=true;break;case"edge":_.each(curr.elems,push);break;case"subgraph":_.each(curr.stmts,push);break;}}return _.keys(ids);}},{"./graphlib":24,"./lodash":25}],23:[function(require,module,exports){module.exports=(function(){function peg$subclass(child,parent){function ctor(){this.constructor=child;}ctor.prototype=parent.prototype;child.prototype=new ctor();}function SyntaxError(message,expected,found,offset,line,column){this.message=message;this.expected=expected;this.found=found;this.offset=offset;this.line=line;this.column=column;this.name="SyntaxError";}peg$subclass(SyntaxError,Error);function parse(input){var options=arguments.length>1?arguments[1]:{},peg$FAILED={},peg$startRuleFunctions={start:peg$parsestart,graphStmt:peg$parsegraphStmt},peg$startRuleFunction=peg$parsestart,peg$c0=[],peg$c1=peg$FAILED,peg$c2=null,peg$c3="{",peg$c4={type:"literal",value:"{",description:"\"{\""},peg$c5="}",peg$c6={type:"literal",value:"}",description:"\"}\""},peg$c7=function(strict,type,id,stmts){return{type:type,id:id,strict:strict!==null,stmts:stmts};},peg$c8=";",peg$c9={type:"literal",value:";",description:"\";\""},peg$c10=function(first,rest){var result=[first];for(var i=0;i<rest.length;++i){result.push(rest[i][1]);}return result;},peg$c11=function(type,attrs){return{type:"attr",attrType:type,attrs:attrs||{}};},peg$c12="=",peg$c13={type:"literal",value:"=",description:"\"=\""},peg$c14=function(k,v){var attrs={};attrs[k]=v;return{type:"inlineAttr",attrs:attrs};},peg$c15=function(id,attrs){return{type:"node",id:id,attrs:attrs||{}};},peg$c16=function(lhs,rhs,attrs){var elems=[lhs];for(var i=0;i<rhs.length;++i){elems.push(rhs[i]);}return{type:"edge",elems:elems,attrs:attrs||{}};},peg$c17=function(id,stmts){id=(id&&id[2])||[];return{type:"subgraph",id:id[0],stmts:stmts};},peg$c18=function(first,rest){var result=first;for(var i=0;i<rest.length;++i){_.merge(result,rest[i][1]);}return result;},peg$c19="[",peg$c20={type:"literal",value:"[",description:"\"[\""},peg$c21="]",peg$c22={type:"literal",value:"]",description:"\"]\""},peg$c23=function(aList){return aList;},peg$c24=",",peg$c25={type:"literal",value:",",description:"\",\""},peg$c26=function(first,rest){var result=first;for(var i=0;i<rest.length;++i){_.merge(result,rest[i][3]);}return result;},peg$c27="--",peg$c28={type:"literal",value:"--",description:"\"--\""},peg$c29=function(){return directed;},peg$c30=void 0,peg$c31="->",peg$c32={type:"literal",value:"->",description:"\"->\""},peg$c33=function(rhs,rest){var result=[rhs];if(rest){for(var i=0;i<rest.length;++i){result.push(rest[i]);}}return result;},peg$c34=function(k,v){var result={};result[k]=v[3];return result;},peg$c35=function(id){return{type:"node",id:id,attrs:{}};},peg$c36=function(id){return id;},peg$c37=":",peg$c38={type:"literal",value:":",description:"\":\""},peg$c39="ne",peg$c40={type:"literal",value:"ne",description:"\"ne\""},peg$c41="se",peg$c42={type:"literal",value:"se",description:"\"se\""},peg$c43="sw",peg$c44={type:"literal",value:"sw",description:"\"sw\""},peg$c45="nw",peg$c46={type:"literal",value:"nw",description:"\"nw\""},peg$c47="n",peg$c48={type:"literal",value:"n",description:"\"n\""},peg$c49="e",peg$c50={type:"literal",value:"e",description:"\"e\""},peg$c51="s",peg$c52={type:"literal",value:"s",description:"\"s\""},peg$c53="w",peg$c54={type:"literal",value:"w",description:"\"w\""},peg$c55="c",peg$c56={type:"literal",value:"c",description:"\"c\""},peg$c57="_",peg$c58={type:"literal",value:"_",description:"\"_\""},peg$c59={type:"other",description:"identifier"},peg$c60=/^[a-zA-Z\u0200-\u0377_]/,peg$c61={type:"class",value:"[a-zA-Z\\u0200-\\u0377_]",description:"[a-zA-Z\\u0200-\\u0377_]"},peg$c62=/^[a-zA-Z\u0200-\u0377_0-9]/,peg$c63={type:"class",value:"[a-zA-Z\\u0200-\\u0377_0-9]",description:"[a-zA-Z\\u0200-\\u0377_0-9]"},peg$c64=function(fst,rest){return fst+rest.join("");},peg$c65="-",peg$c66={type:"literal",value:"-",description:"\"-\""},peg$c67=".",peg$c68={type:"literal",value:".",description:"\".\""},peg$c69=/^[0-9]/,peg$c70={type:"class",value:"[0-9]",description:"[0-9]"},peg$c71=function(sign,dot,after){return(sign||"")+dot+after.join("");},peg$c72=function(sign,before,after){return(sign||"")+before.join("")+(after?after[0]:"")+(after?after[1].join(""):"");},peg$c73="\"",peg$c74={type:"literal",value:"\"",description:"\"\\\"\""},peg$c75="\\\"",peg$c76={type:"literal",value:"\\\"",description:"\"\\\\\\\"\""},peg$c77=function(){return'"';},peg$c78="\\",peg$c79={type:"literal",value:"\\",description:"\"\\\\\""},peg$c80=/^[^"]/,peg$c81={type:"class",value:"[^\"]",description:"[^\"]"},peg$c82=function(ch){return"\\"+ch;},peg$c83=function(id){return id.join("");},peg$c84="node",peg$c85={type:"literal",value:"node",description:"\"node\""},peg$c86=function(k){return k.toLowerCase();},peg$c87="edge",peg$c88={type:"literal",value:"edge",description:"\"edge\""},peg$c89="graph",peg$c90={type:"literal",value:"graph",description:"\"graph\""},peg$c91="digraph",peg$c92={type:"literal",value:"digraph",description:"\"digraph\""},peg$c93="subgraph",peg$c94={type:"literal",value:"subgraph",description:"\"subgraph\""},peg$c95="strict",peg$c96={type:"literal",value:"strict",description:"\"strict\""},peg$c97=function(graph){directed=graph==="digraph";return graph;},peg$c98={type:"other",description:"whitespace"},peg$c99=/^[ \t\r\n]/,peg$c100={type:"class",value:"[ \\t\\r\\n]",description:"[ \\t\\r\\n]"},peg$c101={type:"other",description:"comment"},peg$c102="//",peg$c103={type:"literal",value:"//",description:"\"//\""},peg$c104=/^[^\n]/,peg$c105={type:"class",value:"[^\\n]",description:"[^\\n]"},peg$c106="/*",peg$c107={type:"literal",value:"/*",description:"\"/*\""},peg$c108="*/",peg$c109={type:"literal",value:"*/",description:"\"*/\""},peg$c110={type:"any",description:"any character"},peg$currPos=0,peg$reportedPos=0,peg$cachedPos=0,peg$cachedPosDetails={line:1,column:1,seenCR:false},peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+"\".");}peg$startRuleFunction=peg$startRuleFunctions[options.startRule];}function text(){return input.substring(peg$reportedPos,peg$currPos);}function offset(){return peg$reportedPos;}function line(){return peg$computePosDetails(peg$reportedPos).line;}function column(){return peg$computePosDetails(peg$reportedPos).column;}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],peg$reportedPos);}function error(message){throw peg$buildException(message,null,peg$reportedPos);}function peg$computePosDetails(pos){function advance(details,startPos,endPos){var p,ch;for(p=startPos;p<endPos;p++){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++;}details.column=1;details.seenCR=false;}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true;}else{details.column++;details.seenCR=false;}}}if(peg$cachedPos!==pos){if(peg$cachedPos>pos){peg$cachedPos=0;peg$cachedPosDetails={line:1,column:1,seenCR:false};}advance(peg$cachedPosDetails,peg$cachedPos,pos);peg$cachedPos=pos;}return peg$cachedPosDetails;}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return;}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[];}peg$maxFailExpected.push(expected);}function peg$buildException(message,expected,pos){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){if(a.description<b.description){return-1;}else if(a.description>b.description){return 1;}else{return 0;}});while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1);}else{i++;}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase();}return s.replace(/\\/g,'\\\\').replace(/"/g,'\\"').replace(/\x08/g,'\\b').replace(/\t/g,'\\t').replace(/\n/g,'\\n').replace(/\f/g,'\\f').replace(/\r/g,'\\r').replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return'\\x0'+hex(ch);}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return'\\x'+hex(ch);}).replace(/[\u0180-\u0FFF]/g,function(ch){return'\\u0'+hex(ch);}).replace(/[\u1080-\uFFFF]/g,function(ch){return'\\u'+hex(ch);});}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description;}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?"\""+stringEscape(found)+"\"":"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found.";}var posDetails=peg$computePosDetails(pos),found=pos<input.length?input.charAt(pos):null;if(expected!==null){cleanupExpected(expected);}return new SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,pos,posDetails.line,posDetails.column);}function peg$parsestart(){var s0,s1;s0=[];s1=peg$parsegraphStmt();if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);s1=peg$parsegraphStmt();}}else{s0=peg$c1;}return s0;}function peg$parsegraphStmt(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9,s10,s11,s12,s13;s0=peg$currPos;s1=[];s2=peg$parse_();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parse_();}if(s1!==peg$FAILED){s2=peg$currPos;s3=peg$parsestrict();if(s3!==peg$FAILED){s4=peg$parse_();if(s4!==peg$FAILED){s3=[s3,s4];s2=s3;}else{peg$currPos=s2;s2=peg$c1;}}else{peg$currPos=s2;s2=peg$c1;}if(s2===peg$FAILED){s2=peg$c2;}if(s2!==peg$FAILED){s3=peg$parsegraphType();if(s3!==peg$FAILED){s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_();}if(s4!==peg$FAILED){s5=peg$parseid();if(s5===peg$FAILED){s5=peg$c2;}if(s5!==peg$FAILED){s6=[];s7=peg$parse_();while(s7!==peg$FAILED){s6.push(s7);s7=peg$parse_();}if(s6!==peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s7=peg$c3;peg$currPos++;}else{s7=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c4);}}if(s7!==peg$FAILED){s8=[];s9=peg$parse_();while(s9!==peg$FAILED){s8.push(s9);s9=peg$parse_();}if(s8!==peg$FAILED){s9=peg$parsestmtList();if(s9===peg$FAILED){s9=peg$c2;}if(s9!==peg$FAILED){s10=[];s11=peg$parse_();while(s11!==peg$FAILED){s10.push(s11);s11=peg$parse_();}if(s10!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s11=peg$c5;peg$currPos++;}else{s11=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6);}}if(s11!==peg$FAILED){s12=[];s13=peg$parse_();while(s13!==peg$FAILED){s12.push(s13);s13=peg$parse_();}if(s12!==peg$FAILED){peg$reportedPos=s0;s1=peg$c7(s2,s3,s5,s9);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parsestmtList(){var s0,s1,s2,s3,s4,s5,s6,s7,s8,s9;s0=peg$currPos;s1=peg$parsestmt();if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_();}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s3=peg$c8;peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c9);}}if(s3===peg$FAILED){s3=peg$c2;}if(s3!==peg$FAILED){s4=[];s5=peg$currPos;s6=[];s7=peg$parse_();while(s7!==peg$FAILED){s6.push(s7);s7=peg$parse_();}if(s6!==peg$FAILED){s7=peg$parsestmt();if(s7!==peg$FAILED){s8=[];s9=peg$parse_();while(s9!==peg$FAILED){s8.push(s9);s9=peg$parse_();}if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s9=peg$c8;peg$currPos++;}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c9);}}if(s9===peg$FAILED){s9=peg$c2;}if(s9!==peg$FAILED){s6=[s6,s7,s8,s9];s5=s6;}else{peg$currPos=s5;s5=peg$c1;}}else{peg$currPos=s5;s5=peg$c1;}}else{peg$currPos=s5;s5=peg$c1;}}else{peg$currPos=s5;s5=peg$c1;}while(s5!==peg$FAILED){s4.push(s5);s5=peg$currPos;s6=[];s7=peg$parse_();while(s7!==peg$FAILED){s6.push(s7);s7=peg$parse_();}if(s6!==peg$FAILED){s7=peg$parsestmt();if(s7!==peg$FAILED){s8=[];s9=peg$parse_();while(s9!==peg$FAILED){s8.push(s9);s9=peg$parse_();}if(s8!==peg$FAILED){if(input.charCodeAt(peg$currPos)===59){s9=peg$c8;peg$currPos++;}else{s9=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c9);}}if(s9===peg$FAILED){s9=peg$c2;}if(s9!==peg$FAILED){s6=[s6,s7,s8,s9];s5=s6;}else{peg$currPos=s5;s5=peg$c1;}}else{peg$currPos=s5;s5=peg$c1;}}else{peg$currPos=s5;s5=peg$c1;}}else{peg$currPos=s5;s5=peg$c1;}}if(s4!==peg$FAILED){peg$reportedPos=s0;s1=peg$c10(s1,s4);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parsestmt(){var s0;s0=peg$parseattrStmt();if(s0===peg$FAILED){s0=peg$parseedgeStmt();if(s0===peg$FAILED){s0=peg$parsesubgraphStmt();if(s0===peg$FAILED){s0=peg$parseinlineAttrStmt();if(s0===peg$FAILED){s0=peg$parsenodeStmt();}}}}return s0;}function peg$parseattrStmt(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parsegraph();if(s1===peg$FAILED){s1=peg$parsenode();if(s1===peg$FAILED){s1=peg$parseedge();}}if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_();}if(s2!==peg$FAILED){s3=peg$parseattrList();if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c11(s1,s3);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parseinlineAttrStmt(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseid();if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_();}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s3=peg$c12;peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13);}}if(s3!==peg$FAILED){s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_();}if(s4!==peg$FAILED){s5=peg$parseid();if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c14(s1,s5);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parsenodeStmt(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parsenodeId();if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_();}if(s2!==peg$FAILED){s3=peg$parseattrList();if(s3===peg$FAILED){s3=peg$c2;}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c15(s1,s3);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parseedgeStmt(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parsenodeIdOrSubgraph();if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_();}if(s2!==peg$FAILED){s3=peg$parseedgeRHS();if(s3!==peg$FAILED){s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_();}if(s4!==peg$FAILED){s5=peg$parseattrList();if(s5===peg$FAILED){s5=peg$c2;}if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c16(s1,s3,s5);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parsesubgraphStmt(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$currPos;s2=peg$parsesubgraph();if(s2!==peg$FAILED){s3=[];s4=peg$parse_();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parse_();}if(s3!==peg$FAILED){s4=peg$currPos;s5=peg$parseid();if(s5!==peg$FAILED){s6=[];s7=peg$parse_();while(s7!==peg$FAILED){s6.push(s7);s7=peg$parse_();}if(s6!==peg$FAILED){s5=[s5,s6];s4=s5;}else{peg$currPos=s4;s4=peg$c1;}}else{peg$currPos=s4;s4=peg$c1;}if(s4===peg$FAILED){s4=peg$c2;}if(s4!==peg$FAILED){s2=[s2,s3,s4];s1=s2;}else{peg$currPos=s1;s1=peg$c1;}}else{peg$currPos=s1;s1=peg$c1;}}else{peg$currPos=s1;s1=peg$c1;}if(s1===peg$FAILED){s1=peg$c2;}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===123){s2=peg$c3;peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c4);}}if(s2!==peg$FAILED){s3=[];s4=peg$parse_();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parse_();}if(s3!==peg$FAILED){s4=peg$parsestmtList();if(s4===peg$FAILED){s4=peg$c2;}if(s4!==peg$FAILED){s5=[];s6=peg$parse_();while(s6!==peg$FAILED){s5.push(s6);s6=peg$parse_();}if(s5!==peg$FAILED){if(input.charCodeAt(peg$currPos)===125){s6=peg$c5;peg$currPos++;}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c6);}}if(s6!==peg$FAILED){peg$reportedPos=s0;s1=peg$c17(s1,s4);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parseattrList(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseattrListBlock();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_();}if(s4!==peg$FAILED){s5=peg$parseattrListBlock();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_();}if(s4!==peg$FAILED){s5=peg$parseattrListBlock();if(s5!==peg$FAILED){s4=[s4,s5];s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c18(s1,s2);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parseattrListBlock(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===91){s1=peg$c19;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c20);}}if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_();}if(s2!==peg$FAILED){s3=peg$parseaList();if(s3===peg$FAILED){s3=peg$c2;}if(s3!==peg$FAILED){s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_();}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===93){s5=peg$c21;peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c22);}}if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c23(s3);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parseaList(){var s0,s1,s2,s3,s4,s5,s6,s7;s0=peg$currPos;s1=peg$parseidDef();if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_();}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s5=peg$c24;peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25);}}if(s5===peg$FAILED){s5=peg$c2;}if(s5!==peg$FAILED){s6=[];s7=peg$parse_();while(s7!==peg$FAILED){s6.push(s7);s7=peg$parse_();}if(s6!==peg$FAILED){s7=peg$parseidDef();if(s7!==peg$FAILED){s4=[s4,s5,s6,s7];s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_();}if(s4!==peg$FAILED){if(input.charCodeAt(peg$currPos)===44){s5=peg$c24;peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25);}}if(s5===peg$FAILED){s5=peg$c2;}if(s5!==peg$FAILED){s6=[];s7=peg$parse_();while(s7!==peg$FAILED){s6.push(s7);s7=peg$parse_();}if(s6!==peg$FAILED){s7=peg$parseidDef();if(s7!==peg$FAILED){s4=[s4,s5,s6,s7];s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c26(s1,s2);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parseedgeRHS(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$currPos;if(input.substr(peg$currPos,2)===peg$c27){s2=peg$c27;peg$currPos+=2;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c28);}}if(s2!==peg$FAILED){peg$reportedPos=peg$currPos;s3=peg$c29();if(s3){s3=peg$c1;}else{s3=peg$c30;}if(s3!==peg$FAILED){s2=[s2,s3];s1=s2;}else{peg$currPos=s1;s1=peg$c1;}}else{peg$currPos=s1;s1=peg$c1;}if(s1===peg$FAILED){s1=peg$currPos;if(input.substr(peg$currPos,2)===peg$c31){s2=peg$c31;peg$currPos+=2;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c32);}}if(s2!==peg$FAILED){peg$reportedPos=peg$currPos;s3=peg$c29();if(s3){s3=peg$c30;}else{s3=peg$c1;}if(s3!==peg$FAILED){s2=[s2,s3];s1=s2;}else{peg$currPos=s1;s1=peg$c1;}}else{peg$currPos=s1;s1=peg$c1;}}if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_();}if(s2!==peg$FAILED){s3=peg$parsenodeIdOrSubgraph();if(s3!==peg$FAILED){s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_();}if(s4!==peg$FAILED){s5=peg$parseedgeRHS();if(s5===peg$FAILED){s5=peg$c2;}if(s5!==peg$FAILED){peg$reportedPos=s0;s1=peg$c33(s3,s5);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parseidDef(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parseid();if(s1!==peg$FAILED){s2=peg$currPos;s3=[];s4=peg$parse_();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parse_();}if(s3!==peg$FAILED){if(input.charCodeAt(peg$currPos)===61){s4=peg$c12;peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13);}}if(s4!==peg$FAILED){s5=[];s6=peg$parse_();while(s6!==peg$FAILED){s5.push(s6);s6=peg$parse_();}if(s5!==peg$FAILED){s6=peg$parseid();if(s6!==peg$FAILED){s3=[s3,s4,s5,s6];s2=s3;}else{peg$currPos=s2;s2=peg$c1;}}else{peg$currPos=s2;s2=peg$c1;}}else{peg$currPos=s2;s2=peg$c1;}}else{peg$currPos=s2;s2=peg$c1;}if(s2===peg$FAILED){s2=peg$c2;}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c34(s1,s2);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parsenodeIdOrSubgraph(){var s0,s1;s0=peg$parsesubgraphStmt();if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsenodeId();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c35(s1);}s0=s1;}return s0;}function peg$parsenodeId(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseid();if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_();}if(s2!==peg$FAILED){s3=peg$parseport();if(s3===peg$FAILED){s3=peg$c2;}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c36(s1);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parseport(){var s0,s1,s2,s3,s4,s5,s6,s7,s8;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===58){s1=peg$c37;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c38);}}if(s1!==peg$FAILED){s2=[];s3=peg$parse_();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parse_();}if(s2!==peg$FAILED){s3=peg$parseid();if(s3!==peg$FAILED){s4=[];s5=peg$parse_();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parse_();}if(s4!==peg$FAILED){s5=peg$currPos;if(input.charCodeAt(peg$currPos)===58){s6=peg$c37;peg$currPos++;}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c38);}}if(s6!==peg$FAILED){s7=[];s8=peg$parse_();while(s8!==peg$FAILED){s7.push(s8);s8=peg$parse_();}if(s7!==peg$FAILED){s8=peg$parsecompassPt();if(s8!==peg$FAILED){s6=[s6,s7,s8];s5=s6;}else{peg$currPos=s5;s5=peg$c1;}}else{peg$currPos=s5;s5=peg$c1;}}else{peg$currPos=s5;s5=peg$c1;}if(s5===peg$FAILED){s5=peg$c2;}if(s5!==peg$FAILED){s1=[s1,s2,s3,s4,s5];s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}return s0;}function peg$parsecompassPt(){var s0;if(input.substr(peg$currPos,2)===peg$c39){s0=peg$c39;peg$currPos+=2;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c40);}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c41){s0=peg$c41;peg$currPos+=2;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c42);}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c43){s0=peg$c43;peg$currPos+=2;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c44);}}if(s0===peg$FAILED){if(input.substr(peg$currPos,2)===peg$c45){s0=peg$c45;peg$currPos+=2;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c46);}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===110){s0=peg$c47;peg$currPos++;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c48);}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===101){s0=peg$c49;peg$currPos++;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c50);}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===115){s0=peg$c51;peg$currPos++;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c52);}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===119){s0=peg$c53;peg$currPos++;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c54);}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===99){s0=peg$c55;peg$currPos++;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c56);}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===95){s0=peg$c57;peg$currPos++;}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c58);}}}}}}}}}}}return s0;}function peg$parseid(){var s0,s1,s2,s3,s4,s5,s6;peg$silentFails++;s0=peg$currPos;if(peg$c60.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c61);}}if(s1!==peg$FAILED){s2=[];if(peg$c62.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c63);}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c62.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c63);}}}if(s2!==peg$FAILED){peg$reportedPos=s0;s1=peg$c64(s1,s2);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===45){s1=peg$c65;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c66);}}if(s1===peg$FAILED){s1=peg$c2;}if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===46){s2=peg$c67;peg$currPos++;}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c68);}}if(s2!==peg$FAILED){s3=[];if(peg$c69.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70);}}if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);if(peg$c69.test(input.charAt(peg$currPos))){s4=input.charAt(peg$currPos);peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70);}}}}else{s3=peg$c1;}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c71(s1,s2,s3);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===45){s1=peg$c65;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c66);}}if(s1===peg$FAILED){s1=peg$c2;}if(s1!==peg$FAILED){s2=[];if(peg$c69.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70);}}if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);if(peg$c69.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70);}}}}else{s2=peg$c1;}if(s2!==peg$FAILED){s3=peg$currPos;if(input.charCodeAt(peg$currPos)===46){s4=peg$c67;peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c68);}}if(s4!==peg$FAILED){s5=[];if(peg$c69.test(input.charAt(peg$currPos))){s6=input.charAt(peg$currPos);peg$currPos++;}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70);}}while(s6!==peg$FAILED){s5.push(s6);if(peg$c69.test(input.charAt(peg$currPos))){s6=input.charAt(peg$currPos);peg$currPos++;}else{s6=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c70);}}}if(s5!==peg$FAILED){s4=[s4,s5];s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}if(s3===peg$FAILED){s3=peg$c2;}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c72(s1,s2,s3);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}if(s0===peg$FAILED){s0=peg$currPos;if(input.charCodeAt(peg$currPos)===34){s1=peg$c73;peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c74);}}if(s1!==peg$FAILED){s2=[];s3=peg$currPos;if(input.substr(peg$currPos,2)===peg$c75){s4=peg$c75;peg$currPos+=2;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76);}}if(s4!==peg$FAILED){peg$reportedPos=s3;s4=peg$c77();}s3=s4;if(s3===peg$FAILED){s3=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s4=peg$c78;peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c79);}}if(s4!==peg$FAILED){if(peg$c80.test(input.charAt(peg$currPos))){s5=input.charAt(peg$currPos);peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c81);}}if(s5!==peg$FAILED){peg$reportedPos=s3;s4=peg$c82(s5);s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}if(s3===peg$FAILED){if(peg$c80.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c81);}}}}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;if(input.substr(peg$currPos,2)===peg$c75){s4=peg$c75;peg$currPos+=2;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c76);}}if(s4!==peg$FAILED){peg$reportedPos=s3;s4=peg$c77();}s3=s4;if(s3===peg$FAILED){s3=peg$currPos;if(input.charCodeAt(peg$currPos)===92){s4=peg$c78;peg$currPos++;}else{s4=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c79);}}if(s4!==peg$FAILED){if(peg$c80.test(input.charAt(peg$currPos))){s5=input.charAt(peg$currPos);peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c81);}}if(s5!==peg$FAILED){peg$reportedPos=s3;s4=peg$c82(s5);s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}if(s3===peg$FAILED){if(peg$c80.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c81);}}}}}if(s2!==peg$FAILED){if(input.charCodeAt(peg$currPos)===34){s3=peg$c73;peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c74);}}if(s3!==peg$FAILED){peg$reportedPos=s0;s1=peg$c83(s2);s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c59);}}return s0;}function peg$parsenode(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,4).toLowerCase()===peg$c84){s1=input.substr(peg$currPos,4);peg$currPos+=4;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c85);}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c86(s1);}s0=s1;return s0;}function peg$parseedge(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,4).toLowerCase()===peg$c87){s1=input.substr(peg$currPos,4);peg$currPos+=4;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c88);}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c86(s1);}s0=s1;return s0;}function peg$parsegraph(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,5).toLowerCase()===peg$c89){s1=input.substr(peg$currPos,5);peg$currPos+=5;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c90);}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c86(s1);}s0=s1;return s0;}function peg$parsedigraph(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,7).toLowerCase()===peg$c91){s1=input.substr(peg$currPos,7);peg$currPos+=7;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c92);}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c86(s1);}s0=s1;return s0;}function peg$parsesubgraph(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,8).toLowerCase()===peg$c93){s1=input.substr(peg$currPos,8);peg$currPos+=8;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c94);}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c86(s1);}s0=s1;return s0;}function peg$parsestrict(){var s0,s1;s0=peg$currPos;if(input.substr(peg$currPos,6).toLowerCase()===peg$c95){s1=input.substr(peg$currPos,6);peg$currPos+=6;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c96);}}if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c86(s1);}s0=s1;return s0;}function peg$parsegraphType(){var s0,s1;s0=peg$parsegraph();if(s0===peg$FAILED){s0=peg$currPos;s1=peg$parsedigraph();if(s1!==peg$FAILED){peg$reportedPos=s0;s1=peg$c97(s1);}s0=s1;}return s0;}function peg$parsewhitespace(){var s0,s1;peg$silentFails++;s0=[];if(peg$c99.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c100);}}if(s1!==peg$FAILED){while(s1!==peg$FAILED){s0.push(s1);if(peg$c99.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c100);}}}}else{s0=peg$c1;}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c98);}}return s0;}function peg$parsecomment(){var s0,s1,s2,s3,s4,s5;peg$silentFails++;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c102){s1=peg$c102;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c103);}}if(s1!==peg$FAILED){s2=[];if(peg$c104.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c105);}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c104.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c105);}}}if(s2!==peg$FAILED){s1=[s1,s2];s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}if(s0===peg$FAILED){s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c106){s1=peg$c106;peg$currPos+=2;}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c107);}}if(s1!==peg$FAILED){s2=[];s3=peg$currPos;s4=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c108){s5=peg$c108;peg$currPos+=2;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c109);}}peg$silentFails--;if(s5===peg$FAILED){s4=peg$c30;}else{peg$currPos=s4;s4=peg$c1;}if(s4!==peg$FAILED){if(input.length>peg$currPos){s5=input.charAt(peg$currPos);peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c110);}}if(s5!==peg$FAILED){s4=[s4,s5];s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}while(s3!==peg$FAILED){s2.push(s3);s3=peg$currPos;s4=peg$currPos;peg$silentFails++;if(input.substr(peg$currPos,2)===peg$c108){s5=peg$c108;peg$currPos+=2;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c109);}}peg$silentFails--;if(s5===peg$FAILED){s4=peg$c30;}else{peg$currPos=s4;s4=peg$c1;}if(s4!==peg$FAILED){if(input.length>peg$currPos){s5=input.charAt(peg$currPos);peg$currPos++;}else{s5=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c110);}}if(s5!==peg$FAILED){s4=[s4,s5];s3=s4;}else{peg$currPos=s3;s3=peg$c1;}}else{peg$currPos=s3;s3=peg$c1;}}if(s2!==peg$FAILED){if(input.substr(peg$currPos,2)===peg$c108){s3=peg$c108;peg$currPos+=2;}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c109);}}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1;}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}else{peg$currPos=s0;s0=peg$c1;}}peg$silentFails--;if(s0===peg$FAILED){s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c101);}}return s0;}function peg$parse_(){var s0;s0=peg$parsewhitespace();if(s0===peg$FAILED){s0=peg$parsecomment();}return s0;}var _=require("./lodash");var directed;peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result;}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"});}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos);}}return{SyntaxError:SyntaxError,parse:parse};})();},{"./lodash":25}],24:[function(require,module,exports){var graphlib;if(require){try{graphlib=require("graphlib");}catch(e){}}if(!graphlib){graphlib=window.graphlib;}module.exports=graphlib;},{"graphlib":30}],25:[function(require,module,exports){var lodash;if(require){try{lodash=require("lodash");}catch(e){}}if(!lodash){lodash=window._;}module.exports=lodash;},{"lodash":51}],26:[function(require,module,exports){var _=require("./lodash"),grammar=require("./dot-grammar"),buildGraph=require("./build-graph");module.exports=function readMany(str){var parseTree=grammar.parse(str);return _.map(parseTree,buildGraph);};},{"./build-graph":22,"./dot-grammar":23,"./lodash":25}],27:[function(require,module,exports){var grammar=require("./dot-grammar"),buildGraph=require("./build-graph");module.exports=function readOne(str){var parseTree=grammar.parse(str,{startRule:"graphStmt"});return buildGraph(parseTree);};},{"./build-graph":22,"./dot-grammar":23}],28:[function(require,module,exports){module.exports='0.6.2';},{}],29:[function(require,module,exports){var _=require("./lodash");module.exports=writeOne;var UNESCAPED_ID_PATTERN=/^[a-zA-Z\200-\377_][a-zA-Z\200-\377_0-9]*$/;function writeOne(g){var ec=g.isDirected()?"->":"--",writer=new Writer();if(!g.isMultigraph()){writer.write("strict ");}writer.writeLine((g.isDirected()?"digraph":"graph")+" {");writer.indent();var graphAttrs=g.graph();if(_.isObject(graphAttrs)){_.each(graphAttrs,function(v,k){writer.writeLine(id(k)+"="+id(v)+";");});}writeSubgraph(g,undefined,writer);g.edges().forEach(function(edge){writeEdge(g,edge,ec,writer);});writer.unindent();writer.writeLine("}");return writer.toString();}function writeSubgraph(g,v,writer){var children=g.isCompound()?g.children(v):g.nodes();_.each(children,function(w){if(!g.isCompound()||!g.children(w).length){writeNode(g,w,writer);}else{writer.writeLine("subgraph "+id(w)+" {");writer.indent();if(_.isObject(g.node(w))){_.map(g.node(w),function(val,key){writer.writeLine(id(key)+"="+id(val)+";");});}writeSubgraph(g,w,writer);writer.unindent();writer.writeLine("}");}});}function writeNode(g,v,writer){writer.write(id(v));writeAttrs(g.node(v),writer);writer.writeLine();}function writeEdge(g,edge,ec,writer){var v=edge.v,w=edge.w,attrs=g.edge(edge);writer.write(id(v)+" "+ec+" "+id(w));writeAttrs(attrs,writer);writer.writeLine();}function writeAttrs(attrs,writer){if(_.isObject(attrs)){var attrStrs=_.map(attrs,function(val,key){return id(key)+"="+id(val);});if(attrStrs.length){writer.write(" ["+attrStrs.join(",")+"]");}}}function id(obj){if(typeof obj==="number"||obj.toString().match(UNESCAPED_ID_PATTERN)){return obj;}return"\""+obj.toString().replace(/"/g,"\\\"")+"\"";}function Writer(){this._indent="";this._content="";this._shouldIndent=true;}Writer.prototype.INDENT="  ";Writer.prototype.indent=function(){this._indent+=this.INDENT;};Writer.prototype.unindent=function(){this._indent=this._indent.slice(this.INDENT.length);};Writer.prototype.writeLine=function(line){this.write((line||"")+"\n");this._shouldIndent=true;};Writer.prototype.write=function(str){if(this._shouldIndent){this._shouldIndent=false;this._content+=this._indent;}this._content+=str;};Writer.prototype.toString=function(){return this._content;};},{"./lodash":25}],30:[function(require,module,exports){var lib=require("./lib");module.exports={Graph:lib.Graph,json:require("./lib/json"),alg:require("./lib/alg"),version:lib.version};},{"./lib":46,"./lib/alg":37,"./lib/json":47}],31:[function(require,module,exports){var _=require("../lodash");module.exports=components;function components(g){var visited={},cmpts=[],cmpt;function dfs(v){if(_.has(visited,v))return;visited[v]=true;cmpt.push(v);_.each(g.successors(v),dfs);_.each(g.predecessors(v),dfs);}_.each(g.nodes(),function(v){cmpt=[];dfs(v);if(cmpt.length){cmpts.push(cmpt);}});return cmpts;}},{"../lodash":48}],32:[function(require,module,exports){var _=require("../lodash");module.exports=dfs;function dfs(g,vs,order){if(!_.isArray(vs)){vs=[vs];}var acc=[],visited={};_.each(vs,function(v){if(!g.hasNode(v)){throw new Error("Graph does not have node: "+v);}doDfs(g,v,order==="post",visited,acc);});return acc;}function doDfs(g,v,postorder,visited,acc){if(!_.has(visited,v)){visited[v]=true;if(!postorder){acc.push(v);}_.each(g.neighbors(v),function(w){doDfs(g,w,postorder,visited,acc);});if(postorder){acc.push(v);}}}},{"../lodash":48}],33:[function(require,module,exports){var dijkstra=require("./dijkstra"),_=require("../lodash");module.exports=dijkstraAll;function dijkstraAll(g,weightFunc,edgeFunc){return _.transform(g.nodes(),function(acc,v){acc[v]=dijkstra(g,v,weightFunc,edgeFunc);},{});}},{"../lodash":48,"./dijkstra":34}],34:[function(require,module,exports){var _=require("../lodash"),PriorityQueue=require("../data/priority-queue");module.exports=dijkstra;var DEFAULT_WEIGHT_FUNC=_.constant(1);function dijkstra(g,source,weightFn,edgeFn){return runDijkstra(g,String(source),weightFn||DEFAULT_WEIGHT_FUNC,edgeFn||function(v){return g.outEdges(v);});}function runDijkstra(g,source,weightFn,edgeFn){var results={},pq=new PriorityQueue(),v,vEntry;var updateNeighbors=function(edge){var w=edge.v!==v?edge.v:edge.w,wEntry=results[w],weight=weightFn(edge),distance=vEntry.distance+weight;if(weight<0){throw new Error("dijkstra does not allow negative edge weights. "+"Bad edge: "+edge+" Weight: "+weight);}if(distance<wEntry.distance){wEntry.distance=distance;wEntry.predecessor=v;pq.decrease(w,distance);}};g.nodes().forEach(function(v){var distance=v===source?0:Number.POSITIVE_INFINITY;results[v]={distance:distance};pq.add(v,distance);});while(pq.size()>0){v=pq.removeMin();vEntry=results[v];if(vEntry.distance===Number.POSITIVE_INFINITY){break;}edgeFn(v).forEach(updateNeighbors);}return results;}},{"../data/priority-queue":44,"../lodash":48}],35:[function(require,module,exports){var _=require("../lodash"),tarjan=require("./tarjan");module.exports=findCycles;function findCycles(g){return _.filter(tarjan(g),function(cmpt){return cmpt.length>1||(cmpt.length===1&&g.hasEdge(cmpt[0],cmpt[0]));});}},{"../lodash":48,"./tarjan":42}],36:[function(require,module,exports){var _=require("../lodash");module.exports=floydWarshall;var DEFAULT_WEIGHT_FUNC=_.constant(1);function floydWarshall(g,weightFn,edgeFn){return runFloydWarshall(g,weightFn||DEFAULT_WEIGHT_FUNC,edgeFn||function(v){return g.outEdges(v);});}function runFloydWarshall(g,weightFn,edgeFn){var results={},nodes=g.nodes();nodes.forEach(function(v){results[v]={};results[v][v]={distance:0};nodes.forEach(function(w){if(v!==w){results[v][w]={distance:Number.POSITIVE_INFINITY};}});edgeFn(v).forEach(function(edge){var w=edge.v===v?edge.w:edge.v,d=weightFn(edge);results[v][w]={distance:d,predecessor:v};});});nodes.forEach(function(k){var rowK=results[k];nodes.forEach(function(i){var rowI=results[i];nodes.forEach(function(j){var ik=rowI[k];var kj=rowK[j];var ij=rowI[j];var altDistance=ik.distance+kj.distance;if(altDistance<ij.distance){ij.distance=altDistance;ij.predecessor=kj.predecessor;}});});});return results;}},{"../lodash":48}],37:[function(require,module,exports){module.exports={components:require("./components"),dijkstra:require("./dijkstra"),dijkstraAll:require("./dijkstra-all"),findCycles:require("./find-cycles"),floydWarshall:require("./floyd-warshall"),isAcyclic:require("./is-acyclic"),postorder:require("./postorder"),preorder:require("./preorder"),prim:require("./prim"),tarjan:require("./tarjan"),topsort:require("./topsort")};},{"./components":31,"./dijkstra":34,"./dijkstra-all":33,"./find-cycles":35,"./floyd-warshall":36,"./is-acyclic":38,"./postorder":39,"./preorder":40,"./prim":41,"./tarjan":42,"./topsort":43}],38:[function(require,module,exports){var topsort=require("./topsort");module.exports=isAcyclic;function isAcyclic(g){try{topsort(g);}catch(e){if(e instanceof topsort.CycleException){return false;}throw e;}return true;}},{"./topsort":43}],39:[function(require,module,exports){var dfs=require("./dfs");module.exports=postorder;function postorder(g,vs){return dfs(g,vs,"post");}},{"./dfs":32}],40:[function(require,module,exports){var dfs=require("./dfs");module.exports=preorder;function preorder(g,vs){return dfs(g,vs,"pre");}},{"./dfs":32}],41:[function(require,module,exports){var _=require("../lodash"),Graph=require("../graph"),PriorityQueue=require("../data/priority-queue");module.exports=prim;function prim(g,weightFunc){var result=new Graph(),parents={},pq=new PriorityQueue(),v;function updateNeighbors(edge){var w=edge.v===v?edge.w:edge.v,pri=pq.priority(w);if(pri!==undefined){var edgeWeight=weightFunc(edge);if(edgeWeight<pri){parents[w]=v;pq.decrease(w,edgeWeight);}}}if(g.nodeCount()===0){return result;}_.each(g.nodes(),function(v){pq.add(v,Number.POSITIVE_INFINITY);result.setNode(v);});pq.decrease(g.nodes()[0],0);var init=false;while(pq.size()>0){v=pq.removeMin();if(_.has(parents,v)){result.setEdge(v,parents[v]);}else if(init){throw new Error("Input graph is not connected: "+g);}else{init=true;}g.nodeEdges(v).forEach(updateNeighbors);}return result;}},{"../data/priority-queue":44,"../graph":45,"../lodash":48}],42:[function(require,module,exports){var _=require("../lodash");module.exports=tarjan;function tarjan(g){var index=0,stack=[],visited={},results=[];function dfs(v){var entry=visited[v]={onStack:true,lowlink:index,index:index++};stack.push(v);g.successors(v).forEach(function(w){if(!_.has(visited,w)){dfs(w);entry.lowlink=Math.min(entry.lowlink,visited[w].lowlink);}else if(visited[w].onStack){entry.lowlink=Math.min(entry.lowlink,visited[w].index);}});if(entry.lowlink===entry.index){var cmpt=[],w;do{w=stack.pop();visited[w].onStack=false;cmpt.push(w);}while(v!==w);results.push(cmpt);}}g.nodes().forEach(function(v){if(!_.has(visited,v)){dfs(v);}});return results;}},{"../lodash":48}],43:[function(require,module,exports){var _=require("../lodash");module.exports=topsort;topsort.CycleException=CycleException;function topsort(g){var visited={},stack={},results=[];function visit(node){if(_.has(stack,node)){throw new CycleException();}if(!_.has(visited,node)){stack[node]=true;visited[node]=true;_.each(g.predecessors(node),visit);delete stack[node];results.push(node);}}_.each(g.sinks(),visit);if(_.size(visited)!==g.nodeCount()){throw new CycleException();}return results;}function CycleException(){}},{"../lodash":48}],44:[function(require,module,exports){var _=require("../lodash");module.exports=PriorityQueue;function PriorityQueue(){this._arr=[];this._keyIndices={};}PriorityQueue.prototype.size=function(){return this._arr.length;};PriorityQueue.prototype.keys=function(){return this._arr.map(function(x){return x.key;});};PriorityQueue.prototype.has=function(key){return _.has(this._keyIndices,key);};PriorityQueue.prototype.priority=function(key){var index=this._keyIndices[key];if(index!==undefined){return this._arr[index].priority;}};PriorityQueue.prototype.min=function(){if(this.size()===0){throw new Error("Queue underflow");}return this._arr[0].key;};PriorityQueue.prototype.add=function(key,priority){var keyIndices=this._keyIndices;key=String(key);if(!_.has(keyIndices,key)){var arr=this._arr;var index=arr.length;keyIndices[key]=index;arr.push({key:key,priority:priority});this._decrease(index);return true;}return false;};PriorityQueue.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var min=this._arr.pop();delete this._keyIndices[min.key];this._heapify(0);return min.key;};PriorityQueue.prototype.decrease=function(key,priority){var index=this._keyIndices[key];if(priority>this._arr[index].priority){throw new Error("New priority is greater than current priority. "+"Key: "+key+" Old: "+this._arr[index].priority+" New: "+priority);}this._arr[index].priority=priority;this._decrease(index);};PriorityQueue.prototype._heapify=function(i){var arr=this._arr;var l=2*i,r=l+1,largest=i;if(l<arr.length){largest=arr[l].priority<arr[largest].priority?l:largest;if(r<arr.length){largest=arr[r].priority<arr[largest].priority?r:largest;}if(largest!==i){this._swap(i,largest);this._heapify(largest);}}};PriorityQueue.prototype._decrease=function(index){var arr=this._arr;var priority=arr[index].priority;var parent;while(index!==0){parent=index>>1;if(arr[parent].priority<priority){break;}this._swap(index,parent);index=parent;}};PriorityQueue.prototype._swap=function(i,j){var arr=this._arr;var keyIndices=this._keyIndices;var origArrI=arr[i];var origArrJ=arr[j];arr[i]=origArrJ;arr[j]=origArrI;keyIndices[origArrJ.key]=i;keyIndices[origArrI.key]=j;};},{"../lodash":48}],45:[function(require,module,exports){"use strict";var _=require("./lodash");module.exports=Graph;var DEFAULT_EDGE_NAME="\x00",GRAPH_NODE="\x00",EDGE_KEY_DELIM="\x01";function Graph(opts){this._isDirected=_.has(opts,"directed")?opts.directed:true;this._isMultigraph=_.has(opts,"multigraph")?opts.multigraph:false;this._isCompound=_.has(opts,"compound")?opts.compound:false;this._label=undefined;this._defaultNodeLabelFn=_.constant(undefined);this._defaultEdgeLabelFn=_.constant(undefined);this._nodes={};if(this._isCompound){this._parent={};this._children={};this._children[GRAPH_NODE]={};}this._in={};this._preds={};this._out={};this._sucs={};this._edgeObjs={};this._edgeLabels={};}Graph.prototype._nodeCount=0;Graph.prototype._edgeCount=0;Graph.prototype.isDirected=function(){return this._isDirected;};Graph.prototype.isMultigraph=function(){return this._isMultigraph;};Graph.prototype.isCompound=function(){return this._isCompound;};Graph.prototype.setGraph=function(label){this._label=label;return this;};Graph.prototype.graph=function(){return this._label;};Graph.prototype.setDefaultNodeLabel=function(newDefault){if(!_.isFunction(newDefault)){newDefault=_.constant(newDefault);}this._defaultNodeLabelFn=newDefault;return this;};Graph.prototype.nodeCount=function(){return this._nodeCount;};Graph.prototype.nodes=function(){return _.keys(this._nodes);};Graph.prototype.sources=function(){return _.filter(this.nodes(),function(v){return _.isEmpty(this._in[v]);},this);};Graph.prototype.sinks=function(){return _.filter(this.nodes(),function(v){return _.isEmpty(this._out[v]);},this);};Graph.prototype.setNodes=function(vs,value){var args=arguments;_.each(vs,function(v){if(args.length>1){this.setNode(v,value);}else{this.setNode(v);}},this);return this;};Graph.prototype.setNode=function(v,value){if(_.has(this._nodes,v)){if(arguments.length>1){this._nodes[v]=value;}return this;}this._nodes[v]=arguments.length>1?value:this._defaultNodeLabelFn(v);if(this._isCompound){this._parent[v]=GRAPH_NODE;this._children[v]={};this._children[GRAPH_NODE][v]=true;}this._in[v]={};this._preds[v]={};this._out[v]={};this._sucs[v]={};++this._nodeCount;return this;};Graph.prototype.node=function(v){return this._nodes[v];};Graph.prototype.hasNode=function(v){return _.has(this._nodes,v);};Graph.prototype.removeNode=function(v){var self=this;if(_.has(this._nodes,v)){var removeEdge=function(e){self.removeEdge(self._edgeObjs[e]);};delete this._nodes[v];if(this._isCompound){this._removeFromParentsChildList(v);delete this._parent[v];_.each(this.children(v),function(child){this.setParent(child);},this);delete this._children[v];}_.each(_.keys(this._in[v]),removeEdge);delete this._in[v];delete this._preds[v];_.each(_.keys(this._out[v]),removeEdge);delete this._out[v];delete this._sucs[v];--this._nodeCount;}return this;};Graph.prototype.setParent=function(v,parent){if(!this._isCompound){throw new Error("Cannot set parent in a non-compound graph");}if(_.isUndefined(parent)){parent=GRAPH_NODE;}else{parent+="";for(var ancestor=parent;!_.isUndefined(ancestor);ancestor=this.parent(ancestor)){if(ancestor===v){throw new Error("Setting "+parent+" as parent of "+v+" would create create a cycle");}}this.setNode(parent);}this.setNode(v);this._removeFromParentsChildList(v);this._parent[v]=parent;this._children[parent][v]=true;return this;};Graph.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v];};Graph.prototype.parent=function(v){if(this._isCompound){var parent=this._parent[v];if(parent!==GRAPH_NODE){return parent;}}};Graph.prototype.children=function(v){if(_.isUndefined(v)){v=GRAPH_NODE;}if(this._isCompound){var children=this._children[v];if(children){return _.keys(children);}}else if(v===GRAPH_NODE){return this.nodes();}else if(this.hasNode(v)){return[];}};Graph.prototype.predecessors=function(v){var predsV=this._preds[v];if(predsV){return _.keys(predsV);}};Graph.prototype.successors=function(v){var sucsV=this._sucs[v];if(sucsV){return _.keys(sucsV);}};Graph.prototype.neighbors=function(v){var preds=this.predecessors(v);if(preds){return _.union(preds,this.successors(v));}};Graph.prototype.filterNodes=function(filter){var copy=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});copy.setGraph(this.graph());_.each(this._nodes,function(value,v){if(filter(v)){copy.setNode(v,value);}},this);_.each(this._edgeObjs,function(e){if(copy.hasNode(e.v)&&copy.hasNode(e.w)){copy.setEdge(e,this.edge(e));}},this);var self=this;var parents={};function findParent(v){var parent=self.parent(v);if(parent===undefined||copy.hasNode(parent)){parents[v]=parent;return parent;}else if(parent in parents){return parents[parent];}else{return findParent(parent);}}if(this._isCompound){_.each(copy.nodes(),function(v){copy.setParent(v,findParent(v));});}return copy;};Graph.prototype.setDefaultEdgeLabel=function(newDefault){if(!_.isFunction(newDefault)){newDefault=_.constant(newDefault);}this._defaultEdgeLabelFn=newDefault;return this;};Graph.prototype.edgeCount=function(){return this._edgeCount;};Graph.prototype.edges=function(){return _.values(this._edgeObjs);};Graph.prototype.setPath=function(vs,value){var self=this,args=arguments;_.reduce(vs,function(v,w){if(args.length>1){self.setEdge(v,w,value);}else{self.setEdge(v,w);}return w;});return this;};Graph.prototype.setEdge=function(){var v,w,name,value,valueSpecified=false,arg0=arguments[0];if(typeof arg0==="object"&&arg0!==null&&"v"in arg0){v=arg0.v;w=arg0.w;name=arg0.name;if(arguments.length===2){value=arguments[1];valueSpecified=true;}}else{v=arg0;w=arguments[1];name=arguments[3];if(arguments.length>2){value=arguments[2];valueSpecified=true;}}v=""+v;w=""+w;if(!_.isUndefined(name)){name=""+name;}var e=edgeArgsToId(this._isDirected,v,w,name);if(_.has(this._edgeLabels,e)){if(valueSpecified){this._edgeLabels[e]=value;}return this;}if(!_.isUndefined(name)&&!this._isMultigraph){throw new Error("Cannot set a named edge when isMultigraph = false");}this.setNode(v);this.setNode(w);this._edgeLabels[e]=valueSpecified?value:this._defaultEdgeLabelFn(v,w,name);var edgeObj=edgeArgsToObj(this._isDirected,v,w,name);v=edgeObj.v;w=edgeObj.w;Object.freeze(edgeObj);this._edgeObjs[e]=edgeObj;incrementOrInitEntry(this._preds[w],v);incrementOrInitEntry(this._sucs[v],w);this._in[w][e]=edgeObj;this._out[v][e]=edgeObj;this._edgeCount++;return this;};Graph.prototype.edge=function(v,w,name){var e=(arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v,w,name));return this._edgeLabels[e];};Graph.prototype.hasEdge=function(v,w,name){var e=(arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v,w,name));return _.has(this._edgeLabels,e);};Graph.prototype.removeEdge=function(v,w,name){var e=(arguments.length===1?edgeObjToId(this._isDirected,arguments[0]):edgeArgsToId(this._isDirected,v,w,name)),edge=this._edgeObjs[e];if(edge){v=edge.v;w=edge.w;delete this._edgeLabels[e];delete this._edgeObjs[e];decrementOrRemoveEntry(this._preds[w],v);decrementOrRemoveEntry(this._sucs[v],w);delete this._in[w][e];delete this._out[v][e];this._edgeCount--;}return this;};Graph.prototype.inEdges=function(v,u){var inV=this._in[v];if(inV){var edges=_.values(inV);if(!u){return edges;}return _.filter(edges,function(edge){return edge.v===u;});}};Graph.prototype.outEdges=function(v,w){var outV=this._out[v];if(outV){var edges=_.values(outV);if(!w){return edges;}return _.filter(edges,function(edge){return edge.w===w;});}};Graph.prototype.nodeEdges=function(v,w){var inEdges=this.inEdges(v,w);if(inEdges){return inEdges.concat(this.outEdges(v,w));}};function incrementOrInitEntry(map,k){if(map[k]){map[k]++;}else{map[k]=1;}}function decrementOrRemoveEntry(map,k){if(!--map[k]){delete map[k];}}function edgeArgsToId(isDirected,v_,w_,name){var v=""+v_;var w=""+w_;if(!isDirected&&v>w){var tmp=v;v=w;w=tmp;}return v+EDGE_KEY_DELIM+w+EDGE_KEY_DELIM+(_.isUndefined(name)?DEFAULT_EDGE_NAME:name);}function edgeArgsToObj(isDirected,v_,w_,name){var v=""+v_;var w=""+w_;if(!isDirected&&v>w){var tmp=v;v=w;w=tmp;}var edgeObj={v:v,w:w};if(name){edgeObj.name=name;}return edgeObj;}function edgeObjToId(isDirected,edgeObj){return edgeArgsToId(isDirected,edgeObj.v,edgeObj.w,edgeObj.name);}},{"./lodash":48}],46:[function(require,module,exports){module.exports={Graph:require("./graph"),version:require("./version")};},{"./graph":45,"./version":49}],47:[function(require,module,exports){var _=require("./lodash"),Graph=require("./graph");module.exports={write:write,read:read};function write(g){var json={options:{directed:g.isDirected(),multigraph:g.isMultigraph(),compound:g.isCompound()},nodes:writeNodes(g),edges:writeEdges(g)};if(!_.isUndefined(g.graph())){json.value=_.clone(g.graph());}return json;}function writeNodes(g){return _.map(g.nodes(),function(v){var nodeValue=g.node(v),parent=g.parent(v),node={v:v};if(!_.isUndefined(nodeValue)){node.value=nodeValue;}if(!_.isUndefined(parent)){node.parent=parent;}return node;});}function writeEdges(g){return _.map(g.edges(),function(e){var edgeValue=g.edge(e),edge={v:e.v,w:e.w};if(!_.isUndefined(e.name)){edge.name=e.name;}if(!_.isUndefined(edgeValue)){edge.value=edgeValue;}return edge;});}function read(json){var g=new Graph(json.options).setGraph(json.value);_.each(json.nodes,function(entry){g.setNode(entry.v,entry.value);if(entry.parent){g.setParent(entry.v,entry.parent);}});_.each(json.edges,function(entry){g.setEdge({v:entry.v,w:entry.w,name:entry.name},entry.value);});return g;}},{"./graph":45,"./lodash":48}],48:[function(require,module,exports){var lodash;if(typeof require==="function"){try{lodash=require("lodash");}catch(e){}}if(!lodash){lodash=window._;}module.exports=lodash;},{"lodash":50}],49:[function(require,module,exports){module.exports='1.0.7';},{}],50:[function(require,module,exports){(function(global){;(function(){var undefined;var VERSION='3.10.1';var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION='...';var HOT_COUNT=150,HOT_SPAN=16;var LARGE_ARRAY_SIZE=200;var LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2;var FUNC_ERROR_TEXT='Expected a function';var PLACEHOLDER='__lodash_placeholder__';var argsTag='[object Arguments]',arrayTag='[object Array]',boolTag='[object Boolean]',dateTag='[object Date]',errorTag='[object Error]',funcTag='[object Function]',mapTag='[object Map]',numberTag='[object Number]',objectTag='[object Object]',regexpTag='[object RegExp]',setTag='[object Set]',stringTag='[object String]',weakMapTag='[object WeakMap]';var arrayBufferTag='[object ArrayBuffer]',float32Tag='[object Float32Array]',float64Tag='[object Float64Array]',int8Tag='[object Int8Array]',int16Tag='[object Int16Array]',int32Tag='[object Int32Array]',uint8Tag='[object Uint8Array]',uint8ClampedTag='[object Uint8ClampedArray]',uint16Tag='[object Uint16Array]',uint32Tag='[object Uint32Array]';var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;var reRegExpChars=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,reHasRegExpChars=RegExp(reRegExpChars.source);var reComboMark=/[\u0300-\u036f\ufe20-\ufe23]/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reHasHexPrefix=/^0[xX]/;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reIsUint=/^\d+$/;var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var reWords=(function(){var upper='[A-Z\\xc0-\\xd6\\xd8-\\xde]',lower='[a-z\\xdf-\\xf6\\xf8-\\xff]+';return RegExp(upper+'+(?='+upper+lower+')|'+upper+'?'+lower+'|'+upper+'+|[0-9]+','g');}());var contextProps=['Array','ArrayBuffer','Date','Error','Float32Array','Float64Array','Function','Int8Array','Int16Array','Int32Array','Math','Number','Object','RegExp','Set','String','_','clearTimeout','isFinite','parseFloat','parseInt','setTimeout','TypeError','Uint8Array','Uint8ClampedArray','Uint16Array','Uint32Array','WeakMap'];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=false;var deburredLetters={'\xc0':'A','\xc1':'A','\xc2':'A','\xc3':'A','\xc4':'A','\xc5':'A','\xe0':'a','\xe1':'a','\xe2':'a','\xe3':'a','\xe4':'a','\xe5':'a','\xc7':'C','\xe7':'c','\xd0':'D','\xf0':'d','\xc8':'E','\xc9':'E','\xca':'E','\xcb':'E','\xe8':'e','\xe9':'e','\xea':'e','\xeb':'e','\xcC':'I','\xcd':'I','\xce':'I','\xcf':'I','\xeC':'i','\xed':'i','\xee':'i','\xef':'i','\xd1':'N','\xf1':'n','\xd2':'O','\xd3':'O','\xd4':'O','\xd5':'O','\xd6':'O','\xd8':'O','\xf2':'o','\xf3':'o','\xf4':'o','\xf5':'o','\xf6':'o','\xf8':'o','\xd9':'U','\xda':'U','\xdb':'U','\xdc':'U','\xf9':'u','\xfa':'u','\xfb':'u','\xfc':'u','\xdd':'Y','\xfd':'y','\xff':'y','\xc6':'Ae','\xe6':'ae','\xde':'Th','\xfe':'th','\xdf':'ss'};var htmlEscapes={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;','`':'&#96;'};var htmlUnescapes={'&amp;':'&','&lt;':'<','&gt;':'>','&quot;':'"','&#39;':"'",'&#96;':'`'};var objectTypes={'function':true,'object':true};var regexpEscapes={'0':'x30','1':'x31','2':'x32','3':'x33','4':'x34','5':'x35','6':'x36','7':'x37','8':'x38','9':'x39','A':'x41','B':'x42','C':'x43','D':'x44','E':'x45','F':'x46','a':'x61','b':'x62','c':'x63','d':'x64','e':'x65','f':'x66','n':'x6e','r':'x72','t':'x74','u':'x75','v':'x76','x':'x78'};var stringEscapes={'\\':'\\',"'":"'",'\n':'n','\r':'r','\u2028':'u2028','\u2029':'u2029'};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&typeof global=='object'&&global&&global.Object&&global;var freeSelf=objectTypes[typeof self]&&self&&self.Object&&self;var freeWindow=objectTypes[typeof window]&&window&&window.Object&&window;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var root=freeGlobal||((freeWindow!==(this&&this.window))&&freeWindow)||freeSelf||this;function baseCompareAscending(value,other){if(value!==other){var valIsNull=value===null,valIsUndef=value===undefined,valIsReflexive=value===value;var othIsNull=other===null,othIsUndef=other===undefined,othIsReflexive=other===other;if((value>other&&!othIsNull)||!valIsReflexive||(valIsNull&&!othIsUndef&&othIsReflexive)||(valIsUndef&&othIsReflexive)){return 1;}if((value<other&&!valIsNull)||!othIsReflexive||(othIsNull&&!valIsUndef&&valIsReflexive)||(othIsUndef&&valIsReflexive)){return-1;}}return 0;}function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)){if(predicate(array[index],index,array)){return index;}}return-1;}function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex);}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index;}}return-1;}function baseIsFunction(value){return typeof value=='function'||false;}function baseToString(value){return value==null?'':(value+'');}function charsLeftIndex(string,chars){var index=-1,length=string.length;while(++index<length&&chars.indexOf(string.charAt(index))>-1){}return index;}function charsRightIndex(string,chars){var index=string.length;while(index--&&chars.indexOf(string.charAt(index))>-1){}return index;}function compareAscending(object,other){return baseCompareAscending(object.criteria,other.criteria)||(object.index-other.index);}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=baseCompareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result;}var order=orders[index];return result*((order==='asc'||order===true)?1:-1);}}return object.index-other.index;}function deburrLetter(letter){return deburredLetters[letter];}function escapeHtmlChar(chr){return htmlEscapes[chr];}function escapeRegExpChar(chr,leadingChar,whitespaceChar){if(leadingChar){chr=regexpEscapes[chr];}else if(whitespaceChar){chr=stringEscapes[chr];}return'\\'+chr;}function escapeStringChar(chr){return'\\'+stringEscapes[chr];}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);while((fromRight?index--:++index<length)){var other=array[index];if(other!==other){return index;}}return-1;}function isObjectLike(value){return!!value&&typeof value=='object';}function isSpace(charCode){return((charCode<=160&&(charCode>=9&&charCode<=13)||charCode==32||charCode==160)||charCode==5760||charCode==6158||(charCode>=8192&&(charCode<=8202||charCode==8232||charCode==8233||charCode==8239||charCode==8287||charCode==12288||charCode==65279)));}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){if(array[index]===placeholder){array[index]=PLACEHOLDER;result[++resIndex]=index;}}return result;}function sortedUniq(array,iteratee){var seen,index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(!index||seen!==computed){seen=computed;result[++resIndex]=value;}}return result;}function trimmedLeftIndex(string){var index=-1,length=string.length;while(++index<length&&isSpace(string.charCodeAt(index))){}return index;}function trimmedRightIndex(string){var index=string.length;while(index--&&isSpace(string.charCodeAt(index))){}return index;}function unescapeHtmlChar(chr){return htmlUnescapes[chr];}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,objectProto=Object.prototype,stringProto=String.prototype;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var objToString=objectProto.toString;var oldDash=root._;var reIsNative=RegExp('^'+fnToString.call(hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var ArrayBuffer=context.ArrayBuffer,clearTimeout=context.clearTimeout,parseFloat=context.parseFloat,pow=Math.pow,propertyIsEnumerable=objectProto.propertyIsEnumerable,Set=getNative(context,'Set'),setTimeout=context.setTimeout,splice=arrayProto.splice,Uint8Array=context.Uint8Array,WeakMap=getNative(context,'WeakMap');var nativeCeil=Math.ceil,nativeCreate=getNative(Object,'create'),nativeFloor=Math.floor,nativeIsArray=getNative(Array,'isArray'),nativeIsFinite=context.isFinite,nativeKeys=getNative(Object,'keys'),nativeMax=Math.max,nativeMin=Math.min,nativeNow=getNative(Date,'now'),nativeParseInt=context.parseInt,nativeRandom=Math.random;var NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY;var MAX_ARRAY_LENGTH=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var MAX_SAFE_INTEGER=9007199254740991;var metaMap=WeakMap&&new WeakMap;var realNames={};function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value;}if(hasOwnProperty.call(value,'__chain__')&&hasOwnProperty.call(value,'__wrapped__')){return wrapperClone(value);}}return new LodashWrapper(value);}function baseLodash(){}function LodashWrapper(value,chainAll,actions){this.__wrapped__=value;this.__actions__=actions||[];this.__chain__=!!chainAll;}var support=lodash.support={};lodash.templateSettings={'escape':reEscape,'evaluate':reEvaluate,'interpolate':reInterpolate,'variable':'','imports':{'_':lodash}};function LazyWrapper(value){this.__wrapped__=value;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=POSITIVE_INFINITY;this.__views__=[];}function lazyClone(){var result=new LazyWrapper(this.__wrapped__);result.__actions__=arrayCopy(this.__actions__);result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=arrayCopy(this.__iteratees__);result.__takeCount__=this.__takeCount__;result.__views__=arrayCopy(this.__views__);return result;}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true;}else{result=this.clone();result.__dir__*=-1;}return result;}function lazyValue(){var array=this.__wrapped__.value(),dir=this.__dir__,isArr=isArray(array),isRight=dir<0,arrLength=isArr?array.length:0,view=getView(0,arrLength,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:(start-1),iteratees=this.__iteratees__,iterLength=iteratees.length,resIndex=0,takeCount=nativeMin(length,this.__takeCount__);if(!isArr||arrLength<LARGE_ARRAY_SIZE||(arrLength==length&&takeCount==length)){return baseWrapperValue((isRight&&isArr)?array.reverse():array,this.__actions__);}var result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type,computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed;}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer;}else{break outer;}}}result[resIndex++]=value;}return result;}function MapCache(){this.__data__={};}function mapDelete(key){return this.has(key)&&delete this.__data__[key];}function mapGet(key){return key=='__proto__'?undefined:this.__data__[key];}function mapHas(key){return key!='__proto__'&&hasOwnProperty.call(this.__data__,key);}function mapSet(key,value){if(key!='__proto__'){this.__data__[key]=value;}return this;}function SetCache(values){var length=values?values.length:0;this.data={'hash':nativeCreate(null),'set':new Set};while(length--){this.push(values[length]);}}function cacheIndexOf(cache,value){var data=cache.data,result=(typeof value=='string'||isObject(value))?data.set.has(value):data.hash[value];return result?0:-1;}function cachePush(value){var data=this.data;if(typeof value=='string'||isObject(value)){data.set.add(value);}else{data.hash[value]=true;}}function arrayConcat(array,other){var index=-1,length=array.length,othIndex=-1,othLength=other.length,result=Array(length+othLength);while(++index<length){result[index]=array[index];}while(++othIndex<othLength){result[index++]=other[othIndex];}return result;}function arrayCopy(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index];}return array;}function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break;}}return array;}function arrayEachRight(array,iteratee){var length=array.length;while(length--){if(iteratee(array[length],length,array)===false){break;}}return array;}function arrayEvery(array,predicate){var index=-1,length=array.length;while(++index<length){if(!predicate(array[index],index,array)){return false;}}return true;}function arrayExtremum(array,iteratee,comparator,exValue){var index=-1,length=array.length,computed=exValue,result=computed;while(++index<length){var value=array[index],current=+iteratee(value);if(comparator(current,computed)){computed=current;result=value;}}return result;}function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[++resIndex]=value;}}return result;}function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array);}return result;}function arrayPush(array,values){var index=-1,length=values.length,offset=array.length;while(++index<length){array[offset+index]=values[index];}return array;}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;if(initFromArray&&length){accumulator=array[++index];}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array);}return accumulator;}function arrayReduceRight(array,iteratee,accumulator,initFromArray){var length=array.length;if(initFromArray&&length){accumulator=array[--length];}while(length--){accumulator=iteratee(accumulator,array[length],length,array);}return accumulator;}function arraySome(array,predicate){var index=-1,length=array.length;while(++index<length){if(predicate(array[index],index,array)){return true;}}return false;}function arraySum(array,iteratee){var length=array.length,result=0;while(length--){result+=+iteratee(array[length])||0;}return result;}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue;}function assignOwnDefaults(objectValue,sourceValue,key,object){return(objectValue===undefined||!hasOwnProperty.call(object,key))?sourceValue:objectValue;}function assignWith(object,source,customizer){var index=-1,props=keys(source),length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?(result!==value):(value===value))||(value===undefined&&!(key in object))){object[key]=result;}}return object;}function baseAssign(object,source){return source==null?object:baseCopy(source,keys(source),object);}function baseAt(collection,props){var index=-1,isNil=collection==null,isArr=!isNil&&isArrayLike(collection),length=isArr?collection.length:0,propsLength=props.length,result=Array(propsLength);while(++index<propsLength){var key=props[index];if(isArr){result[index]=isIndex(key,length)?collection[key]:undefined;}else{result[index]=isNil?undefined:collection[key];}}return result;}function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key];}return object;}function baseCallback(func,thisArg,argCount){var type=typeof func;if(type=='function'){return thisArg===undefined?func:bindCallback(func,thisArg,argCount);}if(func==null){return identity;}if(type=='object'){return baseMatches(func);}return thisArg===undefined?property(func):baseMatchesProperty(func,thisArg);}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer){result=object?customizer(value,key,object):customizer(value);}if(result!==undefined){return result;}if(!isObject(value)){return value;}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return arrayCopy(value,result);}}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag==objectTag||tag==argsTag||(isFunc&&!object)){result=initCloneObject(isFunc?{}:value);if(!isDeep){return baseAssign(result,value);}}else{return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):(object?value:{});}}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length];}}stackA.push(value);stackB.push(result);(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB);});return result;}var baseCreate=(function(){function object(){}return function(prototype){if(isObject(prototype)){object.prototype=prototype;var result=new object;object.prototype=undefined;}return result||{};};}());function baseDelay(func,wait,args){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return setTimeout(function(){func.apply(undefined,args);},wait);}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length){return result;}var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=(isCommon&&values.length>=LARGE_ARRAY_SIZE)?createCache(values):null,valuesLength=values.length;if(cache){indexOf=cacheIndexOf;isCommon=false;values=cache;}outer:while(++index<length){var value=array[index];if(isCommon&&value===value){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===value){continue outer;}}result.push(value);}else if(indexOf(values,value,0)<0){result.push(value);}}return result;}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result;});return result;}function baseExtremum(collection,iteratee,comparator,exValue){var computed=exValue,result=computed;baseEach(collection,function(value,index,collection){var current=+iteratee(value,index,collection);if(comparator(current,computed)||(current===exValue&&current===result)){computed=current;result=value;}});return result;}function baseFill(array,value,start,end){var length=array.length;start=start==null?0:(+start||0);if(start<0){start=-start>length?0:(length+start);}end=(end===undefined||end>length)?length:(+end||0);if(end<0){end+=length;}length=start>end?0:(end>>>0);start>>>=0;while(start<length){array[start++]=value;}return array;}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value);}});return result;}function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=retKey?key:value;return false;}});return result;}function baseFlatten(array,isDeep,isStrict,result){result||(result=[]);var index=-1,length=array.length;while(++index<length){var value=array[index];if(isObjectLike(value)&&isArrayLike(value)&&(isStrict||isArray(value)||isArguments(value))){if(isDeep){baseFlatten(value,isDeep,isStrict,result);}else{arrayPush(result,value);}}else if(!isStrict){result[result.length]=value;}}return result;}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn);}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys);}function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys);}function baseFunctions(object,props){var index=-1,length=props.length,resIndex=-1,result=[];while(++index<length){var key=props[index];if(isFunction(object[key])){result[++resIndex]=key;}}return result;}function baseGet(object,path,pathKey){if(object==null){return;}if(pathKey!==undefined&&pathKey in toObject(object)){path=[pathKey];}var index=0,length=path.length;while(object!=null&&index<length){object=object[path[index++]];}return(index&&index==length)?object:undefined;}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other){return true;}if(value==null||other==null||(!isObject(value)&&!isObjectLike(other))){return value!==value&&other!==other;}return baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB);}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=objToString.call(object);if(objTag==argsTag){objTag=objectTag;}else if(objTag!=objectTag){objIsArr=isTypedArray(object);}}if(!othIsArr){othTag=objToString.call(other);if(othTag==argsTag){othTag=objectTag;}else if(othTag!=objectTag){othIsArr=isTypedArray(other);}}var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!(objIsArr||objIsObj)){return equalByTag(object,other,objTag);}if(!isLoose){var objIsWrapped=objIsObj&&hasOwnProperty.call(object,'__wrapped__'),othIsWrapped=othIsObj&&hasOwnProperty.call(other,'__wrapped__');if(objIsWrapped||othIsWrapped){return equalFunc(objIsWrapped?object.value():object,othIsWrapped?other.value():other,customizer,isLoose,stackA,stackB);}}if(!isSameTag){return false;}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==object){return stackB[length]==other;}}stackA.push(object);stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);stackA.pop();stackB.pop();return result;}function baseIsMatch(object,matchData,customizer){var index=matchData.length,length=index,noCustomizer=!customizer;if(object==null){return!length;}object=toObject(object);while(index--){var data=matchData[index];if((noCustomizer&&data[2])?data[1]!==object[data[0]]:!(data[0]in object)){return false;}}while(++index<length){data=matchData[index];var key=data[0],objValue=object[key],srcValue=data[1];if(noCustomizer&&data[2]){if(objValue===undefined&&!(key in object)){return false;}}else{var result=customizer?customizer(objValue,srcValue,key):undefined;if(!(result===undefined?baseIsEqual(srcValue,objValue,customizer,true):result)){return false;}}}return true;}function baseMap(collection,iteratee){var index=-1,result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection);});return result;}function baseMatches(source){var matchData=getMatchData(source);if(matchData.length==1&&matchData[0][2]){var key=matchData[0][0],value=matchData[0][1];return function(object){if(object==null){return false;}return object[key]===value&&(value!==undefined||(key in toObject(object)));};}return function(object){return baseIsMatch(object,matchData);};}function baseMatchesProperty(path,srcValue){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(srcValue),pathKey=(path+'');path=toPath(path);return function(object){if(object==null){return false;}var key=pathKey;object=toObject(object);if((isArr||!isCommon)&&!(key in object)){object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false;}key=last(path);object=toObject(object);}return object[key]===srcValue?(srcValue!==undefined||(key in object)):baseIsEqual(srcValue,object[key],undefined,true);};}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object)){return object;}var isSrcArr=isArrayLike(source)&&(isArray(source)||isTypedArray(source)),props=isSrcArr?undefined:keys(source);arrayEach(props||source,function(srcValue,key){if(props){key=srcValue;srcValue=source[key];}if(isObjectLike(srcValue)){stackA||(stackA=[]);stackB||(stackB=[]);baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB);}else{var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue;}if((result!==undefined||(isSrcArr&&!(key in object)))&&(isCommon||(result===result?(result!==value):(value===value)))){object[key]=result;}}});return object;}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){var length=stackA.length,srcValue=source[key];while(length--){if(stackA[length]==srcValue){object[key]=stackB[length];return;}}var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue;if(isArrayLike(srcValue)&&(isArray(srcValue)||isTypedArray(srcValue))){result=isArray(value)?value:(isArrayLike(value)?arrayCopy(value):[]);}else if(isPlainObject(srcValue)||isArguments(srcValue)){result=isArguments(value)?toPlainObject(value):(isPlainObject(value)?value:{});}else{isCommon=false;}}stackA.push(srcValue);stackB.push(result);if(isCommon){object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB);}else if(result===result?(result!==value):(value===value)){object[key]=result;}}function baseProperty(key){return function(object){return object==null?undefined:object[key];};}function basePropertyDeep(path){var pathKey=(path+'');path=toPath(path);return function(object){return baseGet(object,path,pathKey);};}function basePullAt(array,indexes){var length=array?indexes.length:0;while(length--){var index=indexes[length];if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1);}}return array;}function baseRandom(min,max){return min+nativeFloor(nativeRandom()*(max-min+1));}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initFromCollection?(initFromCollection=false,value):iteratee(accumulator,value,index,collection);});return accumulator;}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func;};function baseSlice(array,start,end){var index=-1,length=array.length;start=start==null?0:(+start||0);if(start<0){start=-start>length?0:(length+start);}end=(end===undefined||end>length)?length:(+end||0);if(end<0){end+=length;}length=start>end?0:((end-start)>>>0);start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start];}return result;}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result;});return!!result;}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value;}return array;}function baseSortByOrder(collection,iteratees,orders){var callback=getCallback(),index=-1;iteratees=arrayMap(iteratees,function(iteratee){return callback(iteratee);});var result=baseMap(collection,function(value){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value);});return{'criteria':criteria,'index':++index,'value':value};});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders);});}function baseSum(collection,iteratee){var result=0;baseEach(collection,function(value,index,collection){result+=+iteratee(value,index,collection)||0;});return result;}function baseUniq(array,iteratee){var index=-1,indexOf=getIndexOf(),length=array.length,isCommon=indexOf==baseIndexOf,isLarge=isCommon&&length>=LARGE_ARRAY_SIZE,seen=isLarge?createCache():null,result=[];if(seen){indexOf=cacheIndexOf;isCommon=false;}else{isLarge=false;seen=iteratee?[]:result;}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer;}}if(iteratee){seen.push(computed);}result.push(value);}else if(indexOf(seen,computed,0)<0){if(iteratee||isLarge){seen.push(computed);}result.push(value);}}return result;}function baseValues(object,props){var index=-1,length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]];}return result;}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,(fromRight?0:index),(fromRight?index+1:length)):baseSlice(array,(fromRight?index+1:0),(fromRight?length:index));}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value();}var index=-1,length=actions.length;while(++index<length){var action=actions[index];result=action.func.apply(action.thisArg,arrayPush([result],action.args));}return result;}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(typeof value=='number'&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=(low+high)>>>1,computed=array[mid];if((retHighest?(computed<=value):(computed<value))&&computed!==null){low=mid+1;}else{high=mid;}}return high;}return binaryIndexBy(array,value,identity,retHighest);}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsNull=value===null,valIsUndef=value===undefined;while(low<high){var mid=nativeFloor((low+high)/2),computed=iteratee(array[mid]),isDef=computed!==undefined,isReflexive=computed===computed;if(valIsNaN){var setLow=isReflexive||retHighest;}else if(valIsNull){setLow=isReflexive&&isDef&&(retHighest||computed!=null);}else if(valIsUndef){setLow=isReflexive&&(retHighest||isDef);}else if(computed==null){setLow=false;}else{setLow=retHighest?(computed<=value):(computed<value);}if(setLow){low=mid+1;}else{high=mid;}}return nativeMin(high,MAX_ARRAY_INDEX);}function bindCallback(func,thisArg,argCount){if(typeof func!='function'){return identity;}if(thisArg===undefined){return func;}switch(argCount){case 1:return function(value){return func.call(thisArg,value);};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection);};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection);};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source);};}return function(){return func.apply(thisArg,arguments);};}function bufferClone(buffer){var result=new ArrayBuffer(buffer.byteLength),view=new Uint8Array(result);view.set(new Uint8Array(buffer));return result;}function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(leftLength+argsLength);while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex];}while(++argsIndex<holdersLength){result[holders[argsIndex]]=args[argsIndex];}while(argsLength--){result[leftIndex++]=args[argsIndex++];}return result;}function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);while(++argsIndex<argsLength){result[argsIndex]=args[argsIndex];}var offset=argsIndex;while(++rightIndex<rightLength){result[offset+rightIndex]=partials[rightIndex];}while(++holdersIndex<holdersLength){result[offset+holders[holdersIndex]]=args[argsIndex++];}return result;}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};iteratee=getCallback(iteratee,thisArg,3);if(isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection);}}else{baseEach(collection,function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection);});}return result;};}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2?sources[length-2]:undefined,guard=length>2?sources[2]:undefined,thisArg=length>1?sources[length-1]:undefined;if(typeof customizer=='function'){customizer=bindCallback(customizer,thisArg,5);length-=2;}else{customizer=typeof thisArg=='function'?thisArg:undefined;length-=(customizer?1:0);}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?undefined:customizer;length=1;}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer);}}return object;});}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length)){return eachFunc(collection,iteratee);}var index=fromRight?length:-1,iterable=toObject(collection);while((fromRight?index--:++index<length)){if(iteratee(iterable[index],index,iterable)===false){break;}}return collection;};}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)){var key=props[index];if(iteratee(iterable[key],key,iterable)===false){break;}}return object;};}function createBindWrapper(func,thisArg){var Ctor=createCtorWrapper(func);function wrapper(){var fn=(this&&this!==root&&this instanceof wrapper)?Ctor:func;return fn.apply(thisArg,arguments);}return wrapper;}function createCache(values){return(nativeCreate&&Set)?new SetCache(values):null;}function createCompounder(callback){return function(string){var index=-1,array=words(deburr(string)),length=array.length,result='';while(++index<length){result=callback(result,array[index],index);}return result;};}function createCtorWrapper(Ctor){return function(){var args=arguments;switch(args.length){case 0:return new Ctor;case 1:return new Ctor(args[0]);case 2:return new Ctor(args[0],args[1]);case 3:return new Ctor(args[0],args[1],args[2]);case 4:return new Ctor(args[0],args[1],args[2],args[3]);case 5:return new Ctor(args[0],args[1],args[2],args[3],args[4]);case 6:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5]);case 7:return new Ctor(args[0],args[1],args[2],args[3],args[4],args[5],args[6]);}var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,args);return isObject(result)?result:thisBinding;};}function createCurry(flag){function curryFunc(func,arity,guard){if(guard&&isIterateeCall(func,arity,guard)){arity=undefined;}var result=createWrapper(func,flag,undefined,undefined,undefined,undefined,undefined,arity);result.placeholder=curryFunc.placeholder;return result;}return curryFunc;}function createDefaults(assigner,customizer){return restParam(function(args){var object=args[0];if(object==null){return object;}args.push(customizer);return assigner.apply(undefined,args);});}function createExtremum(comparator,exValue){return function(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined;}iteratee=getCallback(iteratee,thisArg,3);if(iteratee.length==1){collection=isArray(collection)?collection:toIterable(collection);var result=arrayExtremum(collection,iteratee,comparator,exValue);if(!(collection.length&&result===exValue)){return result;}}return baseExtremum(collection,iteratee,comparator,exValue);};}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined;}return baseFind(collection,predicate,eachFunc);};}function createFindIndex(fromRight){return function(array,predicate,thisArg){if(!(array&&array.length)){return-1;}predicate=getCallback(predicate,thisArg,3);return baseFindIndex(array,predicate,fromRight);};}function createFindKey(objectFunc){return function(object,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);return baseFind(object,predicate,objectFunc,true);};}function createFlow(fromRight){return function(){var wrapper,length=arguments.length,index=fromRight?length:-1,leftIndex=0,funcs=Array(length);while((fromRight?index--:++index<length)){var func=funcs[leftIndex++]=arguments[index];if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(!wrapper&&LodashWrapper.prototype.thru&&getFuncName(func)=='wrapper'){wrapper=new LodashWrapper([],true);}}index=wrapper?-1:length;while(++index<length){func=funcs[index];var funcName=getFuncName(func),data=funcName=='wrapper'?getData(func):undefined;if(data&&isLaziable(data[0])&&data[1]==(ARY_FLAG|CURRY_FLAG|PARTIAL_FLAG|REARG_FLAG)&&!data[4].length&&data[9]==1){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3]);}else{wrapper=(func.length==1&&isLaziable(func))?wrapper[funcName]():wrapper.thru(func);}}return function(){var args=arguments,value=args[0];if(wrapper&&args.length==1&&isArray(value)&&value.length>=LARGE_ARRAY_SIZE){return wrapper.plant(value).value();}var index=0,result=length?funcs[index].apply(this,args):value;while(++index<length){result=funcs[index].call(this,result);}return result;};};}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return(typeof iteratee=='function'&&thisArg===undefined&&isArray(collection))?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3));};}function createForIn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!='function'||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3);}return objectFunc(object,iteratee,keysIn);};}function createForOwn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!='function'||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3);}return objectFunc(object,iteratee);};}function createObjectMapper(isMapKeys){return function(object,iteratee,thisArg){var result={};iteratee=getCallback(iteratee,thisArg,3);baseForOwn(object,function(value,key,object){var mapped=iteratee(value,key,object);key=isMapKeys?mapped:key;value=isMapKeys?value:mapped;result[key]=value;});return result;};}function createPadDir(fromRight){return function(string,length,chars){string=baseToString(string);return(fromRight?string:'')+createPadding(string,length,chars)+(fromRight?'':string);};}function createPartial(flag){var partialFunc=restParam(function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,undefined,partials,holders);});return partialFunc;}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=arguments.length<3;return(typeof iteratee=='function'&&thisArg===undefined&&isArray(collection))?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc);};}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG,Ctor=isBindKey?undefined:createCtorWrapper(func);function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--){args[index]=arguments[index];}if(partials){args=composeArgs(args,partials,holders);}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight);}if(isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length-=argsHolders.length;if(length<arity){var newArgPos=argPos?arrayCopy(argPos):undefined,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:undefined,newHoldersRight=isCurry?undefined:argsHolders,newPartials=isCurry?args:undefined,newPartialsRight=isCurry?undefined:args;bitmask|=(isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG);bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!isCurryBound){bitmask&=~(BIND_FLAG|BIND_KEY_FLAG);}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);if(isLaziable(func)){setData(result,newData);}result.placeholder=placeholder;return result;}}var thisBinding=isBind?thisArg:this,fn=isBindKey?thisBinding[func]:func;if(argPos){args=reorder(args,argPos);}if(isAry&&ary<args.length){args.length=ary;}if(this&&this!==root&&this instanceof wrapper){fn=Ctor||createCtorWrapper(func);}return fn.apply(thisBinding,args);}return wrapper;}function createPadding(string,length,chars){var strLength=string.length;length=+length;if(strLength>=length||!nativeIsFinite(length)){return'';}var padLength=length-strLength;chars=chars==null?' ':(chars+'');return repeat(chars,nativeCeil(padLength/chars.length)).slice(0,padLength);}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(leftLength+argsLength);while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex];}while(argsLength--){args[leftIndex++]=arguments[++argsIndex];}var fn=(this&&this!==root&&this instanceof wrapper)?Ctor:func;return fn.apply(isBind?thisArg:this,args);}return wrapper;}function createRound(methodName){var func=Math[methodName];return function(number,precision){precision=precision===undefined?0:(+precision||0);if(precision){precision=pow(10,precision);return func(number*precision)/precision;}return func(number);};}function createSortedIndex(retHighest){return function(array,value,iteratee,thisArg){var callback=getCallback(iteratee);return(iteratee==null&&callback===baseCallback)?binaryIndex(array,value,retHighest):binaryIndexBy(array,value,callback(iteratee,thisArg,1),retHighest);};}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}var length=partials?partials.length:0;if(!length){bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG);partials=holders=undefined;}length-=(holders?holders.length:0);if(bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=undefined;}var data=isBindKey?undefined:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);bitmask=newData[1];arity=newData[9];}newData[9]=arity==null?(isBindKey?0:func.length):(nativeMax(arity-length,0)||0);if(bitmask==BIND_FLAG){var result=createBindWrapper(newData[0],newData[2]);}else if((bitmask==PARTIAL_FLAG||bitmask==(BIND_FLAG|PARTIAL_FLAG))&&!newData[4].length){result=createPartialWrapper.apply(undefined,newData);}else{result=createHybridWrapper.apply(undefined,newData);}var setter=data?baseSetData:setData;return setter(result,newData);}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength)){return false;}while(++index<arrLength){var arrValue=array[index],othValue=other[index],result=customizer?customizer(isLoose?othValue:arrValue,isLoose?arrValue:othValue,index):undefined;if(result!==undefined){if(result){continue;}return false;}if(isLoose){if(!arraySome(other,function(othValue){return arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB);})){return false;}}else if(!(arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB))){return false;}}return true;}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return(object!=+object)?other!=+other:object==+other;case regexpTag:case stringTag:return object==(other+'');}return false;}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose){return false;}var index=objLength;while(index--){var key=objProps[index];if(!(isLoose?key in other:hasOwnProperty.call(other,key))){return false;}}var skipCtor=isLoose;while(++index<objLength){key=objProps[index];var objValue=object[key],othValue=other[key],result=customizer?customizer(isLoose?othValue:objValue,isLoose?objValue:othValue,key):undefined;if(!(result===undefined?equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB):result)){return false;}skipCtor||(skipCtor=key=='constructor');}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&('constructor'in object&&'constructor'in other)&&!(typeof objCtor=='function'&&objCtor instanceof objCtor&&typeof othCtor=='function'&&othCtor instanceof othCtor)){return false;}}return true;}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;result=result===callback?baseCallback:result;return argCount?result(func,thisArg,argCount):result;}var getData=!metaMap?noop:function(func){return metaMap.get(func);};function getFuncName(func){var result=func.name,array=realNames[result],length=array?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name;}}return result;}function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;result=result===indexOf?baseIndexOf:result;return collection?result(collection,target,fromIndex):result;}var getLength=baseProperty('length');function getMatchData(object){var result=pairs(object),length=result.length;while(length--){result[length][2]=isStrictComparable(result[length][1]);}return result;}function getNative(object,key){var value=object==null?undefined:object[key];return isNative(value)?value:undefined;}function getView(start,end,transforms){var index=-1,length=transforms.length;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case'drop':start+=size;break;case'dropRight':end-=size;break;case'take':end=nativeMin(end,start+size);break;case'takeRight':start=nativeMax(start,end-size);break;}}return{'start':start,'end':end};}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=='string'&&hasOwnProperty.call(array,'index')){result.index=array.index;result.input=array.input;}return result;}function initCloneObject(object){var Ctor=object.constructor;if(!(typeof Ctor=='function'&&Ctor instanceof Ctor)){Ctor=Object;}return new Ctor;}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex;}return result;}function invokePath(object,path,args){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));path=last(path);}var func=object==null?object:object[path];return func==null?undefined:func.apply(object,args);}function isArrayLike(value){return value!=null&&isLength(getLength(value));}function isIndex(value,length){value=(typeof value=='number'||reIsUint.test(value))?+value:-1;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length;}function isIterateeCall(value,index,object){if(!isObject(object)){return false;}var type=typeof index;if(type=='number'?(isArrayLike(object)&&isIndex(index,object.length)):(type=='string'&&index in object)){var other=object[index];return value===value?(value===other):(other!==other);}return false;}function isKey(value,object){var type=typeof value;if((type=='string'&&reIsPlainProp.test(value))||type=='number'){return true;}if(isArray(value)){return false;}var result=!reIsDeepProp.test(value);return result||(object!=null&&value in toObject(object));}function isLaziable(func){var funcName=getFuncName(func);if(!(funcName in LazyWrapper.prototype)){return false;}var other=lodash[funcName];if(func===other){return true;}var data=getData(other);return!!data&&func===data[0];}function isLength(value){return typeof value=='number'&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER;}function isStrictComparable(value){return value===value&&!isObject(value);}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<ARY_FLAG;var isCombo=(srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG)||(srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8])||(srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG);if(!(isCommon||isCombo)){return data;}if(srcBitmask&BIND_FLAG){data[2]=source[2];newBitmask|=(bitmask&BIND_FLAG)?0:CURRY_BOUND_FLAG;}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value);data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4]);}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value);data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6]);}value=source[7];if(value){data[7]=arrayCopy(value);}if(srcBitmask&ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8]);}if(data[9]==null){data[9]=source[9];}data[0]=source[0];data[1]=newBitmask;return data;}function mergeDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:merge(objectValue,sourceValue,mergeDefaults);}function pickByArray(object,props){object=toObject(object);var index=-1,length=props.length,result={};while(++index<length){var key=props[index];if(key in object){result[key]=object[key];}}return result;}function pickByCallback(object,predicate){var result={};baseForIn(object,function(value,key,object){if(predicate(value,key,object)){result[key]=value;}});return result;}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined;}return array;}var setData=(function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return key;}}else{count=0;}return baseSetData(key,value);};}());function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length;var allowIndexes=!!length&&isLength(length)&&(isArray(object)||isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if((allowIndexes&&isIndex(key,length))||hasOwnProperty.call(object,key)){result.push(key);}}return result;}function toIterable(value){if(value==null){return[];}if(!isArrayLike(value)){return values(value);}return isObject(value)?value:Object(value);}function toObject(value){return isObject(value)?value:Object(value);}function toPath(value){if(isArray(value)){return value;}var result=[];baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,'$1'):(number||match));});return result;}function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__));}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size==null){size=1;}else{size=nativeMax(nativeFloor(size)||1,1);}var index=0,length=array?array.length:0,resIndex=-1,result=Array(nativeCeil(length/size));while(index<length){result[++resIndex]=baseSlice(array,index,(index+=size));}return result;}function compact(array){var index=-1,length=array?array.length:0,resIndex=-1,result=[];while(++index<length){var value=array[index];if(value){result[++resIndex]=value;}}return result;}var difference=restParam(function(array,values){return(isObjectLike(array)&&isArrayLike(array))?baseDifference(array,baseFlatten(values,false,true)):[];});function drop(array,n,guard){var length=array?array.length:0;if(!length){return[];}if(guard?isIterateeCall(array,n,guard):n==null){n=1;}return baseSlice(array,n<0?0:n);}function dropRight(array,n,guard){var length=array?array.length:0;if(!length){return[];}if(guard?isIterateeCall(array,n,guard):n==null){n=1;}n=length-(+n||0);return baseSlice(array,0,n<0?0:n);}function dropRightWhile(array,predicate,thisArg){return(array&&array.length)?baseWhile(array,getCallback(predicate,thisArg,3),true,true):[];}function dropWhile(array,predicate,thisArg){return(array&&array.length)?baseWhile(array,getCallback(predicate,thisArg,3),true):[];}function fill(array,value,start,end){var length=array?array.length:0;if(!length){return[];}if(start&&typeof start!='number'&&isIterateeCall(array,value,start)){start=0;end=length;}return baseFill(array,value,start,end);}var findIndex=createFindIndex();var findLastIndex=createFindIndex(true);function first(array){return array?array[0]:undefined;}function flatten(array,isDeep,guard){var length=array?array.length:0;if(guard&&isIterateeCall(array,isDeep,guard)){isDeep=false;}return length?baseFlatten(array,isDeep):[];}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,true):[];}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1;}if(typeof fromIndex=='number'){fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex;}else if(fromIndex){var index=binaryIndex(array,value);if(index<length&&(value===value?(value===array[index]):(array[index]!==array[index]))){return index;}return-1;}return baseIndexOf(array,value,fromIndex||0);}function initial(array){return dropRight(array,1);}var intersection=restParam(function(arrays){var othLength=arrays.length,othIndex=othLength,caches=Array(length),indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,result=[];while(othIndex--){var value=arrays[othIndex]=isArrayLike(value=arrays[othIndex])?value:[];caches[othIndex]=(isCommon&&value.length>=120)?createCache(othIndex&&value):null;}var array=arrays[0],index=-1,length=array?array.length:0,seen=caches[0];outer:while(++index<length){value=array[index];if((seen?cacheIndexOf(seen,value):indexOf(result,value,0))<0){var othIndex=othLength;while(--othIndex){var cache=caches[othIndex];if((cache?cacheIndexOf(cache,value):indexOf(arrays[othIndex],value,0))<0){continue outer;}}if(seen){seen.push(value);}result.push(value);}}return result;});function last(array){var length=array?array.length:0;return length?array[length-1]:undefined;}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1;}var index=length;if(typeof fromIndex=='number'){index=(fromIndex<0?nativeMax(length+fromIndex,0):nativeMin(fromIndex||0,length-1))+1;}else if(fromIndex){index=binaryIndex(array,value,true)-1;var other=array[index];if(value===value?(value===other):(other!==other)){return index;}return-1;}if(value!==value){return indexOfNaN(array,index,true);}while(index--){if(array[index]===value){return index;}}return-1;}function pull(){var args=arguments,array=args[0];if(!(array&&array.length)){return array;}var index=0,indexOf=getIndexOf(),length=args.length;while(++index<length){var fromIndex=0,value=args[index];while((fromIndex=indexOf(array,value,fromIndex))>-1){splice.call(array,fromIndex,1);}}return array;}var pullAt=restParam(function(array,indexes){indexes=baseFlatten(indexes);var result=baseAt(array,indexes);basePullAt(array,indexes.sort(baseCompareAscending));return result;});function remove(array,predicate,thisArg){var result=[];if(!(array&&array.length)){return result;}var index=-1,indexes=[],length=array.length;predicate=getCallback(predicate,thisArg,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index);}}basePullAt(array,indexes);return result;}function rest(array){return drop(array,1);}function slice(array,start,end){var length=array?array.length:0;if(!length){return[];}if(end&&typeof end!='number'&&isIterateeCall(array,start,end)){start=0;end=length;}return baseSlice(array,start,end);}var sortedIndex=createSortedIndex();var sortedLastIndex=createSortedIndex(true);function take(array,n,guard){var length=array?array.length:0;if(!length){return[];}if(guard?isIterateeCall(array,n,guard):n==null){n=1;}return baseSlice(array,0,n<0?0:n);}function takeRight(array,n,guard){var length=array?array.length:0;if(!length){return[];}if(guard?isIterateeCall(array,n,guard):n==null){n=1;}n=length-(+n||0);return baseSlice(array,n<0?0:n);}function takeRightWhile(array,predicate,thisArg){return(array&&array.length)?baseWhile(array,getCallback(predicate,thisArg,3),false,true):[];}function takeWhile(array,predicate,thisArg){return(array&&array.length)?baseWhile(array,getCallback(predicate,thisArg,3)):[];}var union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,false,true));});function uniq(array,isSorted,iteratee,thisArg){var length=array?array.length:0;if(!length){return[];}if(isSorted!=null&&typeof isSorted!='boolean'){thisArg=iteratee;iteratee=isIterateeCall(array,isSorted,thisArg)?undefined:isSorted;isSorted=false;}var callback=getCallback();if(!(iteratee==null&&callback===baseCallback)){iteratee=callback(iteratee,thisArg,3);}return(isSorted&&getIndexOf()==baseIndexOf)?sortedUniq(array,iteratee):baseUniq(array,iteratee);}function unzip(array){if(!(array&&array.length)){return[];}var index=-1,length=0;array=arrayFilter(array,function(group){if(isArrayLike(group)){length=nativeMax(group.length,length);return true;}});var result=Array(length);while(++index<length){result[index]=arrayMap(array,baseProperty(index));}return result;}function unzipWith(array,iteratee,thisArg){var length=array?array.length:0;if(!length){return[];}var result=unzip(array);if(iteratee==null){return result;}iteratee=bindCallback(iteratee,thisArg,4);return arrayMap(result,function(group){return arrayReduce(group,iteratee,undefined,true);});}var without=restParam(function(array,values){return isArrayLike(array)?baseDifference(array,values):[];});function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArrayLike(array)){var result=result?arrayPush(baseDifference(result,array),baseDifference(array,result)):array;}}return result?baseUniq(result):[];}var zip=restParam(unzip);function zipObject(props,values){var index=-1,length=props?props.length:0,result={};if(length&&!values&&!isArray(props[0])){values=[];}while(++index<length){var key=props[index];if(values){result[key]=values[index];}else if(key){result[key[0]]=key[1];}}return result;}var zipWith=restParam(function(arrays){var length=arrays.length,iteratee=length>2?arrays[length-2]:undefined,thisArg=length>1?arrays[length-1]:undefined;if(length>2&&typeof iteratee=='function'){length-=2;}else{iteratee=(length>1&&typeof thisArg=='function')?(--length,thisArg):undefined;thisArg=undefined;}arrays.length=length;return unzipWith(arrays,iteratee,thisArg);});function chain(value){var result=lodash(value);result.__chain__=true;return result;}function tap(value,interceptor,thisArg){interceptor.call(thisArg,value);return value;}function thru(value,interceptor,thisArg){return interceptor.call(thisArg,value);}function wrapperChain(){return chain(this);}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__);}var wrapperConcat=restParam(function(values){values=baseFlatten(values);return this.thru(function(array){return arrayConcat(isArray(array)?array:[toObject(array)],values);});});function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);if(result){previous.__wrapped__=clone;}else{result=clone;}var previous=clone;parent=parent.__wrapped__;}previous.__wrapped__=value;return result;}function wrapperReverse(){var value=this.__wrapped__;var interceptor=function(value){return(wrapped&&wrapped.__dir__<0)?value:value.reverse();};if(value instanceof LazyWrapper){var wrapped=value;if(this.__actions__.length){wrapped=new LazyWrapper(this);}wrapped=wrapped.reverse();wrapped.__actions__.push({'func':thru,'args':[interceptor],'thisArg':undefined});return new LodashWrapper(wrapped,this.__chain__);}return this.thru(interceptor);}function wrapperToString(){return(this.value()+'');}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__);}var at=restParam(function(collection,props){return baseAt(collection,baseFlatten(props));});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:(result[key]=1);});function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=undefined;}if(typeof predicate!='function'||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3);}return func(collection,predicate);}function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,predicate);}var find=createFind(baseEach);var findLast=createFind(baseEachRight,true);function findWhere(collection,source){return find(collection,baseMatches(source));}var forEach=createForEach(arrayEach,baseEach);var forEachRight=createForEach(arrayEachRight,baseEachRight);var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value);}else{result[key]=[value];}});function includes(collection,target,fromIndex,guard){var length=collection?getLength(collection):0;if(!isLength(length)){collection=values(collection);length=collection.length;}if(typeof fromIndex!='number'||(guard&&isIterateeCall(target,fromIndex,guard))){fromIndex=0;}else{fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):(fromIndex||0);}return(typeof collection=='string'||!isArray(collection)&&isString(collection))?(fromIndex<=length&&collection.indexOf(target,fromIndex)>-1):(!!length&&getIndexOf(collection,target,fromIndex)>-1);}var indexBy=createAggregator(function(result,value,key){result[key]=value;});var invoke=restParam(function(collection,path,args){var index=-1,isFunc=typeof path=='function',isProp=isKey(path),result=isArrayLike(collection)?Array(collection.length):[];baseEach(collection,function(value){var func=isFunc?path:((isProp&&value!=null)?value[path]:undefined);result[++index]=func?func.apply(value,args):invokePath(value,path,args);});return result;});function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;iteratee=getCallback(iteratee,thisArg,3);return func(collection,iteratee);}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value);},function(){return[[],[]];});function pluck(collection,path){return map(collection,property(path));}var reduce=createReduce(arrayReduce,baseEach);var reduceRight=createReduce(arrayReduceRight,baseEachRight);function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,function(value,index,collection){return!predicate(value,index,collection);});}function sample(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n==null){collection=toIterable(collection);var length=collection.length;return length>0?collection[baseRandom(0,length-1)]:undefined;}var index=-1,result=toArray(collection),length=result.length,lastIndex=length-1;n=nativeMin(n<0?0:(+n||0),length);while(++index<n){var rand=baseRandom(index,lastIndex),value=result[rand];result[rand]=result[index];result[index]=value;}result.length=n;return result;}function shuffle(collection){return sample(collection,POSITIVE_INFINITY);}function size(collection){var length=collection?getLength(collection):0;return isLength(length)?length:keys(collection).length;}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=undefined;}if(typeof predicate!='function'||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3);}return func(collection,predicate);}function sortBy(collection,iteratee,thisArg){if(collection==null){return[];}if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined;}var index=-1;iteratee=getCallback(iteratee,thisArg,3);var result=baseMap(collection,function(value,key,collection){return{'criteria':iteratee(value,key,collection),'index':++index,'value':value};});return baseSortBy(result,compareAscending);}var sortByAll=restParam(function(collection,iteratees){if(collection==null){return[];}var guard=iteratees[2];if(guard&&isIterateeCall(iteratees[0],iteratees[1],guard)){iteratees.length=1;}return baseSortByOrder(collection,baseFlatten(iteratees),[]);});function sortByOrder(collection,iteratees,orders,guard){if(collection==null){return[];}if(guard&&isIterateeCall(iteratees,orders,guard)){orders=undefined;}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees];}if(!isArray(orders)){orders=orders==null?[]:[orders];}return baseSortByOrder(collection,iteratees,orders);}function where(collection,source){return filter(collection,baseMatches(source));}var now=nativeNow||function(){return new Date().getTime();};function after(n,func){if(typeof func!='function'){if(typeof n=='function'){var temp=n;n=func;func=temp;}else{throw new TypeError(FUNC_ERROR_TEXT);}}n=nativeIsFinite(n=+n)?n:0;return function(){if(--n<1){return func.apply(this,arguments);}};}function ary(func,n,guard){if(guard&&isIterateeCall(func,n,guard)){n=undefined;}n=(func&&n==null)?func.length:nativeMax(+n||0,0);return createWrapper(func,ARY_FLAG,undefined,undefined,undefined,undefined,n);}function before(n,func){var result;if(typeof func!='function'){if(typeof n=='function'){var temp=n;n=func;func=temp;}else{throw new TypeError(FUNC_ERROR_TEXT);}}return function(){if(--n>0){result=func.apply(this,arguments);}if(n<=1){func=undefined;}return result;};}var bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG;}return createWrapper(func,bitmask,thisArg,partials,holders);});var bindAll=restParam(function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);var index=-1,length=methodNames.length;while(++index<length){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object);}return object;});var bindKey=restParam(function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask|=PARTIAL_FLAG;}return createWrapper(key,bitmask,object,partials,holders);});var curry=createCurry(CURRY_FLAG);var curryRight=createCurry(CURRY_RIGHT_FLAG);function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}wait=wait<0?0:(+wait||0);if(options===true){var leading=true;trailing=false;}else if(isObject(options)){leading=!!options.leading;maxWait='maxWait'in options&&nativeMax(+options.maxWait||0,wait);trailing='trailing'in options?!!options.trailing:trailing;}function cancel(){if(timeoutId){clearTimeout(timeoutId);}if(maxTimeoutId){clearTimeout(maxTimeoutId);}lastCalled=0;maxTimeoutId=timeoutId=trailingCall=undefined;}function complete(isCalled,id){if(id){clearTimeout(id);}maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=undefined;}}}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){complete(trailingCall,maxTimeoutId);}else{timeoutId=setTimeout(delayed,remaining);}}function maxDelayed(){complete(trailing,timeoutId);}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId;}else{if(!maxTimeoutId&&!leading){lastCalled=stamp;}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId);}lastCalled=stamp;result=func.apply(thisArg,args);}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining);}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId);}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait);}if(leadingCall){isCalled=true;result=func.apply(thisArg,args);}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=undefined;}return result;}debounced.cancel=cancel;return debounced;}var defer=restParam(function(func,args){return baseDelay(func,1,args);});var delay=restParam(function(func,wait,args){return baseDelay(func,wait,args);});var flow=createFlow();var flowRight=createFlow(true);function memoize(func,resolver){if(typeof func!='function'||(resolver&&typeof resolver!='function')){throw new TypeError(FUNC_ERROR_TEXT);}var memoized=function(){var args=arguments,key=resolver?resolver.apply(this,args):args[0],cache=memoized.cache;if(cache.has(key)){return cache.get(key);}var result=func.apply(this,args);memoized.cache=cache.set(key,result);return result;};memoized.cache=new memoize.Cache;return memoized;}var modArgs=restParam(function(func,transforms){transforms=baseFlatten(transforms);if(typeof func!='function'||!arrayEvery(transforms,baseIsFunction)){throw new TypeError(FUNC_ERROR_TEXT);}var length=transforms.length;return restParam(function(args){var index=nativeMin(args.length,length);while(index--){args[index]=transforms[index](args[index]);}return func.apply(this,args);});});function negate(predicate){if(typeof predicate!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return function(){return!predicate.apply(this,arguments);};}function once(func){return before(2,func);}var partial=createPartial(PARTIAL_FLAG);var partialRight=createPartial(PARTIAL_RIGHT_FLAG);var rearg=restParam(function(func,indexes){return createWrapper(func,REARG_FLAG,undefined,undefined,undefined,baseFlatten(indexes));});function restParam(func,start){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}start=nativeMax(start===undefined?(func.length-1):(+start||0),0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index];}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest);}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index];}otherArgs[start]=rest;return func.apply(this,otherArgs);};}function spread(func){if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}return function(array){return func.apply(this,array);};}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!='function'){throw new TypeError(FUNC_ERROR_TEXT);}if(options===false){leading=false;}else if(isObject(options)){leading='leading'in options?!!options.leading:leading;trailing='trailing'in options?!!options.trailing:trailing;}return debounce(func,wait,{'leading':leading,'maxWait':+wait,'trailing':trailing});}function wrap(value,wrapper){wrapper=wrapper==null?identity:wrapper;return createWrapper(wrapper,PARTIAL_FLAG,undefined,[value],[]);}function clone(value,isDeep,customizer,thisArg){if(isDeep&&typeof isDeep!='boolean'&&isIterateeCall(value,isDeep,customizer)){isDeep=false;}else if(typeof isDeep=='function'){thisArg=customizer;customizer=isDeep;isDeep=false;}return typeof customizer=='function'?baseClone(value,isDeep,bindCallback(customizer,thisArg,1)):baseClone(value,isDeep);}function cloneDeep(value,customizer,thisArg){return typeof customizer=='function'?baseClone(value,true,bindCallback(customizer,thisArg,1)):baseClone(value,true);}function gt(value,other){return value>other;}function gte(value,other){return value>=other;}function isArguments(value){return isObjectLike(value)&&isArrayLike(value)&&hasOwnProperty.call(value,'callee')&&!propertyIsEnumerable.call(value,'callee');}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag;};function isBoolean(value){return value===true||value===false||(isObjectLike(value)&&objToString.call(value)==boolTag);}function isDate(value){return isObjectLike(value)&&objToString.call(value)==dateTag;}function isElement(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&!isPlainObject(value);}function isEmpty(value){if(value==null){return true;}if(isArrayLike(value)&&(isArray(value)||isString(value)||isArguments(value)||(isObjectLike(value)&&isFunction(value.splice)))){return!value.length;}return!keys(value).length;}function isEqual(value,other,customizer,thisArg){customizer=typeof customizer=='function'?bindCallback(customizer,thisArg,3):undefined;var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result;}function isError(value){return isObjectLike(value)&&typeof value.message=='string'&&objToString.call(value)==errorTag;}function isFinite(value){return typeof value=='number'&&nativeIsFinite(value);}function isFunction(value){return isObject(value)&&objToString.call(value)==funcTag;}function isObject(value){var type=typeof value;return!!value&&(type=='object'||type=='function');}function isMatch(object,source,customizer,thisArg){customizer=typeof customizer=='function'?bindCallback(customizer,thisArg,3):undefined;return baseIsMatch(object,getMatchData(source),customizer);}function isNaN(value){return isNumber(value)&&value!=+value;}function isNative(value){if(value==null){return false;}if(isFunction(value)){return reIsNative.test(fnToString.call(value));}return isObjectLike(value)&&reIsHostCtor.test(value);}function isNull(value){return value===null;}function isNumber(value){return typeof value=='number'||(isObjectLike(value)&&objToString.call(value)==numberTag);}function isPlainObject(value){var Ctor;if(!(isObjectLike(value)&&objToString.call(value)==objectTag&&!isArguments(value))||(!hasOwnProperty.call(value,'constructor')&&(Ctor=value.constructor,typeof Ctor=='function'&&!(Ctor instanceof Ctor)))){return false;}var result;baseForIn(value,function(subValue,key){result=key;});return result===undefined||hasOwnProperty.call(value,result);}function isRegExp(value){return isObject(value)&&objToString.call(value)==regexpTag;}function isString(value){return typeof value=='string'||(isObjectLike(value)&&objToString.call(value)==stringTag);}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)];}function isUndefined(value){return value===undefined;}function lt(value,other){return value<other;}function lte(value,other){return value<=other;}function toArray(value){var length=value?getLength(value):0;if(!isLength(length)){return values(value);}if(!length){return[];}return arrayCopy(value);}function toPlainObject(value){return baseCopy(value,keysIn(value));}var merge=createAssigner(baseMerge);var assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source);});function create(prototype,properties,guard){var result=baseCreate(prototype);if(guard&&isIterateeCall(prototype,properties,guard)){properties=undefined;}return properties?baseAssign(result,properties):result;}var defaults=createDefaults(assign,assignDefaults);var defaultsDeep=createDefaults(merge,mergeDefaults);var findKey=createFindKey(baseForOwn);var findLastKey=createFindKey(baseForOwnRight);var forIn=createForIn(baseFor);var forInRight=createForIn(baseForRight);var forOwn=createForOwn(baseForOwn);var forOwnRight=createForOwn(baseForOwnRight);function functions(object){return baseFunctions(object,keysIn(object));}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,toPath(path),path+'');return result===undefined?defaultValue:result;}function has(object,path){if(object==null){return false;}var result=hasOwnProperty.call(object,path);if(!result&&!isKey(path)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false;}path=last(path);result=hasOwnProperty.call(object,path);}return result||(isLength(object.length)&&isIndex(path,object.length)&&(isArray(object)||isArguments(object)));}function invert(object,multiValue,guard){if(guard&&isIterateeCall(object,multiValue,guard)){multiValue=undefined;}var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index],value=object[key];if(multiValue){if(hasOwnProperty.call(result,value)){result[value].push(key);}else{result[value]=[key];}}else{result[value]=key;}}return result;}var keys=!nativeKeys?shimKeys:function(object){var Ctor=object==null?undefined:object.constructor;if((typeof Ctor=='function'&&Ctor.prototype===object)||(typeof object!='function'&&isArrayLike(object))){return shimKeys(object);}return isObject(object)?nativeKeys(object):[];};function keysIn(object){if(object==null){return[];}if(!isObject(object)){object=Object(object);}var length=object.length;length=(length&&isLength(length)&&(isArray(object)||isArguments(object))&&length)||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=='function'&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=(index+'');}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=='constructor'&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key);}}return result;}var mapKeys=createObjectMapper(true);var mapValues=createObjectMapper();var omit=restParam(function(object,props){if(object==null){return{};}if(typeof props[0]!='function'){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props));}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,function(value,key,object){return!predicate(value,key,object);});});function pairs(object){object=toObject(object);var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]];}return result;}var pick=restParam(function(object,props){if(object==null){return{};}return typeof props[0]=='function'?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props));});function result(object,path,defaultValue){var result=object==null?undefined:object[path];if(result===undefined){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));result=object==null?undefined:object[last(path)];}result=result===undefined?defaultValue:result;}return isFunction(result)?result.call(object):result;}function set(object,path,value){if(object==null){return object;}var pathKey=(path+'');path=(object[pathKey]!=null||isKey(path,object))?[pathKey]:toPath(path);var index=-1,length=path.length,lastIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=path[index];if(isObject(nested)){if(index==lastIndex){nested[key]=value;}else if(nested[key]==null){nested[key]=isIndex(path[index+1])?[]:{};}}nested=nested[key];}return object;}function transform(object,iteratee,accumulator,thisArg){var isArr=isArray(object)||isTypedArray(object);iteratee=getCallback(iteratee,thisArg,4);if(accumulator==null){if(isArr||isObject(object)){var Ctor=object.constructor;if(isArr){accumulator=isArray(object)?new Ctor:[];}else{accumulator=baseCreate(isFunction(Ctor)?Ctor.prototype:undefined);}}else{accumulator={};}}(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object);});return accumulator;}function values(object){return baseValues(object,keys(object));}function valuesIn(object){return baseValues(object,keysIn(object));}function inRange(value,start,end){start=+start||0;if(end===undefined){end=start;start=0;}else{end=+end||0;}return value>=nativeMin(start,end)&&value<nativeMax(start,end);}function random(min,max,floating){if(floating&&isIterateeCall(min,max,floating)){max=floating=undefined;}var noMin=min==null,noMax=max==null;if(floating==null){if(noMax&&typeof min=='boolean'){floating=min;min=1;}else if(typeof max=='boolean'){floating=max;noMax=true;}}if(noMin&&noMax){max=1;noMax=false;}min=+min||0;if(noMax){max=min;min=0;}else{max=+max||0;}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+(rand*(max-min+parseFloat('1e-'+((rand+'').length-1)))),max);}return baseRandom(min,max);}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?(word.charAt(0).toUpperCase()+word.slice(1)):word);});function capitalize(string){string=baseToString(string);return string&&(string.charAt(0).toUpperCase()+string.slice(1));}function deburr(string){string=baseToString(string);return string&&string.replace(reLatin1,deburrLetter).replace(reComboMark,'');}function endsWith(string,target,position){string=baseToString(string);target=(target+'');var length=string.length;position=position===undefined?length:nativeMin(position<0?0:(+position||0),length);position-=target.length;return position>=0&&string.indexOf(target,position)==position;}function escape(string){string=baseToString(string);return(string&&reHasUnescapedHtml.test(string))?string.replace(reUnescapedHtml,escapeHtmlChar):string;}function escapeRegExp(string){string=baseToString(string);return(string&&reHasRegExpChars.test(string))?string.replace(reRegExpChars,escapeRegExpChar):(string||'(?:)');}var kebabCase=createCompounder(function(result,word,index){return result+(index?'-':'')+word.toLowerCase();});function pad(string,length,chars){string=baseToString(string);length=+length;var strLength=string.length;if(strLength>=length||!nativeIsFinite(length)){return string;}var mid=(length-strLength)/2,leftLength=nativeFloor(mid),rightLength=nativeCeil(mid);chars=createPadding('',rightLength,chars);return chars.slice(0,leftLength)+string+chars;}var padLeft=createPadDir();var padRight=createPadDir(true);function parseInt(string,radix,guard){if(guard?isIterateeCall(string,radix,guard):radix==null){radix=0;}else if(radix){radix=+radix;}string=trim(string);return nativeParseInt(string,radix||(reHasHexPrefix.test(string)?16:10));}function repeat(string,n){var result='';string=baseToString(string);n=+n;if(n<1||!string||!nativeIsFinite(n)){return result;}do{if(n%2){result+=string;}n=nativeFloor(n/2);string+=string;}while(n);return result;}var snakeCase=createCompounder(function(result,word,index){return result+(index?'_':'')+word.toLowerCase();});var startCase=createCompounder(function(result,word,index){return result+(index?' ':'')+(word.charAt(0).toUpperCase()+word.slice(1));});function startsWith(string,target,position){string=baseToString(string);position=position==null?0:nativeMin(position<0?0:(+position||0),string.length);return string.lastIndexOf(target,position)==position;}function template(string,options,otherOptions){var settings=lodash.templateSettings;if(otherOptions&&isIterateeCall(string,options,otherOptions)){options=otherOptions=undefined;}string=baseToString(string);options=assignWith(baseAssign({},otherOptions||options),settings,assignOwnDefaults);var imports=assignWith(baseAssign({},options.imports),settings.imports,assignOwnDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+'|'+interpolate.source+'|'+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+'|'+(options.evaluate||reNoMatch).source+'|$','g');var sourceURL='//# sourceURL='+('sourceURL'in options?options.sourceURL:('lodash.templateSources['+(++templateCounter)+']'))+'\n';string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'";}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '";}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'";}index=offset+match.length;return match;});source+="';\n";var variable=options.variable;if(!variable){source='with (obj) {\n'+source+'\n}\n';}source=(isEvaluating?source.replace(reEmptyStringLeading,''):source).replace(reEmptyStringMiddle,'$1').replace(reEmptyStringTrailing,'$1;');source='function('+(variable||'obj')+') {\n'+(variable?'':'obj || (obj = {});\n')+"var __t, __p = ''"+(isEscaping?', __e = _.escape':'')+(isEvaluating?', __j = Array.prototype.join;\n'+"function print() { __p += __j.call(arguments, '') }\n":';\n')+source+'return __p\n}';var result=attempt(function(){return Function(importsKeys,sourceURL+'return '+source).apply(undefined,importsValues);});result.source=source;if(isError(result)){throw result;}return result;}function trim(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string;}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1);}chars=(chars+'');return string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1);}function trimLeft(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string;}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string));}return string.slice(charsLeftIndex(string,(chars+'')));}function trimRight(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string;}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(0,trimmedRightIndex(string)+1);}return string.slice(0,charsRightIndex(string,(chars+''))+1);}function trunc(string,options,guard){if(guard&&isIterateeCall(string,options,guard)){options=undefined;}var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(options!=null){if(isObject(options)){var separator='separator'in options?options.separator:separator;length='length'in options?(+options.length||0):length;omission='omission'in options?baseToString(options.omission):omission;}else{length=+options||0;}}string=baseToString(string);if(length>=string.length){return string;}var end=length-omission.length;if(end<1){return omission;}var result=string.slice(0,end);if(separator==null){return result+omission;}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,newEnd,substring=string.slice(0,end);if(!separator.global){separator=RegExp(separator.source,(reFlags.exec(separator)||'')+'g');}separator.lastIndex=0;while((match=separator.exec(substring))){newEnd=match.index;}result=result.slice(0,newEnd==null?end:newEnd);}}else if(string.indexOf(separator,end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index);}}return result+omission;}function unescape(string){string=baseToString(string);return(string&&reHasEscapedHtml.test(string))?string.replace(reEscapedHtml,unescapeHtmlChar):string;}function words(string,pattern,guard){if(guard&&isIterateeCall(string,pattern,guard)){pattern=undefined;}string=baseToString(string);return string.match(pattern||reWords)||[];}var attempt=restParam(function(func,args){try{return func.apply(undefined,args);}catch(e){return isError(e)?e:new Error(e);}});function callback(func,thisArg,guard){if(guard&&isIterateeCall(func,thisArg,guard)){thisArg=undefined;}return isObjectLike(func)?matches(func):baseCallback(func,thisArg);}function constant(value){return function(){return value;};}function identity(value){return value;}function matches(source){return baseMatches(baseClone(source,true));}function matchesProperty(path,srcValue){return baseMatchesProperty(path,baseClone(srcValue,true));}var method=restParam(function(path,args){return function(object){return invokePath(object,path,args);};});var methodOf=restParam(function(object,args){return function(path){return invokePath(object,path,args);};});function mixin(object,source,options){if(options==null){var isObj=isObject(source),props=isObj?keys(source):undefined,methodNames=(props&&props.length)?baseFunctions(source,props):undefined;if(!(methodNames?methodNames.length:isObj)){methodNames=false;options=source;source=object;object=this;}}if(!methodNames){methodNames=baseFunctions(source,keys(source));}var chain=true,index=-1,isFunc=isFunction(object),length=methodNames.length;if(options===false){chain=false;}else if(isObject(options)&&'chain'in options){chain=options.chain;}while(++index<length){var methodName=methodNames[index],func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=(function(func){return function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=arrayCopy(this.__actions__);actions.push({'func':func,'args':arguments,'thisArg':object});result.__chain__=chainAll;return result;}return func.apply(object,arrayPush([this.value()],arguments));};}(func));}}return object;}function noConflict(){root._=oldDash;return this;}function noop(){}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path);}function propertyOf(object){return function(path){return baseGet(object,toPath(path),path+'');};}function range(start,end,step){if(step&&isIterateeCall(start,end,step)){end=step=undefined;}start=+start||0;step=step==null?1:(+step||0);if(end==null){end=start;start=0;}else{end=+end||0;}var index=-1,length=nativeMax(nativeCeil((end-start)/(step||1)),0),result=Array(length);while(++index<length){result[index]=start;start+=step;}return result;}function times(n,iteratee,thisArg){n=nativeFloor(n);if(n<1||!nativeIsFinite(n)){return[];}var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));iteratee=bindCallback(iteratee,thisArg,1);while(++index<n){if(index<MAX_ARRAY_LENGTH){result[index]=iteratee(index);}else{iteratee(index);}}return result;}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id;}function add(augend,addend){return(+augend||0)+(+addend||0);}var ceil=createRound('ceil');var floor=createRound('floor');var max=createExtremum(gt,NEGATIVE_INFINITY);var min=createExtremum(lt,POSITIVE_INFINITY);var round=createRound('round');function sum(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=undefined;}iteratee=getCallback(iteratee,thisArg,3);return iteratee.length==1?arraySum(isArray(collection)?collection:toIterable(collection),iteratee):baseSum(collection,iteratee);}lodash.prototype=baseLodash.prototype;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;MapCache.prototype['delete']=mapDelete;MapCache.prototype.get=mapGet;MapCache.prototype.has=mapHas;MapCache.prototype.set=mapSet;SetCache.prototype.push=cachePush;memoize.Cache=MapCache;lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.callback=callback;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defaultsDeep=defaultsDeep;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flow=flow;lodash.flowRight=flowRight;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapKeys=mapKeys;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.modArgs=modArgs;lodash.negate=negate;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAt=pullAt;lodash.range=range;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.restParam=restParam;lodash.set=set;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortByAll=sortByAll;lodash.sortByOrder=sortByOrder;lodash.spread=spread;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.times=times;lodash.toArray=toArray;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.unzip=unzip;lodash.unzipWith=unzipWith;lodash.values=values;lodash.valuesIn=valuesIn;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.zipWith=zipWith;lodash.backflow=flowRight;lodash.collect=map;lodash.compose=flowRight;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.iteratee=callback;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.ceil=ceil;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.deburr=deburr;lodash.endsWith=endsWith;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.findWhere=findWhere;lodash.first=first;lodash.floor=floor;lodash.get=get;lodash.gt=gt;lodash.gte=gte;lodash.has=has;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isMatch=isMatch;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.lt=lt;lodash.lte=lte;lodash.max=max;lodash.min=min;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padLeft=padLeft;lodash.padRight=padRight;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.result=result;lodash.round=round;lodash.runInContext=runInContext;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedLastIndex=sortedLastIndex;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.sum=sum;lodash.template=template;lodash.trim=trim;lodash.trimLeft=trimLeft;lodash.trimRight=trimRight;lodash.trunc=trunc;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.words=words;lodash.all=every;lodash.any=some;lodash.contains=includes;lodash.eq=isEqual;lodash.detect=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.head=first;lodash.include=includes;lodash.inject=reduce;mixin(lodash,(function(){var source={};baseForOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func;}});return source;}()),false);lodash.sample=sample;lodash.prototype.sample=function(n){if(!this.__chain__&&n==null){return sample(this.value());}return this.thru(function(value){return sample(value,n);});};lodash.VERSION=VERSION;arrayEach(['bind','bindKey','curry','curryRight','partial','partialRight'],function(methodName){lodash[methodName].placeholder=lodash;});arrayEach(['drop','take'],function(methodName,index){LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__;if(filtered&&!index){return new LazyWrapper(this);}n=n==null?1:nativeMax(nativeFloor(n)||0,0);var result=this.clone();if(filtered){result.__takeCount__=nativeMin(result.__takeCount__,n);}else{result.__views__.push({'size':n,'type':methodName+(result.__dir__<0?'Right':'')});}return result;};LazyWrapper.prototype[methodName+'Right']=function(n){return this.reverse()[methodName](n).reverse();};});arrayEach(['filter','map','takeWhile'],function(methodName,index){var type=index+1,isFilter=type!=LAZY_MAP_FLAG;LazyWrapper.prototype[methodName]=function(iteratee,thisArg){var result=this.clone();result.__iteratees__.push({'iteratee':getCallback(iteratee,thisArg,1),'type':type});result.__filtered__=result.__filtered__||isFilter;return result;};});arrayEach(['first','last'],function(methodName,index){var takeName='take'+(index?'Right':'');LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0];};});arrayEach(['initial','rest'],function(methodName,index){var dropName='drop'+(index?'':'Right');LazyWrapper.prototype[methodName]=function(){return this.__filtered__?new LazyWrapper(this):this[dropName](1);};});arrayEach(['pluck','where'],function(methodName,index){var operationName=index?'filter':'map',createCallback=index?baseMatches:property;LazyWrapper.prototype[methodName]=function(value){return this[operationName](createCallback(value));};});LazyWrapper.prototype.compact=function(){return this.filter(identity);};LazyWrapper.prototype.reject=function(predicate,thisArg){predicate=getCallback(predicate,thisArg,1);return this.filter(function(value){return!predicate(value);});};LazyWrapper.prototype.slice=function(start,end){start=start==null?0:(+start||0);var result=this;if(result.__filtered__&&(start>0||end<0)){return new LazyWrapper(result);}if(start<0){result=result.takeRight(-start);}else if(start){result=result.drop(start);}if(end!==undefined){end=(+end||0);result=end<0?result.dropRight(-end):result.take(end-start);}return result;};LazyWrapper.prototype.takeRightWhile=function(predicate,thisArg){return this.reverse().takeWhile(predicate,thisArg).reverse();};LazyWrapper.prototype.toArray=function(){return this.take(POSITIVE_INFINITY);};baseForOwn(LazyWrapper.prototype,function(func,methodName){var checkIteratee=/^(?:filter|map|reject)|While$/.test(methodName),retUnwrapped=/^(?:first|last)$/.test(methodName),lodashFunc=lodash[retUnwrapped?('take'+(methodName=='last'?'Right':'')):methodName];if(!lodashFunc){return;}lodash.prototype[methodName]=function(){var args=retUnwrapped?[1]:arguments,chainAll=this.__chain__,value=this.__wrapped__,isHybrid=!!this.__actions__.length,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);if(useLazy&&checkIteratee&&typeof iteratee=='function'&&iteratee.length!=1){isLazy=useLazy=false;}var interceptor=function(value){return(retUnwrapped&&chainAll)?lodashFunc(value,1)[0]:lodashFunc.apply(undefined,arrayPush([value],args));};var action={'func':thru,'args':[interceptor],'thisArg':undefined},onlyLazy=isLazy&&!isHybrid;if(retUnwrapped&&!chainAll){if(onlyLazy){value=value.clone();value.__actions__.push(action);return func.call(value);}return lodashFunc.call(undefined,this.value())[0];}if(!retUnwrapped&&useLazy){value=onlyLazy?value:new LazyWrapper(this);var result=func.apply(value,args);result.__actions__.push(action);return new LodashWrapper(result,chainAll);}return this.thru(interceptor);};});arrayEach(['join','pop','push','replace','shift','sort','splice','split','unshift'],function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?stringProto:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?'tap':'thru',retUnwrapped=/^(?:join|pop|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){return func.apply(this.value(),args);}return this[chainName](function(value){return func.apply(value,args);});};});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name,names=realNames[key]||(realNames[key]=[]);names.push({'name':methodName,'func':lodashFunc});}});realNames[createHybridWrapper(undefined,BIND_KEY_FLAG).name]=[{'name':'wrapper','func':undefined}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.concat=wrapperConcat;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toString=wrapperToString;lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.collect=lodash.prototype.map;lodash.prototype.head=lodash.prototype.first;lodash.prototype.select=lodash.prototype.filter;lodash.prototype.tail=lodash.prototype.rest;return lodash;}var _=runInContext();if(typeof define=='function'&&typeof define.amd=='object'&&define.amd){root._=_;define(function(){return _;});}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_;}else{freeExports._=_;}}else{root._=_;}}.call(this));}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],51:[function(require,module,exports){(function(global){;(function(){var undefined;var arrayPool=[],objectPool=[];var idCounter=0;var keyPrefix=+new Date+'';var largeArraySize=75;var maxPoolSize=40;var whitespace=(' \t\x0B\f\xA0\ufeff'+'\n\r\u2028\u2029'+'\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000');var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reFuncName=/^\s*function[ \n\r\t]+\w/;var reInterpolate=/<%=([\s\S]+?)%>/g;var reLeadingSpacesAndZeros=RegExp('^['+whitespace+']*0+(?=.$)');var reNoMatch=/($^)/;var reThis=/\bthis\b/;var reUnescapedString=/['\n\r\t\u2028\u2029\\]/g;var contextProps=['Array','Boolean','Date','Function','Math','Number','Object','RegExp','String','_','attachEvent','clearTimeout','isFinite','isNaN','parseInt','setTimeout'];var templateCounter=0;var argsClass='[object Arguments]',arrayClass='[object Array]',boolClass='[object Boolean]',dateClass='[object Date]',funcClass='[object Function]',numberClass='[object Number]',objectClass='[object Object]',regexpClass='[object RegExp]',stringClass='[object String]';var cloneableClasses={};cloneableClasses[funcClass]=false;cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=true;var debounceOptions={'leading':false,'maxWait':0,'trailing':false};var descriptor={'configurable':false,'enumerable':false,'value':null,'writable':false};var objectTypes={'boolean':false,'function':true,'object':true,'number':false,'string':false,'undefined':false};var stringEscapes={'\\':'\\',"'":"'",'\n':'n','\r':'r','\t':'t','\u2028':'u2028','\u2029':'u2029'};var root=(objectTypes[typeof window]&&window)||this;var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var freeGlobal=objectTypes[typeof global]&&global;if(freeGlobal&&(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal)){root=freeGlobal;}function baseIndexOf(array,value,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0;while(++index<length){if(array[index]===value){return index;}}return-1;}function cacheIndexOf(cache,value){var type=typeof value;cache=cache.cache;if(type=='boolean'||value==null){return cache[value]?0:-1;}if(type!='number'&&type!='string'){type='object';}var key=type=='number'?value:keyPrefix+value;cache=(cache=cache[type])&&cache[key];return type=='object'?(cache&&baseIndexOf(cache,value)>-1?0:-1):(cache?0:-1);}function cachePush(value){var cache=this.cache,type=typeof value;if(type=='boolean'||value==null){cache[value]=true;}else{if(type!='number'&&type!='string'){type='object';}var key=type=='number'?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});if(type=='object'){(typeCache[key]||(typeCache[key]=[])).push(value);}else{typeCache[key]=true;}}}function charAtCallback(value){return value.charCodeAt(0);}function compareAscending(a,b){var ac=a.criteria,bc=b.criteria,index=-1,length=ac.length;while(++index<length){var value=ac[index],other=bc[index];if(value!==other){if(value>other||typeof value=='undefined'){return 1;}if(value<other||typeof other=='undefined'){return-1;}}}return a.index-b.index;}function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[(length/2)|0],last=array[length-1];if(first&&typeof first=='object'&&mid&&typeof mid=='object'&&last&&typeof last=='object'){return false;}var cache=getObject();cache['false']=cache['null']=cache['true']=cache['undefined']=false;var result=getObject();result.array=array;result.cache=cache;result.push=cachePush;while(++index<length){result.push(array[index]);}return result;}function escapeStringChar(match){return'\\'+stringEscapes[match];}function getArray(){return arrayPool.pop()||[];}function getObject(){return objectPool.pop()||{'array':null,'cache':null,'criteria':null,'false':false,'index':0,'null':false,'number':null,'object':null,'push':null,'string':null,'true':false,'undefined':false,'value':null};}function releaseArray(array){array.length=0;if(arrayPool.length<maxPoolSize){arrayPool.push(array);}}function releaseObject(object){var cache=object.cache;if(cache){releaseObject(cache);}object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null;if(objectPool.length<maxPoolSize){objectPool.push(object);}}function slice(array,start,end){start||(start=0);if(typeof end=='undefined'){end=array?array.length:0;}var index=-1,length=end-start||0,result=Array(length<0?0:length);while(++index<length){result[index]=array[start+index];}return result;}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayRef=[];var objectProto=Object.prototype;var oldDash=context._;var toString=objectProto.toString;var reNative=RegExp('^'+String(toString).replace(/[.*+?^${}()|[\]\\]/g,'\\$&').replace(/toString| for [^\]]+/g,'.*?')+'$');var ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,fnToString=Function.prototype.toString,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,setTimeout=context.setTimeout,splice=arrayRef.splice,unshift=arrayRef.unshift;var defineProperty=(function(){try{var o={},func=isNative(func=Object.defineProperty)&&func,result=func(o,o,o)&&func;}catch(e){}return result;}());var nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random;var ctorByClass={};ctorByClass[arrayClass]=Array;ctorByClass[boolClass]=Boolean;ctorByClass[dateClass]=Date;ctorByClass[funcClass]=Function;ctorByClass[objectClass]=Object;ctorByClass[numberClass]=Number;ctorByClass[regexpClass]=RegExp;ctorByClass[stringClass]=String;function lodash(value){return(value&&typeof value=='object'&&!isArray(value)&&hasOwnProperty.call(value,'__wrapped__'))?value:new lodashWrapper(value);}function lodashWrapper(value,chainAll){this.__chain__=!!chainAll;this.__wrapped__=value;}lodashWrapper.prototype=lodash.prototype;var support=lodash.support={};support.funcDecomp=!isNative(context.WinRTError)&&reThis.test(runInContext);support.funcNames=typeof Function.name=='string';lodash.templateSettings={'escape':/<%-([\s\S]+?)%>/g,'evaluate':/<%([\s\S]+?)%>/g,'interpolate':reInterpolate,'variable':'','imports':{'_':lodash}};function baseBind(bindData){var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments);}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding;}return func.apply(thisArg,args||arguments);}setBindData(bound,bindData);return bound;}function baseClone(value,isDeep,callback,stackA,stackB){if(callback){var result=callback(value);if(typeof result!='undefined'){return result;}}var isObj=isObject(value);if(isObj){var className=toString.call(value);if(!cloneableClasses[className]){return value;}var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+value);case numberClass:case stringClass:return new ctor(value);case regexpClass:result=ctor(value.source,reFlags.exec(value));result.lastIndex=value.lastIndex;return result;}}else{return value;}var isArr=isArray(value);if(isDeep){var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length];}}result=isArr?ctor(value.length):{};}else{result=isArr?slice(value):assign({},value);}if(isArr){if(hasOwnProperty.call(value,'index')){result.index=value.index;}if(hasOwnProperty.call(value,'input')){result.input=value.input;}}if(!isDeep){return result;}stackA.push(value);stackB.push(result);(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=baseClone(objValue,isDeep,callback,stackA,stackB);});if(initedStack){releaseArray(stackA);releaseArray(stackB);}return result;}function baseCreate(prototype,properties){return isObject(prototype)?nativeCreate(prototype):{};}if(!nativeCreate){baseCreate=(function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null;}return result||context.Object();};}());}function baseCreateCallback(func,thisArg,argCount){if(typeof func!='function'){return identity;}if(typeof thisArg=='undefined'||!('prototype'in func)){return func;}var bindData=func.__bindData__;if(typeof bindData=='undefined'){if(support.funcNames){bindData=!func.name;}bindData=bindData||!support.funcDecomp;if(!bindData){var source=fnToString.call(func);if(!support.funcNames){bindData=!reFuncName.test(source);}if(!bindData){bindData=reThis.test(source);setBindData(func,bindData);}}}if(bindData===false||(bindData!==true&&bindData[1]&1)){return func;}switch(argCount){case 1:return function(value){return func.call(thisArg,value);};case 2:return function(a,b){return func.call(thisArg,a,b);};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection);};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection);};}return bind(func,thisArg);}function baseCreateWrapper(bindData){var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5];var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,key=func;function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments);}if(partialRightArgs||isCurry){args||(args=slice(arguments));if(partialRightArgs){push.apply(args,partialRightArgs);}if(isCurry&&args.length<arity){bitmask|=16&~32;return baseCreateWrapper([func,(isCurryBound?bitmask:bitmask&~3),args,null,thisArg,arity]);}}args||(args=arguments);if(isBindKey){func=thisBinding[key];}if(this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding;}return func.apply(thisBinding,args);}setBindData(bound,bindData);return bound;}function baseDifference(array,values){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,isLarge=length>=largeArraySize&&indexOf===baseIndexOf,result=[];if(isLarge){var cache=createCache(values);if(cache){indexOf=cacheIndexOf;values=cache;}else{isLarge=false;}}while(++index<length){var value=array[index];if(indexOf(values,value)<0){result.push(value);}}if(isLarge){releaseObject(values);}return result;}function baseFlatten(array,isShallow,isStrict,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value&&typeof value=='object'&&typeof value.length=='number'&&(isArray(value)||isArguments(value))){if(!isShallow){value=baseFlatten(value,isShallow,isStrict);}var valIndex=-1,valLength=value.length,resIndex=result.length;result.length+=valLength;while(++valIndex<valLength){result[resIndex++]=value[valIndex];}}else if(!isStrict){result.push(value);}}return result;}function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if(typeof result!='undefined'){return!!result;}}if(a===b){return a!==0||(1/a==1/b);}var type=typeof a,otherType=typeof b;if(a===a&&!(a&&objectTypes[type])&&!(b&&objectTypes[otherType])){return false;}if(a==null||b==null){return a===b;}var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass){className=objectClass;}if(otherClass==argsClass){otherClass=objectClass;}if(className!=otherClass){return false;}switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return(a!=+a)?b!=+b:(a==0?(1/a==1/b):a==+b);case regexpClass:case stringClass:return a==String(b);}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,'__wrapped__'),bWrapped=hasOwnProperty.call(b,'__wrapped__');if(aWrapped||bWrapped){return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB);}if(className!=objectClass){return false;}var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&('constructor'in a&&'constructor'in b)){return false;}}var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==a){return stackB[length]==b;}}var size=0;result=true;stackA.push(a);stackB.push(b);if(isArr){length=a.length;size=b.length;result=size==length;if(result||isWhere){while(size--){var index=length,value=b[size];if(isWhere){while(index--){if((result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB))){break;}}}else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB))){break;}}}}else{forIn(b,function(value,key,b){if(hasOwnProperty.call(b,key)){size++;return(result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB));}});if(result&&!isWhere){forIn(a,function(value,key,a){if(hasOwnProperty.call(a,key)){return(result=--size>-1);}});}}stackA.pop();stackB.pop();if(initedStack){releaseArray(stackA);releaseArray(stackB);}return result;}function baseMerge(object,source,callback,stackA,stackB){(isArray(source)?forEach:forOwn)(source,function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){var stackLength=stackA.length;while(stackLength--){if((found=stackA[stackLength]==source)){value=stackB[stackLength];break;}}if(!found){var isShallow;if(callback){result=callback(value,source);if((isShallow=typeof result!='undefined')){value=result;}}if(!isShallow){value=isArr?(isArray(value)?value:[]):(isPlainObject(value)?value:{});}stackA.push(source);stackB.push(value);if(!isShallow){baseMerge(value,source,callback,stackA,stackB);}}}else{if(callback){result=callback(value,source);if(typeof result=='undefined'){result=source;}}if(typeof result!='undefined'){value=result;}}object[key]=value;});}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1));}function baseUniq(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[];var isLarge=!isSorted&&length>=largeArraySize&&indexOf===baseIndexOf,seen=(callback||isLarge)?getArray():result;if(isLarge){var cache=createCache(seen);indexOf=cacheIndexOf;seen=cache;}while(++index<length){var value=array[index],computed=callback?callback(value,index,array):value;if(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0){if(callback||isLarge){seen.push(computed);}result.push(value);}}if(isLarge){releaseArray(seen.array);releaseObject(seen);}else if(callback){releaseArray(seen);}return result;}function createAggregator(setter){return function(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=='number'){while(++index<length){var value=collection[index];setter(result,value,callback(value,index,collection),collection);}}else{forOwn(collection,function(value,key,collection){setter(result,value,callback(value,key,collection),collection);});}return result;};}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,isPartial=bitmask&16,isPartialRight=bitmask&32;if(!isBindKey&&!isFunction(func)){throw new TypeError;}if(isPartial&&!partialArgs.length){bitmask&=~16;isPartial=partialArgs=false;}if(isPartialRight&&!partialRightArgs.length){bitmask&=~32;isPartialRight=partialRightArgs=false;}var bindData=func&&func.__bindData__;if(bindData&&bindData!==true){bindData=slice(bindData);if(bindData[2]){bindData[2]=slice(bindData[2]);}if(bindData[3]){bindData[3]=slice(bindData[3]);}if(isBind&&!(bindData[1]&1)){bindData[4]=thisArg;}if(!isBind&&bindData[1]&1){bitmask|=8;}if(isCurry&&!(bindData[1]&4)){bindData[5]=arity;}if(isPartial){push.apply(bindData[2]||(bindData[2]=[]),partialArgs);}if(isPartialRight){unshift.apply(bindData[3]||(bindData[3]=[]),partialRightArgs);}bindData[1]|=bitmask;return createWrapper.apply(null,bindData);}var creater=(bitmask==1||bitmask===17)?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity]);}function escapeHtmlChar(match){return htmlEscapes[match];}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result;}function isNative(value){return typeof value=='function'&&reNative.test(value);}var setBindData=!defineProperty?noop:function(func,value){descriptor.value=value;defineProperty(func,'__bindData__',descriptor);descriptor.value=null;};function shimIsPlainObject(value){var ctor,result;if(!(value&&toString.call(value)==objectClass)||(ctor=value.constructor,isFunction(ctor)&&!(ctor instanceof ctor))){return false;}forIn(value,function(value,key){result=key;});return typeof result=='undefined'||hasOwnProperty.call(value,result);}function unescapeHtmlChar(match){return htmlUnescapes[match];}function isArguments(value){return value&&typeof value=='object'&&typeof value.length=='number'&&toString.call(value)==argsClass||false;}var isArray=nativeIsArray||function(value){return value&&typeof value=='object'&&typeof value.length=='number'&&toString.call(value)==arrayClass||false;};var shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!(objectTypes[typeof object]))return result;for(index in iterable){if(hasOwnProperty.call(iterable,index)){result.push(index);}}return result};var keys=!nativeKeys?shimKeys:function(object){if(!isObject(object)){return[];}return nativeKeys(object);};var htmlEscapes={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'};var htmlUnescapes=invert(htmlEscapes);var reEscapedHtml=RegExp('('+keys(htmlUnescapes).join('|')+')','g'),reUnescapedHtml=RegExp('['+keys(htmlEscapes).join('')+']','g');var assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=='number'?2:args.length;if(argsLength>3&&typeof args[argsLength-2]=='function'){var callback=baseCreateCallback(args[--argsLength-1],args[argsLength--],2);}else if(argsLength>2&&typeof args[argsLength-1]=='function'){callback=args[--argsLength];}while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];result[index]=callback?callback(result[index],iterable[index]):iterable[index];}}}return result};function clone(value,isDeep,callback,thisArg){if(typeof isDeep!='boolean'&&isDeep!=null){thisArg=callback;callback=isDeep;isDeep=false;}return baseClone(value,isDeep,typeof callback=='function'&&baseCreateCallback(callback,thisArg,1));}function cloneDeep(value,callback,thisArg){return baseClone(value,true,typeof callback=='function'&&baseCreateCallback(callback,thisArg,1));}function create(prototype,properties){var result=baseCreate(prototype);return properties?assign(result,properties):result;}var defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=='number'?2:args.length;while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(typeof result[index]=='undefined')result[index]=iterable[index];}}}return result};function findKey(object,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forOwn(object,function(value,key,object){if(callback(value,key,object)){result=key;return false;}});return result;}function findLastKey(object,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forOwnRight(object,function(value,key,object){if(callback(value,key,object)){result=key;return false;}});return result;}var forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=='undefined'?callback:baseCreateCallback(callback,thisArg,3);for(index in iterable){if(callback(iterable[index],index,collection)===false)return result;}return result};function forInRight(object,callback,thisArg){var pairs=[];forIn(object,function(value,key){pairs.push(key,value);});var length=pairs.length;callback=baseCreateCallback(callback,thisArg,3);while(length--){if(callback(pairs[length--],pairs[length],object)===false){break;}}return object;}var forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=='undefined'?callback:baseCreateCallback(callback,thisArg,3);var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(callback(iterable[index],index,collection)===false)return result;}return result};function forOwnRight(object,callback,thisArg){var props=keys(object),length=props.length;callback=baseCreateCallback(callback,thisArg,3);while(length--){var key=props[length];if(callback(object[key],key,object)===false){break;}}return object;}function functions(object){var result=[];forIn(object,function(value,key){if(isFunction(value)){result.push(key);}});return result.sort();}function has(object,key){return object?hasOwnProperty.call(object,key):false;}function invert(object){var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index];result[object[key]]=key;}return result;}function isBoolean(value){return value===true||value===false||value&&typeof value=='object'&&toString.call(value)==boolClass||false;}function isDate(value){return value&&typeof value=='object'&&toString.call(value)==dateClass||false;}function isElement(value){return value&&value.nodeType===1||false;}function isEmpty(value){var result=true;if(!value){return result;}var className=toString.call(value),length=value.length;if((className==arrayClass||className==stringClass||className==argsClass)||(className==objectClass&&typeof length=='number'&&isFunction(value.splice))){return!length;}forOwn(value,function(){return(result=false);});return result;}function isEqual(a,b,callback,thisArg){return baseIsEqual(a,b,typeof callback=='function'&&baseCreateCallback(callback,thisArg,2));}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value));}function isFunction(value){return typeof value=='function';}function isObject(value){return!!(value&&objectTypes[typeof value]);}function isNaN(value){return isNumber(value)&&value!=+value;}function isNull(value){return value===null;}function isNumber(value){return typeof value=='number'||value&&typeof value=='object'&&toString.call(value)==numberClass||false;}var isPlainObject=!getPrototypeOf?shimIsPlainObject:function(value){if(!(value&&toString.call(value)==objectClass)){return false;}var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?(value==objProto||getPrototypeOf(value)==objProto):shimIsPlainObject(value);};function isRegExp(value){return value&&typeof value=='object'&&toString.call(value)==regexpClass||false;}function isString(value){return typeof value=='string'||value&&typeof value=='object'&&toString.call(value)==stringClass||false;}function isUndefined(value){return typeof value=='undefined';}function mapValues(object,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);forOwn(object,function(value,key,object){result[key]=callback(value,key,object);});return result;}function merge(object){var args=arguments,length=2;if(!isObject(object)){return object;}if(typeof args[2]!='number'){length=args.length;}if(length>3&&typeof args[length-2]=='function'){var callback=baseCreateCallback(args[--length-1],args[length--],2);}else if(length>2&&typeof args[length-1]=='function'){callback=args[--length];}var sources=slice(arguments,1,length),index=-1,stackA=getArray(),stackB=getArray();while(++index<length){baseMerge(object,sources[index],callback,stackA,stackB);}releaseArray(stackA);releaseArray(stackB);return object;}function omit(object,callback,thisArg){var result={};if(typeof callback!='function'){var props=[];forIn(object,function(value,key){props.push(key);});props=baseDifference(props,baseFlatten(arguments,true,false,1));var index=-1,length=props.length;while(++index<length){var key=props[index];result[key]=object[key];}}else{callback=lodash.createCallback(callback,thisArg,3);forIn(object,function(value,key,object){if(!callback(value,key,object)){result[key]=value;}});}return result;}function pairs(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]];}return result;}function pick(object,callback,thisArg){var result={};if(typeof callback!='function'){var index=-1,props=baseFlatten(arguments,true,false,1),length=isObject(object)?props.length:0;while(++index<length){var key=props[index];if(key in object){result[key]=object[key];}}}else{callback=lodash.createCallback(callback,thisArg,3);forIn(object,function(value,key,object){if(callback(value,key,object)){result[key]=value;}});}return result;}function transform(object,callback,accumulator,thisArg){var isArr=isArray(object);if(accumulator==null){if(isArr){accumulator=[];}else{var ctor=object&&object.constructor,proto=ctor&&ctor.prototype;accumulator=baseCreate(proto);}}if(callback){callback=lodash.createCallback(callback,thisArg,4);(isArr?forEach:forOwn)(object,function(value,index,object){return callback(accumulator,value,index,object);});}return accumulator;}function values(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]];}return result;}function at(collection){var args=arguments,index=-1,props=baseFlatten(args,true,false,1),length=(args[2]&&args[2][args[1]]===collection)?1:props.length,result=Array(length);while(++index<length){result[index]=collection[props[index]];}return result;}function contains(collection,target,fromIndex){var index=-1,indexOf=getIndexOf(),length=collection?collection.length:0,result=false;fromIndex=(fromIndex<0?nativeMax(0,length+fromIndex):fromIndex)||0;if(isArray(collection)){result=indexOf(collection,target,fromIndex)>-1;}else if(typeof length=='number'){result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1;}else{forOwn(collection,function(value){if(++index>=fromIndex){return!(result=value===target);}});}return result;}var countBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]++:result[key]=1);});function every(collection,callback,thisArg){var result=true;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=='number'){while(++index<length){if(!(result=!!callback(collection[index],index,collection))){break;}}}else{forOwn(collection,function(value,index,collection){return(result=!!callback(value,index,collection));});}return result;}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=='number'){while(++index<length){var value=collection[index];if(callback(value,index,collection)){result.push(value);}}}else{forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result.push(value);}});}return result;}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=='number'){while(++index<length){var value=collection[index];if(callback(value,index,collection)){return value;}}}else{var result;forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result=value;return false;}});return result;}}function findLast(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forEachRight(collection,function(value,index,collection){if(callback(value,index,collection)){result=value;return false;}});return result;}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=callback&&typeof thisArg=='undefined'?callback:baseCreateCallback(callback,thisArg,3);if(typeof length=='number'){while(++index<length){if(callback(collection[index],index,collection)===false){break;}}}else{forOwn(collection,callback);}return collection;}function forEachRight(collection,callback,thisArg){var length=collection?collection.length:0;callback=callback&&typeof thisArg=='undefined'?callback:baseCreateCallback(callback,thisArg,3);if(typeof length=='number'){while(length--){if(callback(collection[length],length,collection)===false){break;}}}else{var props=keys(collection);length=props.length;forOwn(collection,function(value,key,collection){key=props?props[--length]:--length;return callback(collection[key],key,collection);});}return collection;}var groupBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value);});var indexBy=createAggregator(function(result,value,key){result[key]=value;});function invoke(collection,methodName){var args=slice(arguments,2),index=-1,isFunc=typeof methodName=='function',length=collection?collection.length:0,result=Array(typeof length=='number'?length:0);forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args);});return result;}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=lodash.createCallback(callback,thisArg,3);if(typeof length=='number'){var result=Array(length);while(++index<length){result[index]=callback(collection[index],index,collection);}}else{result=[];forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection);});}return result;}function max(collection,callback,thisArg){var computed=-Infinity,result=computed;if(typeof callback!='function'&&thisArg&&thisArg[callback]===collection){callback=null;}if(callback==null&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value>result){result=value;}}}else{callback=(callback==null&&isString(collection))?charAtCallback:lodash.createCallback(callback,thisArg,3);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current>computed){computed=current;result=value;}});}return result;}function min(collection,callback,thisArg){var computed=Infinity,result=computed;if(typeof callback!='function'&&thisArg&&thisArg[callback]===collection){callback=null;}if(callback==null&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value<result){result=value;}}}else{callback=(callback==null&&isString(collection))?charAtCallback:lodash.createCallback(callback,thisArg,3);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current<computed){computed=current;result=value;}});}return result;}var pluck=map;function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if(typeof length=='number'){if(noaccum){accumulator=collection[++index];}while(++index<length){accumulator=callback(accumulator,collection[index],index,collection);}}else{forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=false,value):callback(accumulator,value,index,collection)});}return accumulator;}function reduceRight(collection,callback,accumulator,thisArg){var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);forEachRight(collection,function(value,index,collection){accumulator=noaccum?(noaccum=false,value):callback(accumulator,value,index,collection);});return accumulator;}function reject(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);return filter(collection,function(value,index,collection){return!callback(value,index,collection);});}function sample(collection,n,guard){if(collection&&typeof collection.length!='number'){collection=values(collection);}if(n==null||guard){return collection?collection[baseRandom(0,collection.length-1)]:undefined;}var result=shuffle(collection);result.length=nativeMin(nativeMax(0,n),result.length);return result;}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array(typeof length=='number'?length:0);forEach(collection,function(value){var rand=baseRandom(0,++index);result[index]=result[rand];result[rand]=value;});return result;}function size(collection){var length=collection?collection.length:0;return typeof length=='number'?length:keys(collection).length;}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=='number'){while(++index<length){if((result=callback(collection[index],index,collection))){break;}}}else{forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection));});}return!!result;}function sortBy(collection,callback,thisArg){var index=-1,isArr=isArray(callback),length=collection?collection.length:0,result=Array(typeof length=='number'?length:0);if(!isArr){callback=lodash.createCallback(callback,thisArg,3);}forEach(collection,function(value,key,collection){var object=result[++index]=getObject();if(isArr){object.criteria=map(callback,function(key){return value[key];});}else{(object.criteria=getArray())[0]=callback(value,key,collection);}object.index=index;object.value=value;});length=result.length;result.sort(compareAscending);while(length--){var object=result[length];result[length]=object.value;if(!isArr){releaseArray(object.criteria);}releaseObject(object);}return result;}function toArray(collection){if(collection&&typeof collection.length=='number'){return slice(collection);}return values(collection);}var where=filter;function compact(array){var index=-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value){result.push(value);}}return result;}function difference(array){return baseDifference(array,baseFlatten(arguments,true,true,1));}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(++index<length){if(callback(array[index],index,array)){return index;}}return-1;}function findLastIndex(array,callback,thisArg){var length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(length--){if(callback(array[length],length,array)){return length;}}return-1;}function first(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!='number'&&callback!=null){var index=-1;callback=lodash.createCallback(callback,thisArg,3);while(++index<length&&callback(array[index],index,array)){n++;}}else{n=callback;if(n==null||thisArg){return array?array[0]:undefined;}}return slice(array,0,nativeMin(nativeMax(0,n),length));}function flatten(array,isShallow,callback,thisArg){if(typeof isShallow!='boolean'&&isShallow!=null){thisArg=callback;callback=(typeof isShallow!='function'&&thisArg&&thisArg[isShallow]===array)?null:isShallow;isShallow=false;}if(callback!=null){array=map(array,callback,thisArg);}return baseFlatten(array,isShallow);}function indexOf(array,value,fromIndex){if(typeof fromIndex=='number'){var length=array?array.length:0;fromIndex=(fromIndex<0?nativeMax(0,length+fromIndex):fromIndex||0);}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1;}return baseIndexOf(array,value,fromIndex);}function initial(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!='number'&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg,3);while(index--&&callback(array[index],index,array)){n++;}}else{n=(callback==null||thisArg)?1:callback||n;}return slice(array,0,nativeMin(nativeMax(0,length-n),length));}function intersection(){var args=[],argsIndex=-1,argsLength=arguments.length,caches=getArray(),indexOf=getIndexOf(),trustIndexOf=indexOf===baseIndexOf,seen=getArray();while(++argsIndex<argsLength){var value=arguments[argsIndex];if(isArray(value)||isArguments(value)){args.push(value);caches.push(trustIndexOf&&value.length>=largeArraySize&&createCache(argsIndex?args[argsIndex]:seen));}}var array=args[0],index=-1,length=array?array.length:0,result=[];outer:while(++index<length){var cache=caches[0];value=array[index];if((cache?cacheIndexOf(cache,value):indexOf(seen,value))<0){argsIndex=argsLength;(cache||seen).push(value);while(--argsIndex){cache=caches[argsIndex];if((cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value))<0){continue outer;}}result.push(value);}}while(argsLength--){cache=caches[argsLength];if(cache){releaseObject(cache);}}releaseArray(caches);releaseArray(seen);return result;}function last(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!='number'&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg,3);while(index--&&callback(array[index],index,array)){n++;}}else{n=callback;if(n==null||thisArg){return array?array[length-1]:undefined;}}return slice(array,nativeMax(0,length-n));}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;if(typeof fromIndex=='number'){index=(fromIndex<0?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1;}while(index--){if(array[index]===value){return index;}}return-1;}function pull(array){var args=arguments,argsIndex=0,argsLength=args.length,length=array?array.length:0;while(++argsIndex<argsLength){var index=-1,value=args[argsIndex];while(++index<length){if(array[index]===value){splice.call(array,index--,1);length--;}}}return array;}function range(start,end,step){start=+start||0;step=typeof step=='number'?step:(+step||1);if(end==null){end=start;start=0;}var index=-1,length=nativeMax(0,ceil((end-start)/(step||1))),result=Array(length);while(++index<length){result[index]=start;start+=step;}return result;}function remove(array,callback,thisArg){var index=-1,length=array?array.length:0,result=[];callback=lodash.createCallback(callback,thisArg,3);while(++index<length){var value=array[index];if(callback(value,index,array)){result.push(value);splice.call(array,index--,1);length--;}}return result;}function rest(array,callback,thisArg){if(typeof callback!='number'&&callback!=null){var n=0,index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(++index<length&&callback(array[index],index,array)){n++;}}else{n=(callback==null||thisArg)?1:nativeMax(0,callback);}return slice(array,n);}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;callback=callback?lodash.createCallback(callback,thisArg,1):identity;value=callback(value);while(low<high){var mid=(low+high)>>>1;(callback(array[mid])<value)?low=mid+1:high=mid;}return low;}function union(){return baseUniq(baseFlatten(arguments,true,true));}function uniq(array,isSorted,callback,thisArg){if(typeof isSorted!='boolean'&&isSorted!=null){thisArg=callback;callback=(typeof isSorted!='function'&&thisArg&&thisArg[isSorted]===array)?null:isSorted;isSorted=false;}if(callback!=null){callback=lodash.createCallback(callback,thisArg,3);}return baseUniq(array,isSorted,callback);}function without(array){return baseDifference(array,slice(arguments,1));}function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArray(array)||isArguments(array)){var result=result?baseUniq(baseDifference(result,array).concat(baseDifference(array,result))):array;}}return result||[];}function zip(){var array=arguments.length>1?arguments:arguments[0],index=-1,length=array?max(pluck(array,'length')):0,result=Array(length<0?0:length);while(++index<length){result[index]=pluck(array,index);}return result;}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};if(!values&&length&&!isArray(keys[0])){values=[];}while(++index<length){var key=keys[index];if(values){result[key]=values[index];}else if(key){result[key[0]]=key[1];}}return result;}function after(n,func){if(!isFunction(func)){throw new TypeError;}return function(){if(--n<1){return func.apply(this,arguments);}};}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg);}function bindAll(object){var funcs=arguments.length>1?baseFlatten(arguments,true,false,1):functions(object),index=-1,length=funcs.length;while(++index<length){var key=funcs[index];object[key]=createWrapper(object[key],1,null,null,object);}return object;}function bindKey(object,key){return arguments.length>2?createWrapper(key,19,slice(arguments,2),null,object):createWrapper(key,3,null,null,object);}function compose(){var funcs=arguments,length=funcs.length;while(length--){if(!isFunction(funcs[length])){throw new TypeError;}}return function(){var args=arguments,length=funcs.length;while(length--){args=[funcs[length].apply(this,args)];}return args[0];};}function curry(func,arity){arity=typeof arity=='number'?arity:(+arity||func.length);return createWrapper(func,4,null,null,null,arity);}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(!isFunction(func)){throw new TypeError;}wait=nativeMax(0,wait)||0;if(options===true){var leading=true;trailing=false;}else if(isObject(options)){leading=options.leading;maxWait='maxWait'in options&&(nativeMax(wait,options.maxWait)||0);trailing='trailing'in options?options.trailing:trailing;}var delayed=function(){var remaining=wait-(now()-stamp);if(remaining<=0){if(maxTimeoutId){clearTimeout(maxTimeoutId);}var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null;}}}else{timeoutId=setTimeout(delayed,remaining);}};var maxDelayed=function(){if(timeoutId){clearTimeout(timeoutId);}maxTimeoutId=timeoutId=trailingCall=undefined;if(trailing||(maxWait!==wait)){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null;}}};return function(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId;}else{if(!maxTimeoutId&&!leading){lastCalled=stamp;}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId);}lastCalled=stamp;result=func.apply(thisArg,args);}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining);}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId);}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait);}if(leadingCall){isCalled=true;result=func.apply(thisArg,args);}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=null;}return result;};}function defer(func){if(!isFunction(func)){throw new TypeError;}var args=slice(arguments,1);return setTimeout(function(){func.apply(undefined,args);},1);}function delay(func,wait){if(!isFunction(func)){throw new TypeError;}var args=slice(arguments,2);return setTimeout(function(){func.apply(undefined,args);},wait);}function memoize(func,resolver){if(!isFunction(func)){throw new TypeError;}var memoized=function(){var cache=memoized.cache,key=resolver?resolver.apply(this,arguments):keyPrefix+arguments[0];return hasOwnProperty.call(cache,key)?cache[key]:(cache[key]=func.apply(this,arguments));}memoized.cache={};return memoized;}function once(func){var ran,result;if(!isFunction(func)){throw new TypeError;}return function(){if(ran){return result;}ran=true;result=func.apply(this,arguments);func=null;return result;};}function partial(func){return createWrapper(func,16,slice(arguments,1));}function partialRight(func){return createWrapper(func,32,null,slice(arguments,1));}function throttle(func,wait,options){var leading=true,trailing=true;if(!isFunction(func)){throw new TypeError;}if(options===false){leading=false;}else if(isObject(options)){leading='leading'in options?options.leading:leading;trailing='trailing'in options?options.trailing:trailing;}debounceOptions.leading=leading;debounceOptions.maxWait=wait;debounceOptions.trailing=trailing;return debounce(func,wait,debounceOptions);}function wrap(value,wrapper){return createWrapper(wrapper,16,[value]);}function constant(value){return function(){return value;};}function createCallback(func,thisArg,argCount){var type=typeof func;if(func==null||type=='function'){return baseCreateCallback(func,thisArg,argCount);}if(type!='object'){return property(func);}var props=keys(func),key=props[0],a=func[key];if(props.length==1&&a===a&&!isObject(a)){return function(object){var b=object[key];return a===b&&(a!==0||(1/a==1/b));};}return function(object){var length=props.length,result=false;while(length--){if(!(result=baseIsEqual(object[props[length]],func[props[length]],null,true))){break;}}return result;};}function escape(string){return string==null?'':String(string).replace(reUnescapedHtml,escapeHtmlChar);}function identity(value){return value;}function mixin(object,source,options){var chain=true,methodNames=source&&functions(source);if(!source||(!options&&!methodNames.length)){if(options==null){options=source;}ctor=lodashWrapper;source=object;object=lodash;methodNames=functions(source);}if(options===false){chain=false;}else if(isObject(options)&&'chain'in options){chain=options.chain;}var ctor=object,isFunc=isFunction(ctor);forEach(methodNames,function(methodName){var func=object[methodName]=source[methodName];if(isFunc){ctor.prototype[methodName]=function(){var chainAll=this.__chain__,value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(object,args);if(chain||chainAll){if(value===result&&isObject(result)){return this;}result=new ctor(result);result.__chain__=chainAll;}return result;};}});}function noConflict(){context._=oldDash;return this;}function noop(){}var now=isNative(now=Date.now)&&now||function(){return new Date().getTime();};var parseInt=nativeParseInt(whitespace+'08')==8?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,''):value,radix||0);};function property(key){return function(object){return object[key];};}function random(min,max,floating){var noMin=min==null,noMax=max==null;if(floating==null){if(typeof min=='boolean'&&noMax){floating=min;min=1;}else if(!noMax&&typeof max=='boolean'){floating=max;noMax=true;}}if(noMin&&noMax){max=1;}min=+min||0;if(noMax){max=min;min=0;}else{max=+max||0;}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+(rand*(max-min+parseFloat('1e-'+((rand+'').length-1)))),max);}return baseRandom(min,max);}function result(object,key){if(object){var value=object[key];return isFunction(value)?object[key]():value;}}function template(text,data,options){var settings=lodash.templateSettings;text=String(text||'');options=defaults({},options,settings);var imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports);var isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+'|'+interpolate.source+'|'+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+'|'+(options.evaluate||reNoMatch).source+'|$','g');text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){source+="' +\n__e("+escapeValue+") +\n'";}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '";}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'";}index=offset+match.length;return match;});source+="';\n";var variable=options.variable,hasVariable=variable;if(!hasVariable){variable='obj';source='with ('+variable+') {\n'+source+'\n}\n';}source=(isEvaluating?source.replace(reEmptyStringLeading,''):source).replace(reEmptyStringMiddle,'$1').replace(reEmptyStringTrailing,'$1;');source='function('+variable+') {\n'+(hasVariable?'':variable+' || ('+variable+' = {});\n')+"var __t, __p = '', __e = _.escape"+(isEvaluating?', __j = Array.prototype.join;\n'+"function print() { __p += __j.call(arguments, '') }\n":';\n')+source+'return __p\n}';var sourceURL='\n/*\n//# sourceURL='+(options.sourceURL||'/lodash/template/source['+(templateCounter++)+']')+'\n*/';try{var result=Function(importsKeys,'return '+source+sourceURL).apply(undefined,importsValues);}catch(e){e.source=source;throw e;}if(data){return result(data);}result.source=source;return result;}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);callback=baseCreateCallback(callback,thisArg,1);while(++index<n){result[index]=callback(index);}return result;}function unescape(string){return string==null?'':String(string).replace(reEscapedHtml,unescapeHtmlChar);}function uniqueId(prefix){var id=++idCounter;return String(prefix==null?'':prefix)+id;}function chain(value){value=new lodashWrapper(value);value.__chain__=true;return value;}function tap(value,interceptor){interceptor(value);return value;}function wrapperChain(){this.__chain__=true;return this;}function wrapperToString(){return String(this.__wrapped__);}function wrapperValueOf(){return this.__wrapped__;}lodash.after=after;lodash.assign=assign;lodash.at=at;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.chain=chain;lodash.compact=compact;lodash.compose=compose;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.createCallback=createCallback;lodash.curry=curry;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.filter=filter;lodash.flatten=flatten;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.map=map;lodash.mapValues=mapValues;lodash.max=max;lodash.memoize=memoize;lodash.merge=merge;lodash.min=min;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.pull=pull;lodash.range=range;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.shuffle=shuffle;lodash.sortBy=sortBy;lodash.tap=tap;lodash.throttle=throttle;lodash.times=times;lodash.toArray=toArray;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.values=values;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.collect=map;lodash.drop=rest;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;lodash.unzip=zip;mixin(lodash);lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.contains=contains;lodash.escape=escape;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.has=has;lodash.identity=identity;lodash.indexOf=indexOf;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isNaN=isNaN;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isUndefined=isUndefined;lodash.lastIndexOf=lastIndexOf;lodash.mixin=mixin;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.result=result;lodash.runInContext=runInContext;lodash.size=size;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.template=template;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.all=every;lodash.any=some;lodash.detect=find;lodash.findWhere=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.include=contains;lodash.inject=reduce;mixin(function(){var source={}forOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func;}});return source;}(),false);lodash.first=first;lodash.last=last;lodash.sample=sample;lodash.take=first;lodash.head=first;forOwn(lodash,function(func,methodName){var callbackable=methodName!=='sample';if(!lodash.prototype[methodName]){lodash.prototype[methodName]=function(n,guard){var chainAll=this.__chain__,result=func(this.__wrapped__,n,guard);return!chainAll&&(n==null||(guard&&!(callbackable&&typeof n=='function')))?result:new lodashWrapper(result,chainAll);};}});lodash.VERSION='2.4.2';lodash.prototype.chain=wrapperChain;lodash.prototype.toString=wrapperToString;lodash.prototype.value=wrapperValueOf;lodash.prototype.valueOf=wrapperValueOf;forEach(['join','pop','shift'],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var chainAll=this.__chain__,result=func.apply(this.__wrapped__,arguments);return chainAll?new lodashWrapper(result,chainAll):result;};});forEach(['push','reverse','sort','unshift'],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){func.apply(this.__wrapped__,arguments);return this;};});forEach(['concat','slice','splice'],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments),this.__chain__);};});return lodash;}var _=runInContext();if(typeof define=='function'&&typeof define.amd=='object'&&define.amd){root._=_;define(function(){return _;});}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_;}else{freeExports._=_;}}else{root._=_;}}.call(this));}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}]},{},[1])